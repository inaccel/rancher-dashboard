(self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[]).push([[4354],{87006:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>d});var t=r(45522),s=r.n(t),i=r(67643),n=r.n(i),l=n()(s());l.push([e.id,".banner[data-v-e527d0e2]{margin:0 0 10px 0}",""]);const d=l},64354:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>m});var t=r(20641),s=r(90033);const i={key:1};function n(e,a,r,n,l,d){const o=(0,t.g2)("Loading"),c=(0,t.g2)("Masthead"),p=(0,t.g2)("Banner"),u=(0,t.g2)("ResourceTable");return e.$fetchState.pending?((0,t.uX)(),(0,t.Wv)(o,{key:0})):((0,t.uX)(),(0,t.CE)("div",i,[(0,t.bF)(c,{schema:l.schema,resource:l.resource,"create-location":d.createLocation,"type-display":e.t("manager.cloudCredentials.label")},null,8,["schema","resource","create-location","type-display"]),(0,t.eW)(),d.expiredData.expiring?((0,t.uX)(),(0,t.Wv)(p,{key:0,"data-testid":"cert-expiring-banner",color:"warning",label:d.expiredData.expiring},null,8,["label"])):(0,t.Q3)("",!0),(0,t.eW)(),d.expiredData.expired?((0,t.uX)(),(0,t.Wv)(p,{key:1,color:"error",label:d.expiredData.expired},null,8,["label"])):(0,t.Q3)("",!0),(0,t.eW)(),(0,t.bF)(u,{schema:l.schema,rows:d.rows,headers:d.headers,namespaced:!1,"group-by":"providerDisplay"},{"cell:id":(0,t.k6)((({row:e})=>[(0,t.eW)((0,s.toDisplayString)(e.id.replace("cattle-global-data:","")),1)])),_:1},8,["schema","rows","headers"])]))}var l=r(45016),d=r(2803),o=r(24718),c=r(45848),p=r(53806),u=r(57735),h=r(17899);const g={components:{Loading:l.A,ResourceTable:d.A,Masthead:o.A,Banner:h.l},async fetch(){const e={};this.$store.getters["management/schemaFor"](c.bB)&&!this.$store.getters["cluster/paginationEnabled"](c.bB)&&(e.secrets=this.$store.dispatch("management/findAll",{type:c.bB})),e.allCredentials=this.$store.dispatch("rancher/findAll",{type:c.k$.CLOUD_CREDENTIAL});const a=await(0,u.kR)(e);this.allCredentials=a.allCredentials,this.hasHarvester=!!this.allCredentials.find((e=>!!e.harvestercredentialConfig))},data(){return{allCredentials:null,resource:c.k$.CLOUD_CREDENTIAL,schema:this.$store.getters["rancher/schemaFor"](c.k$.CLOUD_CREDENTIAL)}},computed:{rows(){return this.allCredentials||[]},headers(){const e=[p.vQ,p.ZU,{name:"apikey",labelKey:"tableHeaders.apikey",value:"publicData",sort:"publicData",search:"publicData",formatter:"CloudCredPublicData"},p.tC];return this.hasHarvester&&e.push({name:"expiresDate",labelKey:"tableHeaders.expires",value:"expires",sort:"expiresForSort",formatter:"CloudCredExpired"}),e.push(p.Q5),e},createLocation(){return{name:"c-cluster-manager-cloudCredential-create",params:{product:this.$store.getters["currentProduct"].name,resource:this.resource}}},expiredData(){const e=this.allCredentials.reduce(((e,a)=>{const r=a.expireData;return r?.expiring&&e.expiring++,r?.expired&&e.expired++,e}),{expiring:0,expired:0});return{expiring:e.expiring?this.t("manager.cloudCredentials.banners.expiring",{count:e.expiring}):"",expired:e.expired?this.t("manager.cloudCredentials.banners.expired",{count:e.expired}):""}}}};r(48212);var x=r(66262);const b=(0,x.A)(g,[["render",n],["__scopeId","data-v-e527d0e2"]]),m=b},48212:(e,a,r)=>{var t=r(87006);t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals);var s=r(99548).A;s("0f3f465a",t,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=4354.9c219103.js.map