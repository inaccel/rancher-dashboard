(self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[]).push([[4528,5663],{51736:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(45522),l=a.n(s),i=a(67643),n=a.n(i),u=n()(l());u.push([e.id,".key-value[data-v-5f725498]{width:100%}.key-value .kv-container[data-v-5f725498]{display:grid;align-items:center;grid-template-columns:1fr 1fr 50px;-moz-column-gap:1.75%;column-gap:1.75%}.key-value .kv-container .kv-item[data-v-5f725498]{background-color:var(--disabled-bg);border:1px solid var(--border);border-radius:5px;width:100%;margin:10px 0 10px 0;height:40px;line-height:40px;padding:0 10px}.key-value .kv-container .kv-item.link-hidden[data-v-5f725498]{color:var(--disabled-text)}.key-value .kv-container .kv-item.key[data-v-5f725498]{align-self:flex-start}",""]);const o=u},75984:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(45522),l=a.n(s),i=a(67643),n=a.n(i),u=n()(l());u.push([e.id,".overlay[data-v-0fbd841e]{width:100%;height:100%;position:absolute;top:0;left:0;background-color:var(--overlay-bg);z-index:1}.ui-links-setting P[data-v-0fbd841e]{line-height:1.25;margin-bottom:10px}.ui-links-setting .underline[data-v-0fbd841e]{text-decoration:underline}.action[data-v-0fbd841e]{display:flex}.action input[data-v-0fbd841e]{margin-right:5px}",""]);const o=u},52346:(e,t,a)=>{"use strict";a.d(t,{G3:()=>h,ag:()=>p});var s=a(93133),l=a(45848),i=a(25783),n=a(57735),u=a(39081),o=a(96763);const d=[{key:"docs",value:s.M0,enabled:!0},{key:"forums",value:"https://forums.rancher.com/",enabled:!0},{key:"slack",value:"https://slack.rancher.io/",enabled:!0},{key:"issues",value:"https://github.com/rancher/dashboard/issues/new/choose",enabled:!0},{key:"getStarted",value:`${s.M0}/getting-started/overview`,enabled:!0}],r={key:"suseCollective",value:"https://susecollective.suse.com/join/prime",enabled:!0},c={key:"commercialSupport",value:"/support",enabled:!0,readonly:!0},v={key:"cnforums",value:"https://forums.rancher.cn/",enabled:!0},k="v1",h="v1.1";async function p(e,t,a,s){let c={};try{const t=await e.dispatch("management/find",{type:l.Mc.SETTING,id:i.HG.UI_CUSTOM_LINKS});t.value&&(c=JSON.parse(t.value))}catch(p){o.warn("Could not parse custom link settings",p)}if(c?.version?.startsWith(k)){if(c?.version===k&&(c.version=h,c.defaults.includes(r.key)||c.defaults.push(r.key)),c.defaults){const e=[...d];(0,u.f$)()&&e.push(r),e.forEach((e=>{const t=c.defaults.find((t=>t===e.key));e.enabled=!!t})),c.defaults=e}return m(c,t,a,s,e)}const v={version:k,defaults:[...d],custom:[]};(0,u.f$)()&&v.defaults.push(r);try{const{uiIssuesSetting:t,uiCommunitySetting:a}=await(0,n.kR)({uiIssuesSetting:e.dispatch("management/find",{type:l.Mc.SETTING,id:i.HG.ISSUES}),uiCommunitySetting:e.dispatch("management/find",{type:l.Mc.SETTING,id:i.HG.COMMUNITY_LINKS})});if("false"===a?.value&&v.defaults.forEach((e=>e.enabled=!1)),t?.value){v.custom.push({label:s?s("customLinks.defaults.issues"):"Issues",value:t.value});const e=v.defaults?.find((e=>"issues"===e.key));e&&(e.enabled=!1,e.readOnly=!0)}}catch(p){o.warn("Could not parse legacy link settings",p)}return m(v,t,a,s,e)}function m(e,t,a,s,l){if(!t&&!a){const t=e.defaults?.find((e=>"commercialSupport"===e.key));t||e.defaults.push(c)}const i=l.getters["i18n/selectedLocaleLabel"];i===s("locale.zh-hans")&&e.defaults.push(v),e.defaults=e.defaults.map((e=>({...e,label:s(`'customLinks.defaults.${e.key}`)})));const n=e.custom.reduce(((e,t)=>(e[t.label]=t,e)),{});return e.defaults.forEach((e=>{n[e.label]&&(e.enabled=!1,e.readonly=!0)})),e}},65663:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(20641),l=a(90033);const i=e=>((0,s.Qi)("data-v-5f725498"),e=e(),(0,s.jt)(),e),n={class:"key-value"},u={class:"clearfix"},o={class:"kv-container"},d={class:"text-label"},r={class:"text-label"},c=i((()=>(0,s.Lk)("label",{class:"text-label"},null,-1))),v={key:1};function k(e,t,a,i,k,h){const p=(0,s.g2)("Checkbox");return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.Lk)("div",u,[(0,s.Lk)("h3",null,(0,l.toDisplayString)(e.t("customLinks.settings.default")),1)]),(0,s.eW)(),(0,s.Lk)("div",o,[(0,s.Lk)("label",d,(0,l.toDisplayString)(e.t("customLinks.settings.keyLabel")),1),(0,s.eW)(),(0,s.Lk)("label",r,(0,l.toDisplayString)(e.t("customLinks.settings.valueLabel")),1),(0,s.eW)(),c,(0,s.eW)(),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,((e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[(0,s.Lk)("div",{class:(0,l.normalizeClass)(["kv-item key",{"link-hidden":!e.enabled}])},[(0,s.Lk)("span",null,(0,l.toDisplayString)(e.label),1)],2),(0,s.eW)(),(0,s.Lk)("div",{class:(0,l.normalizeClass)(["kv-item value",{"link-hidden":!e.enabled}])},[(0,s.Lk)("span",null,(0,l.toDisplayString)(e.value),1)],2),(0,s.eW)(),e.readonly||h.isView?((0,s.uX)(),(0,s.CE)("div",v)):((0,s.uX)(),(0,s.CE)("div",{key:t+"show",class:"link-show-hide-checkbox"},[h.isView?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(p,{key:0,value:e.enabled,"onUpdate:value":t=>e.enabled=t,"label-key":"customLinks.settings.showLabel","data-testid":`custom-links__checkbox-${t}`,onInput:a=>h.showhide(e,t,a)},null,8,["value","onUpdate:value","data-testid","onInput"]))]))],64)))),128))])])}var h=a(77444),p=a(73317);const m={name:"DefaultLinksEditor",emits:["update:value"],components:{Checkbox:p.S},props:{value:{type:Array,default:()=>[]},mode:{type:String,required:!0}},computed:{isView(){return this.mode===h.nW}},methods:{showhide(e,t,a){const s=this.value[t];s["enabled"]=!!s.enabled,this.$emit("update:value",this.value)}}};a(62950);var f=a(66262);const b=(0,f.A)(m,[["render",k],["__scopeId","data-v-5f725498"]]),g=b},92147:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>W});var s=a(20641),l=a(90033);const i={key:1},n={class:"mb-20"},u={class:"text-label"},o={class:"mt-20"},d={class:"ui-links-setting mt-20"},r={key:0,class:"mt-20"};function c(e,t,a,c,v,k){const h=(0,s.g2)("Loading"),p=(0,s.g2)("TabTitle"),m=(0,s.g2)("KeyValue"),f=(0,s.g2)("DefaultLinksEditor"),b=(0,s.g2)("Banner"),g=(0,s.g2)("AsyncButton");return e.$fetchState.pending?((0,s.uX)(),(0,s.Wv)(h,{key:0})):((0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("h1",n,[(0,s.bF)(p,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,l.toDisplayString)(e.t("customLinks.label")),1)])),_:1})]),(0,s.eW)(),(0,s.Lk)("div",null,[(0,s.Lk)("label",u,(0,l.toDisplayString)(e.t("customLinks.description",{},!0)),1)]),(0,s.eW)(),(0,s.Lk)("div",o,[(0,s.bF)(m,{value:v.value.custom,"onUpdate:value":t[0]||(t[0]=e=>v.value.custom=e),title:"Custom Links","as-map":!1,"key-name":"label","key-label":e.t("customLinks.settings.keyLabel"),"value-label":e.t("customLinks.settings.valueLabel"),"add-label":e.t("customLinks.addLink"),"read-allowed":!1,protip:!1,mode:k.mode},null,8,["value","key-label","value-label","add-label","mode"])]),(0,s.eW)(),(0,s.Lk)("div",d,[(0,s.bF)(f,{value:v.value.defaults,"onUpdate:value":t[1]||(t[1]=e=>v.value.defaults=e),mode:k.mode},null,8,["value","mode"])]),(0,s.eW)(),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.errors,((e,t)=>((0,s.uX)(),(0,s.Wv)(b,{key:t,color:"error",label:e},null,8,["label"])))),128)),(0,s.eW)(),"edit"===k.mode?((0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(g,{class:"pull-right",mode:"apply",onClick:k.save},null,8,["onClick"])])):(0,s.Q3)("",!0)]))}var v=a(45016),k=a(17793),h=a(15203),p=a(45848),m=a(76890),f=a(25783),b=a(77444),g=a(75429),y=a(66278),L=a(39081),S=a(65663),C=a(52346),I=a(98914);const w={components:{KeyValue:g.A,Loading:v.A,AsyncButton:k.A,Banner:h.A,DefaultLinksEditor:S["default"],TabTitle:I.A},async fetch(){this.value=await(0,C.ag)(this.$store,this.hasSupport,!1,(e=>this.t(e)))},data(){return{defaultsDisabled:!0,isRancherPrime:(0,L.f$)(),uiCustomLinks:{},bannerVal:{},value:[],errors:[]}},computed:{...(0,y.L8)({multiWithFallback:"i18n/multiWithFallback"}),mode(){const e=this.$store.getters["management/schemaFor"](p.Mc.SETTING);return e?.resourceMethods?.includes("PUT")?b.G5:b.nW},allValues(){return{version:C.G3,defaults:this.value.defaults.filter((e=>e.enabled)).map((e=>e.key)),custom:this.value.custom}},hasSupport(){return(0,L.f$)()||"true"===this.$store.getters["management/byId"](p.Mc.SETTING,f.HG.SUPPORTED)?.value}},methods:{deprecateIssueLinks(){if(this.uiIssuesSetting.value||this.uiIssuesSetting.value)return this.uiIssuesSetting.value="",this.uiCommunitySetting.value="",this.uiIssuesSetting.save()},async save(e){this.errors=[];try{const t=await(0,m.eB)(this.$store,f.HG.UI_CUSTOM_LINKS,"");t.value=JSON.stringify(this.allValues),await t.save(),this.value=await(0,C.ag)(this.$store,this.hasSupport,!1,(e=>this.t(e))),e(!0)}catch(t){this.errors.push(t),e(!1)}}}};a(56250);var x=a(66262);const E=(0,x.A)(w,[["render",c],["__scopeId","data-v-0fbd841e"]]),W=E},62950:(e,t,a)=>{var s=a(51736);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var l=a(99548).A;l("6907193c",s,!0,{sourceMap:!1,shadowMode:!1})},56250:(e,t,a)=>{var s=a(75984);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var l=a(99548).A;l("bd949c74",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=4528.87d37253.js.map