(self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[]).push([[4752],{4070:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>l});var s=t(45522),n=t.n(s),r=t(67643),i=t.n(r),o=i()(n());o.push([a.id,".back-link[data-v-0d76073c]{align-items:center;display:flex;font-size:16px;margin-bottom:10px;outline:0;padding:10px 0;width:-moz-fit-content;width:fit-content}",""]);const l=o},46959:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>l});var s=t(45522),n=t.n(s),r=t(67643),i=t.n(r),o=i()(n());o.push([a.id,".prompt-password[data-v-2a5ad66f]  .card-wrap{display:flex;flex-direction:column}.prompt-password[data-v-2a5ad66f]  .card-wrap .card-body{flex:1;justify-content:start}.prompt-password[data-v-2a5ad66f]  .card-wrap .card-body>div{flex:1;display:flex}.prompt-password[data-v-2a5ad66f]  .card-wrap .card-actions{display:flex;justify-content:flex-end;width:100%}.prompt-password[data-v-2a5ad66f]{flex:1;display:flex}.prompt-password form[data-v-2a5ad66f]{flex:1}",""]);const l=o},221:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>l});var s=t(45522),n=t.n(s),r=t(67643),i=t.n(r),o=i()(n());o.push([a.id,"hr[data-v-3ca70723]{margin:20px 0}.account[data-v-3ca70723]{justify-content:space-between}.account[data-v-3ca70723],.keys-header[data-v-3ca70723]{display:flex}.keys-header div[data-v-3ca70723]{flex:1}.keys[data-v-3ca70723]{display:flex;flex-direction:column}.keys .add[data-v-3ca70723]{align-self:flex-end}.api-url[data-v-3ca70723]{display:flex}.api-url>span[data-v-3ca70723]{margin-right:6px}",""]);const l=o},5451:(a,e,t)=>{"use strict";t.d(e,{A:()=>s});const s={data(){return{backLink:null}},beforeRouteEnter(a,e,t){t((a=>{(Object.keys(e.params).length||"home"===e.name)&&(a.backLink=e)}))}}},3183:(a,e,t)=>{"use strict";t.d(e,{A:()=>u});var s=t(20641),n=t(90033);const r=a=>((0,s.Qi)("data-v-0d76073c"),a=a(),(0,s.jt)(),a),i=r((()=>(0,s.Lk)("i",{class:"icon icon-chevron-left"},null,-1))),o=r((()=>(0,s.Lk)("i",{class:"icon icon-chevron-left"},null,-1)));function l(a,e,t,r,l,d){const c=(0,s.g2)("router-link");return t.link&&t.link.name?((0,s.uX)(),(0,s.Wv)(c,{key:0,to:t.link,class:"back-link"},{default:(0,s.k6)((()=>[i,(0,s.eW)(" "+(0,n.toDisplayString)(a.t("generic.back")),1)])),_:1},8,["to"])):((0,s.uX)(),(0,s.Wv)(c,{key:1,to:"/",class:"back-link"},{default:(0,s.k6)((()=>[o,(0,s.eW)(" "+(0,n.toDisplayString)(a.t("nav.home")),1)])),_:1}))}const d={props:{link:{type:Object,default:null}}};t(86652);var c=t(66262);const p=(0,c.A)(d,[["render",l],["__scopeId","data-v-0d76073c"]]),u=p},44752:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>D});var s=t(20641),n=t(90033);const r=a=>((0,s.Qi)("data-v-3ca70723"),a=a(),(0,s.jt)(),a),i={key:1},o={class:"account"},l=r((()=>(0,s.Lk)("hr",null,null,-1))),d={class:"keys-header"},c={class:"api-url"},p={key:0,class:"keys"},u={key:1};function h(a,e,t,r,h,y){const f=(0,s.g2)("Loading"),k=(0,s.g2)("BackLink"),g=(0,s.g2)("TabTitle"),v=(0,s.g2)("Principal"),w=(0,s.g2)("PromptChangePassword"),b=(0,s.g2)("CopyToClipboardText"),m=(0,s.g2)("ResourceTable"),x=(0,s.g2)("Banner"),A=(0,s.gN)("t");return a.$fetchState.pending?((0,s.uX)(),(0,s.Wv)(f,{key:0})):((0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(k,{link:a.backLink},null,8,["link"]),(0,s.eW)(),(0,s.Lk)("h1",null,[(0,s.bF)(g,{breadcrumb:"vendor-only"},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.toDisplayString)(a.t("accountAndKeys.title")),1)])),_:1})]),(0,s.eW)(),(0,s.bo)((0,s.Lk)("h2",null,null,512),[[A,"accountAndKeys.account.title"]]),(0,s.eW)(),(0,s.Lk)("div",o,[(0,s.bF)(v,{value:y.principal.id,"use-muted":!1,"show-labels":!0},null,8,["value"]),(0,s.eW)(),(0,s.Lk)("div",null,[h.canChangePassword?((0,s.uX)(),(0,s.CE)("button",{key:0,type:"button",class:"btn role-primary","data-testid":"account_change_password",onClick:e[0]||(e[0]=e=>a.$refs.promptChangePassword.show(!0))},(0,n.toDisplayString)(a.t("accountAndKeys.account.change")),1)):(0,s.Q3)("",!0)])]),(0,s.eW)(),(0,s.bF)(w,{ref:"promptChangePassword"},null,512),(0,s.eW)(),l,(0,s.eW)(),(0,s.Lk)("div",d,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("h2",null,null,512),[[A,"accountAndKeys.apiKeys.title"]]),(0,s.eW)(),(0,s.Lk)("div",c,[(0,s.Lk)("span",null,(0,n.toDisplayString)(a.t("accountAndKeys.apiKeys.apiEndpoint")),1),(0,s.eW)(),(0,s.bF)(b,{text:y.apiUrl},null,8,["text"])])]),(0,s.eW)(),y.apiKeySchema?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn role-primary add mb-20","data-testid":"account_create_api_keys",onClick:e[1]||(e[1]=(...a)=>y.addKey&&y.addKey(...a))},(0,n.toDisplayString)(a.t("accountAndKeys.apiKeys.add.label")),1)):(0,s.Q3)("",!0)]),(0,s.eW)(),y.apiKeySchema?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.bF)(m,{schema:y.apiKeySchema,rows:y.apiKeys,headers:y.apiKeyheaders,"key-field":"id","data-testid":"api_keys_list",search:!0,"row-actions":!0,"table-actions":!0},null,8,["schema","rows","headers"])])):((0,s.uX)(),(0,s.CE)("div",u,[(0,s.bF)(x,{color:"warning",label:a.t("accountAndKeys.apiKeys.notAllowed")},null,8,["label"])]))]))}var y=t(3183),f=t(53751);const k={class:"text-default-text"};function g(a,e,t,r,i,o){const l=(0,s.g2)("ChangePassword"),d=(0,s.g2)("AsyncButton"),c=(0,s.g2)("Card"),p=(0,s.g2)("app-modal");return i.showModal?((0,s.uX)(),(0,s.Wv)(p,{key:0,"custom-class":"change-password-modal",name:"password-modal",width:500,height:465,onClose:e[3]||(e[3]=a=>o.show(!1))},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"prompt-password","show-highlight-border":!1},{title:(0,s.k6)((()=>[(0,s.Lk)("h4",k,(0,n.toDisplayString)(a.t("changePassword.title")),1)])),body:(0,s.k6)((()=>[(0,s.Lk)("form",{onSubmit:e[1]||(e[1]=(0,f.withModifiers)((()=>{}),["prevent"]))},[(0,s.bF)(l,{ref:"changePassword",onValid:e[0]||(e[0]=a=>i.valid=a)},null,512)],32)])),actions:(0,s.k6)((()=>[(0,s.Lk)("button",{class:"btn role-secondary",type:"reset",onClick:e[2]||(e[2]=a=>o.show(!1))},(0,n.toDisplayString)(a.t("changePassword.cancel")),1),(0,s.eW)(),(0,s.bF)(d,{type:"submit",mode:"apply",class:"btn bg-error ml-10",disabled:!i.valid,value:"LOGIN",onClick:o.submit},null,8,["disabled","onClick"])])),_:1})])),_:1})):(0,s.Q3)("",!0)}var v=t(66278),w=t(84590),b=t(99910),m=t(17793),x=t(79922);const A={components:{Card:b.Z,AsyncButton:m.A,ChangePassword:w.A,AppModal:x.A},data(){return{valid:!1,password:"",showModal:!1}},computed:{...(0,v.L8)({t:"i18n/t"})},methods:{show(a){this.showModal=!!a},async submit(a){try{await this.$refs.changePassword.save(),this.show(!1),a(!0)}catch(e){a(!1)}}}};t(17845);var C=t(66262);const K=(0,C.A)(A,[["render",g],["__scopeId","data-v-2a5ad66f"]]),L=K;var S=t(45848),_=t(25783),$=t(45016),P=t(47886),W=t(5451),M=t(17899),T=t(2803),E=t(45024),F=t(98914),I=t(96763);const U="/v3",X={components:{CopyToClipboardText:E.A,BackLink:y.A,Banner:M.l,PromptChangePassword:L,Loading:$.A,ResourceTable:T.A,Principal:P.A,TabTitle:F.A},mixins:[W.A],async fetch(){this.canChangePassword=await this.calcCanChangePassword(),this.apiKeySchema&&(this.rows=await this.$store.dispatch("rancher/findAll",{type:S.k$.TOKEN}));const a=await this.$store.dispatch("management/findAll",{type:S.Mc.SETTING}),e=a.find((a=>a.id===_.HG.API_HOST)),t=a.find((a=>a.id===_.HG.SERVER_URL));this.apiHostSetting=e?.value,this.serverUrlSetting=t?.value},data(){return{apiHostSetting:null,serverUrlSetting:null,rows:null,canChangePassword:!1}},computed:{...(0,v.L8)({t:"i18n/t"}),apiKeyheaders(){return this.apiKeySchema?this.$store.getters["type-map/headersFor"](this.apiKeySchema):[]},apiUrlBase(){let a=this.apiHostSetting;a&&0!==a.indexOf("http")&&(a=`http://${a}`);let e=a||this.serverUrlSetting;return 0!==e.indexOf("http")&&(e=`${window.location.origin}/${e.replace(/^\/+/,"")}`),e=`${e.replace(/\/+$/,"")}/`,e},apiUrl(){const a=this.apiUrlBase,e=U.replace(/^\/+/,"");return`${a}${e}`},apiKeySchema(){try{return this.$store.getters["rancher/schemaFor"](S.k$.TOKEN)}catch(a){}return null},principal(){const a=this.$store.getters["auth/principalId"],e=this.$store.getters["rancher/byId"](S.k$.PRINCIPAL,a);return e||I.error("Failed to find principal with id: ",a),e||{}},apiKeys(){const a=a=>{const e=a.labels,t=a.expired,s=a.current;return(!t||!e||!e["ui-session"])&&!s};return this.rows?this.rows.filter(a):[]}},methods:{addKey(){this.$router.push({name:"account-create-key"})},async calcCanChangePassword(){if(!this.$store.getters["auth/enabled"])return!1;if("local"===this.principal.provider)return!!this.principal.loginName;const a=await this.$store.dispatch("rancher/findAll",{type:S.k$.USER,opt:{url:"/v3/users",filter:{me:!0}}});return!(!a||1!==a.length)&&!!a[0].username}}};t(9811);const B=(0,C.A)(X,[["render",h],["__scopeId","data-v-3ca70723"]]),D=B},86652:(a,e,t)=>{var s=t(4070);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[a.id,s,""]]),s.locals&&(a.exports=s.locals);var n=t(99548).A;n("b043b7ba",s,!0,{sourceMap:!1,shadowMode:!1})},17845:(a,e,t)=>{var s=t(46959);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[a.id,s,""]]),s.locals&&(a.exports=s.locals);var n=t(99548).A;n("f06ad114",s,!0,{sourceMap:!1,shadowMode:!1})},9811:(a,e,t)=>{var s=t(221);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[a.id,s,""]]),s.locals&&(a.exports=s.locals);var n=t(99548).A;n("1d2f6d2e",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=4752.0931e672.js.map