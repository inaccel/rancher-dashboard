(self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[]).push([[5323],{77908:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>s});var t=l(45522),n=l.n(t),r=l(67643),i=l.n(r),o=i()(n());o.push([e.id,".overlay[data-v-bc2ac2ac]{width:100%;height:100%;position:absolute;top:0;left:0;background-color:var(--overlay-bg);z-index:1}.ui-perf-setting P[data-v-bc2ac2ac]{line-height:1.25;margin-bottom:10px}.ui-perf-setting .underline[data-v-bc2ac2ac]{text-decoration:underline}.input[data-v-bc2ac2ac]{max-width:25%}",""]);const s=o},75323:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>z});var t=l(20641),n=l(90033);const r={key:1},i={class:"mb-20"},o={class:"ui-perf-setting"},s={class:"mt-40"},c={class:"mt-20"},d={class:"ml-20"},u={class:"mt-40"},m={class:"mt-40"},b={class:"ml-20"},v={class:"mt-40"},p={class:"ml-20"},g={class:"mt-40"},h={class:"ml-20"},f={class:"ml-20 mb-10"},y={class:"ml-20"},L={class:"ml-20"},k={class:"mt-40"},W={class:"mt-40"},C={key:0};function S(e,a,l,S,T,F){const x=(0,t.g2)("Loading"),P=(0,t.g2)("Banner"),U=(0,t.g2)("Checkbox"),R=(0,t.g2)("LabeledInput"),E=(0,t.g2)("UnitInput"),N=(0,t.g2)("AsyncButton"),I=(0,t.gN)("clean-html"),D=(0,t.gN)("t");return e.$fetchState.pending?((0,t.uX)(),(0,t.Wv)(x,{key:0})):((0,t.uX)(),(0,t.CE)("div",r,[(0,t.Lk)("h1",i,(0,n.toDisplayString)(e.t("performance.label")),1),(0,t.eW)(),(0,t.Lk)("div",null,[(0,t.Lk)("div",o,[(0,t.Lk)("div",s,[(0,t.Lk)("h2",null,(0,n.toDisplayString)(e.t("performance.serverPagination.label")),1),(0,t.eW)(),(0,t.Lk)("p",null,(0,n.toDisplayString)(e.t("performance.serverPagination.description")),1),(0,t.eW)(),(0,t.bF)(P,{color:"error","label-key":"performance.experimental"}),(0,t.eW)(),F.steveCacheEnabled?(0,t.Q3)("",!0):(0,t.bo)(((0,t.uX)(),(0,t.Wv)(P,{key:0,color:"warning"},null,512)),[[I,e.t("performance.serverPagination.featureFlag",{ffUrl:T.ffUrl},!0)]]),(0,t.eW)(),(0,t.bF)(U,{value:T.value.serverPagination.enabled,"onUpdate:value":[a[0]||(a[0]=e=>T.value.serverPagination.enabled=e),a[1]||(a[1]=e=>F.compatibleWarning("serverPagination",e))],mode:F.mode,label:e.t("performance.serverPagination.checkboxLabel"),class:"mt-10 mb-20",primary:!0,disabled:!F.steveCacheEnabled&&!T.value.serverPagination.enabled},null,8,["value","mode","label","disabled"]),(0,t.eW)(),(0,t.Lk)("p",{class:(0,n.normalizeClass)({"text-muted":!T.value.serverPagination.enabled})},(0,n.toDisplayString)(e.t("performance.serverPagination.applicable")),3),(0,t.eW)(),(0,t.Lk)("p",{class:(0,n.normalizeClass)({"text-muted":!T.value.serverPagination.enabled})},(0,n.toDisplayString)(F.steveCacheApplicableResources),3)]),(0,t.eW)(),(0,t.Lk)("div",c,[(0,t.Lk)("h2",null,(0,n.toDisplayString)(e.t("performance.inactivity.title")),1),(0,t.eW)(),(0,t.Lk)("p",null,(0,n.toDisplayString)(e.t("performance.inactivity.description")),1),(0,t.eW)(),(0,t.bF)(U,{value:T.value.inactivity.enabled,"onUpdate:value":a[2]||(a[2]=e=>T.value.inactivity.enabled=e),mode:F.mode,label:e.t("performance.inactivity.checkboxLabel"),class:"mt-10 mb-20",primary:!0},null,8,["value","mode","label"]),(0,t.eW)(),(0,t.Lk)("div",d,[(0,t.bF)(R,{value:T.value.inactivity.threshold,"onUpdate:value":a[3]||(a[3]=e=>T.value.inactivity.threshold=e),"data-testid":"inactivity-threshold",mode:F.mode,label:e.t("performance.inactivity.inputLabel"),disabled:!T.value.inactivity.enabled,class:"input mb-10",type:"number",min:"0",rules:[F.validateInactivityThreshold]},null,8,["value","mode","label","disabled","rules"]),(0,t.eW)(),(0,t.bo)((0,t.Lk)("span",{class:(0,n.normalizeClass)({"text-muted":!T.value.incrementalLoading.enabled})},null,2),[[I,e.t("performance.inactivity.information",{},!0)]])])]),(0,t.eW)(),(0,t.Lk)("div",u,[(0,t.Lk)("h2",null,(0,n.toDisplayString)(e.t("performance.websocketNotification.label")),1),(0,t.eW)(),(0,t.Lk)("p",null,(0,n.toDisplayString)(e.t("performance.websocketNotification.description")),1),(0,t.eW)(),(0,t.bF)(U,{value:T.value.disableWebsocketNotification,"onUpdate:value":a[4]||(a[4]=e=>T.value.disableWebsocketNotification=e),mode:F.mode,label:e.t("performance.websocketNotification.checkboxLabel"),class:"mt-10 mb-20",primary:!0},null,8,["value","mode","label"])]),(0,t.eW)(),(0,t.Lk)("div",m,[(0,t.Lk)("h2",null,(0,n.toDisplayString)(e.t("performance.incrementalLoad.label")),1),(0,t.eW)(),(0,t.Lk)("p",null,(0,n.toDisplayString)(e.t("performance.incrementalLoad.description")),1),(0,t.eW)(),(0,t.bF)(U,{value:T.value.incrementalLoading.enabled,mode:F.mode,label:e.t("performance.incrementalLoad.checkboxLabel"),class:"mt-10 mb-20",primary:!0,"onUpdate:value":a[5]||(a[5]=e=>F.compatibleWarning("incrementalLoading",e))},null,8,["value","mode","label"]),(0,t.eW)(),(0,t.Lk)("div",b,[(0,t.Lk)("p",{class:(0,n.normalizeClass)({"text-muted":!T.value.incrementalLoading.enabled})},(0,n.toDisplayString)(e.t("performance.incrementalLoad.setting")),3),(0,t.eW)(),(0,t.bF)(R,{value:T.value.incrementalLoading.threshold,"onUpdate:value":a[6]||(a[6]=e=>T.value.incrementalLoading.threshold=e),mode:F.mode,label:e.t("performance.incrementalLoad.inputLabel"),disabled:!T.value.incrementalLoading.enabled,class:"input",type:"number",min:"0"},null,8,["value","mode","label","disabled"])])]),(0,t.eW)(),(0,t.Lk)("div",v,[(0,t.bo)((0,t.Lk)("h2",null,null,512),[[D,"performance.manualRefresh.label"]]),(0,t.eW)(),(0,t.Lk)("p",null,(0,n.toDisplayString)(e.t("performance.manualRefresh.description")),1),(0,t.eW)(),(0,t.bF)(P,{color:"error","label-key":"performance.experimental"}),(0,t.eW)(),(0,t.bF)(U,{value:T.value.manualRefresh.enabled,mode:F.mode,label:e.t("performance.manualRefresh.checkboxLabel"),class:"mt-10 mb-20",primary:!0,"onUpdate:value":a[7]||(a[7]=e=>F.compatibleWarning("manualRefresh",e))},null,8,["value","mode","label"]),(0,t.eW)(),(0,t.Lk)("div",p,[(0,t.Lk)("p",{class:(0,n.normalizeClass)({"text-muted":!T.value.manualRefresh.enabled})},(0,n.toDisplayString)(e.t("performance.manualRefresh.setting")),3),(0,t.eW)(),(0,t.bF)(R,{value:T.value.manualRefresh.threshold,"onUpdate:value":a[8]||(a[8]=e=>T.value.manualRefresh.threshold=e),valueModifiers:{number:!0},mode:F.mode,label:e.t("performance.manualRefresh.inputLabel"),disabled:!T.value.manualRefresh.enabled,class:"input",type:"number",min:"0"},null,8,["value","mode","label","disabled"])])]),(0,t.eW)(),(0,t.Lk)("div",g,[(0,t.bo)((0,t.Lk)("h2",null,null,512),[[D,"performance.gc.label"]]),(0,t.eW)(),(0,t.Lk)("p",null,(0,n.toDisplayString)(e.t("performance.gc.description")),1),(0,t.eW)(),(0,t.bF)(P,{color:"error","label-key":"performance.experimental"}),(0,t.eW)(),(0,t.bF)(U,{value:T.value.garbageCollection.enabled,"onUpdate:value":a[9]||(a[9]=e=>T.value.garbageCollection.enabled=e),mode:F.mode,label:e.t("performance.gc.checkboxLabel"),class:"mt-10 mb-20",primary:!0},null,8,["value","mode","label"]),(0,t.eW)(),(0,t.Lk)("div",h,[(0,t.Lk)("h3",null,(0,n.toDisplayString)(e.t("performance.gc.whenRun.description")),1),(0,t.eW)(),(0,t.Lk)("div",f,[(0,t.bF)(U,{value:T.value.garbageCollection.enabledInterval,"onUpdate:value":a[10]||(a[10]=e=>T.value.garbageCollection.enabledInterval=e),mode:F.mode,class:(0,n.normalizeClass)([{"text-muted":!T.value.garbageCollection.enabled},"mt-10 mb-10"]),label:e.t("performance.gc.whenRun.intervalCheckBox.label"),disabled:!T.value.garbageCollection.enabled,primary:!0},null,8,["value","mode","class","label","disabled"]),(0,t.eW)(),(0,t.Lk)("div",y,[(0,t.bF)(E,{value:T.value.garbageCollection.interval,"onUpdate:value":a[11]||(a[11]=e=>T.value.garbageCollection.interval=e),mode:F.mode,suffix:e.t("suffix.seconds",{count:T.value.garbageCollection.interval}),label:e.t("performance.gc.whenRun.interval.inputLabel"),disabled:!T.value.garbageCollection.enabled||!T.value.garbageCollection.enabledInterval,min:"30",class:"input"},null,8,["value","mode","suffix","label","disabled"])]),(0,t.eW)(),(0,t.bF)(U,{value:T.value.garbageCollection.enabledOnNavigate,"onUpdate:value":a[12]||(a[12]=e=>T.value.garbageCollection.enabledOnNavigate=e),mode:F.mode,class:(0,n.normalizeClass)([{"text-muted":!T.value.garbageCollection.enabled},"mt-20 mb-10"]),label:e.t("performance.gc.whenRun.route.description"),disabled:!T.value.garbageCollection.enabled,primary:!0},null,8,["value","mode","class","label","disabled"])]),(0,t.eW)(),(0,t.Lk)("h3",null,(0,n.toDisplayString)(e.t("performance.gc.howRun.description")),1),(0,t.eW)(),(0,t.Lk)("div",L,[(0,t.Lk)("p",{class:(0,n.normalizeClass)({"text-muted":!T.value.garbageCollection.enabled})},(0,n.toDisplayString)(e.t("performance.gc.howRun.age.description",{},!0)),3),(0,t.eW)(),(0,t.bF)(E,{value:T.value.garbageCollection.ageThreshold,"onUpdate:value":a[13]||(a[13]=e=>T.value.garbageCollection.ageThreshold=e),mode:F.mode,suffix:e.t("suffix.seconds",{count:T.value.garbageCollection.ageThreshold}),label:e.t("performance.gc.howRun.age.inputLabel"),disabled:!T.value.garbageCollection.enabled,min:"30",class:"input"},null,8,["value","mode","suffix","label","disabled"]),(0,t.eW)(),(0,t.Lk)("p",{class:(0,n.normalizeClass)(["mt-20",{"text-muted":!T.value.garbageCollection.enabled}])},(0,n.toDisplayString)(e.t("performance.gc.howRun.count.description")),3),(0,t.eW)(),(0,t.bF)(R,{value:T.value.garbageCollection.countThreshold,"onUpdate:value":a[14]||(a[14]=e=>T.value.garbageCollection.countThreshold=e),valueModifiers:{number:!0},mode:F.mode,label:e.t("performance.gc.howRun.count.inputLabel"),disabled:!T.value.garbageCollection.enabled,class:"input",type:"number",min:"0"},null,8,["value","mode","label","disabled"])])])]),(0,t.eW)(),(0,t.Lk)("div",k,[(0,t.Lk)("h2",null,(0,n.toDisplayString)(e.t("performance.nsFiltering.label")),1),(0,t.eW)(),(0,t.Lk)("p",null,(0,n.toDisplayString)(e.t("performance.nsFiltering.description")),1),(0,t.eW)(),(0,t.bF)(P,{color:"error","label-key":"performance.experimental"}),(0,t.eW)(),(0,t.bF)(U,{value:T.value.forceNsFilterV2.enabled,mode:F.mode,label:e.t("performance.nsFiltering.checkboxLabel"),class:"mt-10 mb-20",primary:!0,"onUpdate:value":a[15]||(a[15]=e=>F.compatibleWarning("forceNsFilterV2",e))},null,8,["value","mode","label"])]),(0,t.eW)(),(0,t.Lk)("div",W,[(0,t.Lk)("h2",null,(0,n.toDisplayString)(e.t("performance.advancedWorker.label")),1),(0,t.eW)(),(0,t.Lk)("p",null,(0,n.toDisplayString)(e.t("performance.advancedWorker.description")),1),(0,t.eW)(),(0,t.bF)(P,{color:"error","label-key":"performance.experimental"}),(0,t.eW)(),(0,t.bF)(U,{value:T.value.advancedWorker.enabled,"onUpdate:value":a[16]||(a[16]=e=>T.value.advancedWorker.enabled=e),mode:F.mode,label:e.t("performance.advancedWorker.checkboxLabel"),class:"mt-10 mb-20",primary:!0},null,8,["value","mode","label"])])])]),(0,t.eW)(),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(T.errors,((e,a)=>((0,t.uX)(),(0,t.Wv)(P,{key:a,color:"error",label:e},null,8,["label"])))),128)),(0,t.eW)(),"edit"===F.mode?((0,t.uX)(),(0,t.CE)("div",C,[(0,t.bF)(N,{"data-testid":"performance__save-btn",class:"pull-right mt-20",mode:"apply",disabled:!F.canSave,onClick:F.save},null,8,["disabled","onClick"])])):(0,t.Q3)("",!0)]))}var T=l(73317),F=l(45016),x=l(17793),P=l(17899),U=l(76773),R=l(45848),E=l(25783),N=l(77444),I=l(39682),D=l(441),w=l(77780);const A={incrementalLoading:["forceNsFilterV2","serverPagination"],manualRefresh:["forceNsFilterV2","serverPagination"],forceNsFilterV2:["incrementalLoading","manualRefresh"],serverPagination:["incrementalLoading","manualRefresh"]},M={incrementalLoading:"incrementalLoad",manualRefresh:"manualRefresh",forceNsFilterV2:"nsFiltering",serverPagination:"serverPagination"},$={components:{Checkbox:T.S,Loading:F.A,AsyncButton:x.A,Banner:P.l,LabeledInput:U.o,UnitInput:I.A},async fetch(){try{this.uiPerfSetting=await this.$store.dispatch("management/find",{type:R.Mc.SETTING,id:E.HG.UI_PERFORMANCE})}catch{this.uiPerfSetting=await this.$store.dispatch("management/create",{type:R.Mc.SETTING},{root:!0}),this.uiPerfSetting.value=JSON.stringify(E.$8),this.uiPerfSetting.metadata={name:E.HG.UI_PERFORMANCE}}try{this.authUserTTL=await this.$store.dispatch("management/find",{type:R.Mc.SETTING,id:E.HG.AUTH_USER_SESSION_TTL_MINUTES})}catch{}const e=this.uiPerfSetting?.value||JSON.stringify(E.$8);this.value={...E.$8,...JSON.parse(e)},this.gcStartedEnabled=this.value.garbageCollection.enabled},data(){return{uiPerfSetting:null,authUserTTL:null,bannerVal:{},value:{},errors:[],gcStartedEnabled:null,isInactivityThresholdValid:!1,ffUrl:this.$router.resolve({name:"c-cluster-product-resource",params:{product:w.NAME,resource:R.Mc.FEATURE}}).href}},computed:{mode(){const e=this.$store.getters["management/schemaFor"](R.Mc.SETTING);return e?.resourceMethods?.includes("PUT")?N.G5:N.nW},canSave(){return!this.value.inactivity.enabled||this.isInactivityThresholdValid},steveCacheEnabled(){return this.$store.getters["features/get"](D.STEVE_CACHE)},steveCacheApplicableResources(){const e=[];return Object.entries(this.value.serverPagination.stores).forEach((([a,l])=>{const t=[];l.resources.enableAll?t.push(this.t("performance.serverPagination.resources.all")):(l.resources.enableSome.enabled.forEach((e=>{t.push(e)})),l.resources.enableSome.generic&&t.push(this.t("performance.serverPagination.resources.generic",{},!0))),e.push(`${a}: ${t.join(", ")}`)})),e.join(". ")}},methods:{validateInactivityThreshold(e){if(this.authUserTTL?.value)return parseInt(e)>parseInt(this.authUserTTL?.value)?(this.isInactivityThresholdValid=!1,this.t("performance.inactivity.authUserTTL",{current:this.authUserTTL.value})):void(this.isInactivityThresholdValid=!0);this.isInactivityThresholdValid=!0},async save(e){this.uiPerfSetting.value=JSON.stringify(this.value),this.errors=[];try{await this.uiPerfSetting.save(),this.$store.dispatch("gcPreferencesUpdated",{previouslyEnabled:this.gcStartedEnabled,newPreferences:this.value.garbageCollection},{root:!0}),this.gcStartedEnabled=this.value.garbageCollection.enabled,e(!0)}catch(a){this.errors.push(a),e(!1)}},compatibleWarning(e,a){a?(A[e]||[]).every((e=>!this.value[e].enabled))?this.value[e].enabled=!0:this.$store.dispatch("cluster/promptModal",{component:"GenericPrompt",componentProps:{applyMode:"enable",confirm:a=>{this.value[e].enabled=a},applyAction:a=>{(A[e]||[]).forEach((e=>{this.value[e].enabled=!1})),a(!0)},title:this.t("promptRemove.title",{},!0),body:this.t(`performance.${M[e]}.incompatibleDescription`,{},!0)}}):this.value[e].enabled=!1}}};l(19554);var V=l(66262);const _=(0,V.A)($,[["render",S],["__scopeId","data-v-bc2ac2ac"]]),z=_},19554:(e,a,l)=>{var t=l(77908);t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals);var n=l(99548).A;n("49eb6d5f",t,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=5323.f40ffbd3.js.map