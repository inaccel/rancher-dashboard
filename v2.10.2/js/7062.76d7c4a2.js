(self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[]).push([[7062],{46180:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var i=a(45522),o=a.n(i),s=a(67643),r=a.n(s),n=r()(o());n.push([e.id,".vertical[data-v-fcc3e7d2]{flex-direction:column;width:100%}.subtle[data-v-fcc3e7d2]{opacity:.7}.message-icon[data-v-fcc3e7d2]{display:flex;align-items:center;justify-content:center;flex:1;flex-direction:column}.message-icon>I[data-v-fcc3e7d2]{font-size:64px;margin-bottom:20px}.message-icon>I.info[data-v-fcc3e7d2]{color:var(--primary)}.message-icon>I.error[data-v-fcc3e7d2]{color:var(--error)}.message-icon>I.warning[data-v-fcc3e7d2]{color:var(--warning)}.message-icon>I.success[data-v-fcc3e7d2]{color:var(--success)}.message-icon>.message[data-v-fcc3e7d2]{font-size:20px;margin-bottom:40px;max-width:60%;text-align:center;line-height:30px}",""]);const l=n},49570:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var i=a(45522),o=a.n(i),s=a(67643),r=a.n(s),n=r()(o());n.push([e.id,'.grid[data-v-8d6f235a]{display:flex;justify-content:flex-start;flex-wrap:wrap;margin:0 -10px}@media only screen and (min-width:480px){.grid .item[data-v-8d6f235a]{width:100%}}@media only screen and (min-width:768px){.grid .item[data-v-8d6f235a]{width:100%}}@media only screen and (min-width:992px){.grid .item[data-v-8d6f235a]{width:calc(50% - 20px)}}@media only screen and (min-width:1281px){.grid .item[data-v-8d6f235a]{width:calc(33.33333% - 20px)}}.grid .item[data-v-8d6f235a]{display:grid;grid-template-areas:"logo name-version name-version" "description description description" "state state action";grid-template-columns:50px auto min-content;grid-template-rows:50px 55px 35px;row-gap:10px;-moz-column-gap:10px;column-gap:10px;margin:10px;padding:10px;position:relative;border:1px solid var(--border);border-radius:calc(var(--border-radius)*1.5)}.grid .item .logo[data-v-8d6f235a]{grid-area:logo;text-align:center;width:50px;height:50px;border-radius:calc(var(--border-radius)*2);overflow:hidden;background-color:#fff}.grid .item .logo img[data-v-8d6f235a]{width:46px;height:46px;-o-object-fit:contain;object-fit:contain;position:relative;top:2px}.grid .item .logo>i[data-v-8d6f235a]{background-color:var(--box-bg);border-radius:50%;font-size:32px;line-height:50px;width:50px}.grid .item .name-version[data-v-8d6f235a]{grid-area:name-version;padding:10px 0 0 0}.grid .item .name[data-v-8d6f235a]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin:0}.grid .item .os-label[data-v-8d6f235a]{position:absolute;top:10px;right:10px;padding:3px;font-size:12px;line-height:12px;background-color:var(--primary);color:var(--primary-text)}.grid .item .version[data-v-8d6f235a]{color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:.9em;margin-top:4px}.grid .item .description[data-v-8d6f235a]{grid-area:description}.grid .item .description-content[data-v-8d6f235a]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;line-clamp:3;overflow:hidden;text-overflow:ellipsis;color:var(--text-muted)}.grid .item .state[data-v-8d6f235a]{grid-area:state}.grid .item .action[data-v-8d6f235a]{grid-area:action;white-space:nowrap}.grid .item .action button[data-v-8d6f235a]{height:30px}',""]);const l=n},6789:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var i=a(20641),o=a(90033);const s={class:"message"};function r(e,t,a,r,n,l){return(0,i.uX)(),(0,i.CE)("div",{class:(0,o.normalizeClass)(["message-icon",{vertical:a.vertical,subtle:a.subtle}])},[(0,i.Lk)("i",{class:(0,o.normalizeClass)(["icon",{[a.icon]:!0,[a.iconState]:!!a.iconState}])},null,2),(0,i.eW)(),(0,i.Lk)("div",s,[(0,i.RG)(e.$slots,"message",{},(()=>[a.messageKey?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.eW)((0,o.toDisplayString)(e.t(a.messageKey)),1)],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)((0,o.toDisplayString)(a.message),1)],64))]),!0)])],2)}const n={props:{vertical:{type:Boolean,default:!1},icon:{type:String,required:!0},iconState:{type:String,default:null},message:{type:String,default:null},messageKey:{type:String,default:null},subtle:{type:Boolean,default:!1}}};a(33950);var l=a(66262);const d=(0,l.A)(n,[["render",r],["__scopeId","data-v-fcc3e7d2"]]),c=d},37062:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>M});var i=a(20641),o=a(90033);const s=e=>((0,i.Qi)("data-v-8d6f235a"),e=e(),(0,i.jt)(),e),r={key:1},n={class:"grid"},l=["data-testid"],d={class:"logo"},c={class:"name-version"},p={class:"name"},g={key:0,class:"os-label"},u={class:"version"},h=s((()=>(0,i.Lk)("i",{class:"icon icon-chevron-right"},null,-1))),m={class:"description"},v={class:"description-content"},f={class:"action"},y={key:0,disabled:"true",class:"btn btn-sm role-primary"},b=["onClick"],x=s((()=>(0,i.Lk)("i",{class:"icon icon-delete icon-lg"},null,-1))),w=[x],k=["onClick"],C=["onClick"],L={key:2};function A(e,t,a,s,x,A){const W=(0,i.g2)("Loading"),S=(0,i.g2)("TabTitle"),E=(0,i.g2)("TypeDescription"),X=(0,i.g2)("LazyImage"),D=(0,i.g2)("IconMessage"),I=(0,i.gN)("clean-html");return e.$fetchState.pending?((0,i.uX)(),(0,i.Wv)(W,{key:0})):A.options.length?((0,i.uX)(),(0,i.CE)("div",r,[(0,i.Lk)("h1",null,[(0,i.bF)(S,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,o.toDisplayString)(e.t("catalog.tools.header")),1)])),_:1})]),(0,i.eW)(),(0,i.bF)(E,{resource:"chart"}),(0,i.eW)(),(0,i.Lk)("div",n,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(A.options,(t=>((0,i.uX)(),(0,i.CE)("div",{key:t.chart.id,class:"item","data-testid":`cluster-tools-app-${t.chart.id}`},[(0,i.Lk)("div",d,[t.chart.iconName?((0,i.uX)(),(0,i.CE)("i",{key:0,class:(0,o.normalizeClass)(["icon",t.chart.iconName])},null,2)):((0,i.uX)(),(0,i.Wv)(X,{key:1,src:t.chart.icon},null,8,["src"]))]),(0,i.eW)(),(0,i.Lk)("div",c,[(0,i.Lk)("div",null,[(0,i.Lk)("h3",p,(0,o.toDisplayString)(t.chart.chartNameDisplay),1),(0,i.eW)(),t.chart.deploysOnWindows?((0,i.uX)(),(0,i.CE)("label",g,(0,o.toDisplayString)(e.t("catalog.charts.deploysOnWindows")),1)):(0,i.Q3)("",!0)]),(0,i.eW)(),(0,i.Lk)("div",u,[t.app&&t.app.upgradeAvailable?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.eW)("\n              v"+(0,o.toDisplayString)(t.app.currentVersion)+" ",1),(0,i.Lk)("b",null,[h,(0,i.eW)(" v"+(0,o.toDisplayString)(t.app.upgradeAvailable),1)])],64)):t.app?((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)("\n              v"+(0,o.toDisplayString)(t.app.currentVersion),1)],64)):t.chart.versions.length?((0,i.uX)(),(0,i.CE)(i.FK,{key:2},[(0,i.eW)("\n              v"+(0,o.toDisplayString)(t.chart.versions[0].version),1)],64)):(0,i.Q3)("",!0)])]),(0,i.eW)(),(0,i.Lk)("div",m,[(0,i.bo)((0,i.Lk)("div",v,null,512),[[I,t.chart.chartDescription]])]),(0,i.eW)(),(0,i.Lk)("div",f,[t.blocked?(0,i.bo)(((0,i.uX)(),(0,i.CE)("button",y,null,512)),[[I,e.t("catalog.tools.action.install")]]):t.app?((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.Lk)("button",{class:"btn btn-sm role-secondary",onClick:e=>A.remove(t.app,e)},w,8,b),(0,i.eW)(),(0,i.bo)((0,i.Lk)("button",{class:"btn btn-sm role-secondary",onClick:e=>A.edit(t.app)},null,8,k),[[I,e.t("catalog.tools.action.edit")]])],64)):(0,i.bo)(((0,i.uX)(),(0,i.CE)("button",{key:2,class:"btn btn-sm role-primary",onClick:e=>A.install(t.chart)},null,8,C)),[[I,e.t("catalog.tools.action.install")]])])],8,l)))),128))])])):((0,i.uX)(),(0,i.CE)("div",L,[(0,i.bF)(D,{icon:"icon-warning","message-key":"catalog.tools.noTools"})]))}var W=a(66278),S=a(45016),E=a(77444),X=a(84915),D=a(45848),I=a(68497),$=a(66252),T=a(41057),F=a(6789),_=a(86973),z=a(98914);const K={components:{LazyImage:$.A,Loading:S.A,IconMessage:F.A,TypeDescription:_.A,TabTitle:z.A},async fetch(){await this.$store.dispatch("catalog/load",{force:!0,reset:!0});const e=this.$route.query;this.showDeprecated="true"===e[E.GQ]||e[E.GQ]===E.Qp,this.showHidden=e[E.RG]===E.Qp,this.allInstalled=await this.$store.dispatch("cluster/findAll",{type:D.W8.APP})},data(){return{allInstalled:null,v1SystemCatalog:null,systemProject:null}},computed:{...(0,W.L8)(["currentCluster"]),...(0,W.L8)({allCharts:"catalog/charts",loadingErrors:"catalog/errors"}),...(0,W.L8)({t:"i18n/t"}),v1Apps(){return this.$store.getters["rancher/all"](D.k$.APP)},namespaces(){return this.$store.getters["activeNamespaceCache"]},rancherCatalog(){return this.$store.getters["catalog/repos"].find((e=>e.isRancher))},installedApps(){return this.allInstalled},installedAppForChart(){const e={};for(const t of this.installedApps||[]){const a=t.matchingChart();a&&(e[a.id]=t)}return e},options(){const e=this.currentCluster.status.provider||"other",t=this.allCharts||[];let a=(0,X.filterAndArrangeCharts)(t,{clusterProvider:e,showDeprecated:this.showDeprecated,showHidden:this.showHidden,showRepos:[this.rancherCatalog?._key],showTypes:[I.W8._CLUSTER_TOOL]});a=a.filter((e=>"Experimental"!==e.sideLabel));const i=a.map((e=>({chart:e,app:this.installedAppForChart[e.id]})));return i}},watch:{namespaces(){this.systemProject&&this.$store.dispatch("rancher/findAll",{type:D.k$.APP,opt:{url:`/v3/project/${this.systemProject}/apps`,force:!0}})}},mounted(){window.c=this},methods:{edit(e,t){e.goToUpgrade(t,!0)},remove(e,t){const a=(0,T.nN)(t);a?e.remove():e.promptRemove()},install(e){e.goToInstall(E.Rm)},openV1Tool(e){const t=this.$store.getters["currentCluster"],a={name:"c-cluster-explorer-tools-pages-page",params:{cluster:t.id,product:"explorer",page:e}};this.$router.replace(a)}}};a(62336);var P=a(66262);const j=(0,P.A)(K,[["render",A],["__scopeId","data-v-8d6f235a"]]),M=j},33950:(e,t,a)=>{var i=a(46180);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);var o=a(99548).A;o("a6ed4a08",i,!0,{sourceMap:!1,shadowMode:!1})},62336:(e,t,a)=>{var i=a(49570);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);var o=a(99548).A;o("7f2d10e8",i,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=7062.76d7c4a2.js.map