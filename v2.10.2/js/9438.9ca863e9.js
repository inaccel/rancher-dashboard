(self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[]).push([[9438,3938],{11354:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(45522),a=s.n(r),n=s(67643),i=s.n(n),l=i()(a());l.push([e.id,".banner[data-v-0c2eedf8]{display:flex;justify-content:space-evenly;align-items:center}.banner .datum[data-v-0c2eedf8]{text-align:center;margin-right:5px}.banner[data-v-0c2eedf8]  label{color:var(--info)}",""]);const c=l},74742:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(45522),a=s.n(r),n=s(67643),i=s.n(n),l=i()(a());l.push([e.id,".hardware-resource-gauge[data-v-5826f04a]{position:relative;display:flex;flex-direction:column}.hardware-resource-gauge .hw-gauge[data-v-5826f04a]:not(:first-of-type){margin-top:20px}.hardware-resource-gauge .values[data-v-5826f04a]{font-size:12px;padding-left:10px}",""]);const c=l},14830:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(45522),a=s.n(r),n=s(67643),i=s.n(n),l=i()(a());l.push([e.id,".badge-install[data-v-31f4ef16]:hover{cursor:pointer}.badge-install[data-v-31f4ef16]{display:flex;margin-left:10px}.badge-install[data-v-31f4ef16]:hover{border-color:var(--lightest)}.badge-install>I[data-v-31f4ef16]{line-height:inherit}.badge-install[data-v-31f4ef16]:focus{outline:0}",""]);const c=l},69746:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(45522),a=s.n(r),n=s(67643),i=s.n(n),l=i()(a());l.push([e.id,".extension-card-container[data-v-22ef4d2d]{display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(33.33333% - 40px),1fr));grid-column-gap:15px;grid-row-gap:20px}@media only screen and (max-width:992px){.extension-card-container[data-v-22ef4d2d]{grid-template-columns:1fr!important}}.cluster-dashboard-glance[data-v-22ef4d2d]{align-items:center;border-top:1px solid var(--border);border-bottom:1px solid var(--border);padding:10px 0;display:flex}.cluster-dashboard-glance[data-v-22ef4d2d]>:not(:nth-last-child(-n+2)){margin-right:40px}.cluster-dashboard-glance>:not(:nth-last-child(-n+2)) SPAN[data-v-22ef4d2d]{font-weight:700}.title h1[data-v-22ef4d2d]{margin:0}.title .cluster-dashboard-description[data-v-22ef4d2d]{margin:5px 0;opacity:.7}.actions-span[data-v-22ef4d2d]{align-self:center}.events[data-v-22ef4d2d]{margin-top:30px}.graph-options[data-v-22ef4d2d]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.etcd-metrics[data-v-22ef4d2d]  .external-link{top:-107px}.cluster-tools-tip[data-v-22ef4d2d]{margin-top:0}.cluster-tools-link[data-v-22ef4d2d]{display:flex;margin-right:10px}.cluster-tools-link>I[data-v-22ef4d2d]{line-height:inherit;margin-right:4px}.cluster-tools-link[data-v-22ef4d2d]:focus{outline:0}.cert-table-link[data-v-22ef4d2d],.events-table-link[data-v-22ef4d2d]{display:flex;justify-content:flex-end;margin-bottom:20px}.k8s-service-status[data-v-22ef4d2d]{align-items:center;display:inline-flex;border:1px solid;border-color:var(--border);margin-top:20px}.k8s-service-status .label[data-v-22ef4d2d]{border-left:1px solid var(--border)}.k8s-service-status[data-v-22ef4d2d]:not(:last-child){margin-right:20px}.k8s-service-status>div[data-v-22ef4d2d]{padding:5px 20px}.k8s-service-status>I[data-v-22ef4d2d]{text-align:center;padding:5px 10px}.k8s-service-status.unhealthy[data-v-22ef4d2d]{border-color:var(--error-border)}.k8s-service-status.unhealthy>I[data-v-22ef4d2d]{color:var(--error)}.k8s-service-status.warning>I[data-v-22ef4d2d]{color:var(--warning)}.k8s-service-status.healthy>I[data-v-22ef4d2d]{color:var(--success)}",""]);const c=l},63938:(e,t,s)=>{"use strict";s.r(t),s.d(t,{fetchClusterResources:()=>a});var r=s(96763);async function a(e,t,s={}){const a=e.getters["cluster/schemaFor"](t);if(a)try{const r=await e.dispatch("cluster/findAll",{type:t,opt:s});return r}catch(n){return r.error(`Failed fetching cluster resource ${t} with error:`,n),[]}return[]}},69438:(e,t,s)=>{"use strict";s.r(t),s.d(t,{RESOURCES:()=>qe,default:()=>it});var r=s(20641),a=s(90033);const n=e=>((0,r.Qi)("data-v-22ef4d2d"),e=e(),(0,r.jt)(),e),i={class:"dashboard"},l={class:"title"},c={key:0,class:"cluster-dashboard-description"},o={class:"cluster-dashboard-glance"},u={"data-testid":"clusterProvider__label"},d={key:0},p={key:1},h={"data-testid":"kubernetesVersion__label"},g={key:0,style:{"font-size":"0.75em"}},f={key:0,"data-testid":"architecture__label"},m={"data-testid":"created__label"},y=n((()=>(0,r.Lk)("div",{style:{flex:1}},null,-1))),v={key:1},b={class:"resource-gauges"},C={key:0,class:"extension-card-container mt-20"},S={key:1,class:"mt-40"},k={key:2,class:"hardware-resource-gauges"},E={key:3,class:"mt-40"},I={key:4,class:"hardware-resource-gauges"},x={key:5},_=["data-testid"],U={key:0,class:"icon icon-spinner icon-spin"},L={key:1,class:"icon icon-checkmark"},T={key:2,class:"icon icon-warning"},A={class:"label"},D={class:"mt-30"},w={class:"events-table-link"},R={class:"cert-table-link"};function W(e,t,s,n,W,P){const M=(0,r.g2)("TabTitle"),N=(0,r.g2)("LiveDate"),$=(0,r.g2)("router-link"),O=(0,r.g2)("ConfigBadge"),X=(0,r.g2)("ResourceSummary"),F=(0,r.g2)("SimpleBox"),Q=(0,r.g2)("HardwareResourceGauge"),B=(0,r.g2)("EventsTable"),H=(0,r.g2)("Tab"),G=(0,r.g2)("AlertTable"),j=(0,r.g2)("Certificates"),Y=(0,r.g2)("Tabbed"),K=(0,r.g2)("DashboardMetrics"),V=(0,r.g2)("EtcdInfoBanner"),q=(0,r.gN)("clean-tooltip");return(0,r.uX)(),(0,r.CE)("section",i,[(0,r.Lk)("header",null,[(0,r.Lk)("div",l,[(0,r.Lk)("h1",null,[(0,r.bF)(M,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,a.toDisplayString)(e.t("clusterIndexPage.header")),1)])),_:1})]),(0,r.eW)(),P.hasDescription?((0,r.uX)(),(0,r.CE)("div",c,[(0,r.Lk)("span",null,(0,a.toDisplayString)(e.currentCluster.spec.description),1)])):(0,r.Q3)("",!0)])]),(0,r.eW)(),(0,r.Lk)("div",o,[(0,r.Lk)("div",u,[(0,r.Lk)("label",null,(0,a.toDisplayString)(e.t("glance.provider"))+": ",1),(0,r.eW)(),P.isHarvesterCluster?((0,r.uX)(),(0,r.CE)("span",d,[(0,r.Lk)("a",{role:"button",onClick:t[0]||(t[0]=(...e)=>P.goToHarvesterCluster&&P.goToHarvesterCluster(...e))},(0,a.toDisplayString)(P.displayProvider),1)])):((0,r.uX)(),(0,r.CE)("span",p,(0,a.toDisplayString)(P.displayProvider),1))]),(0,r.eW)(),(0,r.Lk)("div",h,[(0,r.Lk)("label",null,(0,a.toDisplayString)(e.t("glance.version"))+": ",1),(0,r.eW)(),(0,r.Lk)("span",null,(0,a.toDisplayString)(e.currentCluster.kubernetesVersionBase),1),(0,r.eW)(),e.currentCluster.kubernetesVersionExtension?((0,r.uX)(),(0,r.CE)("span",g,(0,a.toDisplayString)(e.currentCluster.kubernetesVersionExtension),1)):(0,r.Q3)("",!0)]),(0,r.eW)(),P.hasNodes?((0,r.uX)(),(0,r.CE)("div",f,[(0,r.Lk)("label",null,(0,a.toDisplayString)(e.t("glance.architecture"))+": ",1),(0,r.eW)(),(0,r.bo)(((0,r.uX)(),(0,r.CE)("span",null,[(0,r.eW)((0,a.toDisplayString)(P.architecture.label),1)])),[[q,P.architecture.tooltip]])])):(0,r.Q3)("",!0),(0,r.eW)(),(0,r.Lk)("div",m,[(0,r.Lk)("label",null,(0,a.toDisplayString)(e.t("glance.created"))+": ",1),(0,r.eW)(),(0,r.Lk)("span",null,[(0,r.bF)(N,{value:e.currentCluster.metadata.creationTimestamp,"add-suffix":!0,"show-tooltip":!0},null,8,["value"])])]),(0,r.eW)(),y,(0,r.eW)(),P.showClusterTools?((0,r.uX)(),(0,r.CE)("div",v,[(0,r.bF)($,{to:{name:"c-cluster-explorer-tools"},class:"cluster-tools-link"},{default:(0,r.k6)((()=>[(0,r.Lk)("span",null,(0,a.toDisplayString)(e.t("nav.clusterTools")),1)])),_:1})])):(0,r.Q3)("",!0),(0,r.eW)(),e.currentCluster.canUpdate?((0,r.uX)(),(0,r.Wv)(O,{key:2,cluster:e.currentCluster},null,8,["cluster"])):(0,r.Q3)("",!0)]),(0,r.eW)(),(0,r.Lk)("div",b,[(0,r.bF)(X,{"spoofed-counts":P.totalCountGaugeInput},null,8,["spoofed-counts"]),(0,r.eW)(),P.canAccessNodes?((0,r.uX)(),(0,r.Wv)(X,{key:0,resource:"node"})):(0,r.Q3)("",!0),(0,r.eW)(),P.canAccessDeployments?((0,r.uX)(),(0,r.Wv)(X,{key:1,resource:"apps.deployment"})):(0,r.Q3)("",!0)]),(0,r.eW)(),W.extensionCards.length?((0,r.uX)(),(0,r.CE)("div",C,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(W.extensionCards,((t,s)=>((0,r.uX)(),(0,r.Wv)(F,{key:`extensionCards${s}`,class:"extension-card",style:(0,a.normalizeStyle)(t.style)},{default:(0,r.k6)((()=>[(0,r.Lk)("h3",null,(0,a.toDisplayString)(t.label),1),(0,r.eW)(),((0,r.uX)(),(0,r.Wv)((0,r.$y)(t.component),{resource:e.currentCluster},null,8,["resource"]))])),_:2},1032,["style"])))),128))])):(0,r.Q3)("",!0),(0,r.eW)(),P.hasStats?((0,r.uX)(),(0,r.CE)("h3",S,(0,a.toDisplayString)(e.t("clusterIndexPage.sections.capacity.label")),1)):(0,r.Q3)("",!0),(0,r.eW)(),P.hasStats?((0,r.uX)(),(0,r.CE)("div",k,[(0,r.bF)(Q,{name:e.t("clusterIndexPage.hardwareResourceGauge.pods"),used:P.podsUsed},null,8,["name","used"]),(0,r.eW)(),(0,r.bF)(Q,{name:e.t("clusterIndexPage.hardwareResourceGauge.cores"),reserved:P.cpuReserved,used:P.cpuUsed,units:P.cpuReserved.units},null,8,["name","reserved","used","units"]),(0,r.eW)(),(0,r.bF)(Q,{name:e.t("clusterIndexPage.hardwareResourceGauge.ram"),reserved:P.ramReserved,used:P.ramUsed,units:P.ramReserved.units},null,8,["name","reserved","used","units"])])):(0,r.Q3)("",!0),(0,r.eW)(),P.hasStats&&P.fpgaCapacity?((0,r.uX)(),(0,r.CE)("h3",E,(0,a.toDisplayString)(e.t("clusterIndexPage.sections.fpgaUsage.label")),1)):(0,r.Q3)("",!0),(0,r.eW)(),P.hasStats&&P.fpgaCapacity?((0,r.uX)(),(0,r.CE)("div",I,[P.intelOfsIa420fr0Capacity?((0,r.uX)(),(0,r.Wv)(Q,{key:0,name:e.t("clusterIndexPage.hardwareResourceGauge.intelOfsIa420fr0"),used:P.intelOfsIa420fr0Used},null,8,["name","used"])):(0,r.Q3)("",!0),(0,r.eW)(),P.intelOfsIa420fr0UsmCapacity?((0,r.uX)(),(0,r.Wv)(Q,{key:1,name:e.t("clusterIndexPage.hardwareResourceGauge.intelOfsIa420fr0Usm"),used:P.intelOfsIa420fr0UsmUsed},null,8,["name","used"])):(0,r.Q3)("",!0),(0,r.eW)(),P.intelOfsIa840fr0Capacity?((0,r.uX)(),(0,r.Wv)(Q,{key:2,name:e.t("clusterIndexPage.hardwareResourceGauge.intelOfsIa840fr0"),used:P.intelOfsIa840fr0Used},null,8,["name","used"])):(0,r.Q3)("",!0),(0,r.eW)(),P.intelOfsIa840fr0UsmCapacity?((0,r.uX)(),(0,r.Wv)(Q,{key:3,name:e.t("clusterIndexPage.hardwareResourceGauge.intelOfsIa840fr0Usm"),used:P.intelOfsIa840fr0UsmUsed},null,8,["name","used"])):(0,r.Q3)("",!0),(0,r.eW)(),P.intelPacA10Capacity?((0,r.uX)(),(0,r.Wv)(Q,{key:4,name:e.t("clusterIndexPage.hardwareResourceGauge.intelPacA10"),used:P.intelPacA10Used},null,8,["name","used"])):(0,r.Q3)("",!0),(0,r.eW)(),P.intelPacS10Capacity?((0,r.uX)(),(0,r.Wv)(Q,{key:5,name:e.t("clusterIndexPage.hardwareResourceGauge.intelPacS10"),used:P.intelPacS10Used},null,8,["name","used"])):(0,r.Q3)("",!0),(0,r.eW)(),P.intelPacS10UsmCapacity?((0,r.uX)(),(0,r.Wv)(Q,{key:6,name:e.t("clusterIndexPage.hardwareResourceGauge.intelPacS10Usm"),used:P.intelPacS10UsmUsed},null,8,["name","used"])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),(0,r.eW)(),P.clusterServices?((0,r.uX)(),(0,r.CE)("div",x,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(P.clusterServices,((t,s)=>((0,r.uX)(),(0,r.CE)("div",{key:s,class:(0,a.normalizeClass)(["k8s-service-status",{[t.status]:!0}]),"data-testid":`k8s-service-${t.name}`},[t.status===W.STATES_ENUM.IN_PROGRESS?((0,r.uX)(),(0,r.CE)("i",U)):t.status===W.STATES_ENUM.HEALTHY?((0,r.uX)(),(0,r.CE)("i",L)):((0,r.uX)(),(0,r.CE)("i",T)),(0,r.eW)(),(0,r.Lk)("div",A,(0,a.toDisplayString)(e.t(t.labelKey)),1)],10,_)))),128))])):(0,r.Q3)("",!0),(0,r.eW)(),(0,r.Lk)("div",D,[(0,r.bF)(Y,{onChanged:P.tabChange},{default:(0,r.k6)((()=>[(0,r.bF)(H,{name:"cluster-events",label:e.t("clusterIndexPage.sections.events.label"),weight:2},{default:(0,r.k6)((()=>[(0,r.Lk)("span",w,[(0,r.bF)($,{to:P.allEventsLink},{default:(0,r.k6)((()=>[(0,r.Lk)("span",null,(0,a.toDisplayString)(e.t("glance.eventsTable")),1)])),_:1},8,["to"])]),(0,r.eW)(),(0,r.bF)(B)])),_:1},8,["label"]),(0,r.eW)(),P.hasMonitoring?((0,r.uX)(),(0,r.Wv)(H,{key:0,name:"cluster-alerts",label:e.t("clusterIndexPage.sections.alerts.label"),weight:1},{default:(0,r.k6)((()=>["cluster-alerts"===W.selectedTab?((0,r.uX)(),(0,r.Wv)(G,{key:0})):(0,r.Q3)("",!0)])),_:1},8,["label"])):(0,r.Q3)("",!0),(0,r.eW)(),(0,r.bF)(H,{name:"cluster-certs",label:e.t("clusterIndexPage.sections.certs.label"),weight:1},{default:(0,r.k6)((()=>[(0,r.Lk)("span",R,[(0,r.bF)($,{to:P.allSecretsLink},{default:(0,r.k6)((()=>[(0,r.Lk)("span",null,(0,a.toDisplayString)(e.t("glance.secretsTable")),1)])),_:1},8,["to"])]),(0,r.eW)(),"cluster-certs"===W.selectedTab?((0,r.uX)(),(0,r.Wv)(j,{key:0})):(0,r.Q3)("",!0)])),_:1},8,["label"])])),_:1},8,["onChanged"])]),(0,r.eW)(),P.hasMetricsTabs?((0,r.uX)(),(0,r.Wv)(Y,{key:6,"default-tab":"cluster-metrics","use-hash":!1,class:"mt-30"},{default:(0,r.k6)((()=>[W.showClusterMetrics?((0,r.uX)(),(0,r.Wv)(H,{key:0,name:"cluster-metrics",label:e.t("clusterIndexPage.sections.clusterMetrics.label"),weight:2},{default:(0,r.k6)((e=>[e.active?((0,r.uX)(),(0,r.Wv)(K,{key:0,"detail-url":W.CLUSTER_METRICS_DETAIL_URL,"summary-url":W.CLUSTER_METRICS_SUMMARY_URL,"graph-height":"825px"},null,8,["detail-url","summary-url"])):(0,r.Q3)("",!0)])),_:1},8,["label"])):(0,r.Q3)("",!0),(0,r.eW)(),W.showK8sMetrics?((0,r.uX)(),(0,r.Wv)(H,{key:1,name:"k8s-metrics",label:e.t("clusterIndexPage.sections.k8sMetrics.label"),weight:1},{default:(0,r.k6)((e=>[e.active?((0,r.uX)(),(0,r.Wv)(K,{key:0,"detail-url":W.K8S_METRICS_DETAIL_URL,"summary-url":W.K8S_METRICS_SUMMARY_URL,"graph-height":"550px"},null,8,["detail-url","summary-url"])):(0,r.Q3)("",!0)])),_:1},8,["label"])):(0,r.Q3)("",!0),(0,r.eW)(),W.showEtcdMetrics?((0,r.uX)(),(0,r.Wv)(H,{key:2,name:"etcd-metrics",label:e.t("clusterIndexPage.sections.etcdMetrics.label"),weight:0},{default:(0,r.k6)((e=>[e.active?((0,r.uX)(),(0,r.Wv)(K,{key:0,class:"etcd-metrics","detail-url":W.ETCD_METRICS_DETAIL_URL,"summary-url":W.ETCD_METRICS_SUMMARY_URL,"graph-height":"550px"},{default:(0,r.k6)((()=>[(0,r.bF)(V)])),_:1},8,["detail-url","summary-url"])):(0,r.Q3)("",!0)])),_:1},8,["label"])):(0,r.Q3)("",!0)])),_:1})):(0,r.Q3)("",!0)])}var P=s(18858),M=s(66278),N=s(45848),$=s(68497),O=s(57735),X=s(68438),F=s(17899),Q=s(36783),B=s(53806),H=s(15696),G=s(22415),j=s(70546),Y=s(37900);const K={class:"datum"},V={class:"datum"},q={class:"datum"};function z(e,t,s,n,i,l){const c=(0,r.g2)("Loading"),o=(0,r.g2)("Banner");return e.$fetchState.pending?((0,r.uX)(),(0,r.Wv)(c,{key:0})):((0,r.uX)(),(0,r.Wv)(o,{key:1,class:"banner",color:"info"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",K,[(0,r.Lk)("label",null,(0,a.toDisplayString)(e.t("etcdInfoBanner.hasLeader")),1),(0,r.eW)(" "+(0,a.toDisplayString)(i.hasLeader)+",\r\n    ",1)]),(0,r.eW)(),(0,r.Lk)("div",V,[(0,r.Lk)("label",null,(0,a.toDisplayString)(e.t("etcdInfoBanner.leaderChanges")),1),(0,r.eW)(" "+(0,a.toDisplayString)(i.leaderChanges)+",\r\n    ",1)]),(0,r.eW)(),(0,r.Lk)("div",q,[(0,r.Lk)("label",null,(0,a.toDisplayString)(e.t("etcdInfoBanner.failedProposals")),1),(0,r.eW)(" "+(0,a.toDisplayString)(i.failedProposals),1)])])),_:1}))}var J=s(45016);const Z={components:{Banner:F.l,Loading:J.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore;let t="";if(this.$store.getters[`${e}/canList`](N.W8.APP))try{const s=await this.$store.dispatch(`${e}/find`,{type:N.W8.APP,id:"cattle-monitoring-system/rancher-monitoring"});t=s?.currentVersion}catch(r){}const s=await(0,Y.CT)(t,this.$store.dispatch,this.currentCluster.id);this.hasLeader=s?"Yes":"No",this.leaderChanges=await(0,Y.Hv)(t,this.$store.dispatch,this.currentCluster.id),this.failedProposals=await(0,Y.zG)(t,this.$store.dispatch,this.currentCluster.id)},data(){return{hasLeader:"No",leaderChanges:0,failedProposals:0}},computed:{...(0,M.L8)(["currentCluster"])}};s(7836);var ee=s(66262);const te=(0,ee.A)(Z,[["render",z],["__scopeId","data-v-0c2eedf8"]]),se=te;var re=s(74328),ae=s(11847);const ne={class:"chart"},ie={key:0,class:"hw-gauge"},le={class:"values text-muted"},ce={key:0},oe={key:1},ue={key:2},de={key:3},pe={key:1,class:"hw-gauge"},he={class:"values text-muted"},ge={key:0},fe={key:1},me={key:2},ye={key:3};function ve(e,t,s,n,i,l){const c=(0,r.g2)("ConsumptionGauge"),o=(0,r.g2)("SimpleBox");return(0,r.uX)(),(0,r.Wv)(o,{class:"hardware-resource-gauge"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",ne,[(0,r.Lk)("h3",null,(0,a.toDisplayString)(s.name),1),(0,r.eW)(),!s.reserved||void 0===s.reserved.total&&void 0===s.reserved.useful?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",ie,[(0,r.bF)(c,{capacity:s.reserved.total,used:s.reserved.useful,"color-stops":l.colorStops},{title:(0,r.k6)((()=>[(0,r.Lk)("span",null,[(0,r.eW)((0,a.toDisplayString)(e.t("clusterIndexPage.hardwareResourceGauge.reserved"))+" ",1),(0,r.Lk)("span",le,[s.reserved.formattedUseful?((0,r.uX)(),(0,r.CE)("span",ce,(0,a.toDisplayString)(s.reserved.formattedUseful),1)):((0,r.uX)(),(0,r.CE)("span",oe,(0,a.toDisplayString)(l.maxDecimalPlaces(s.reserved.useful)),1)),(0,r.eW)("\n                /\n                "),s.reserved.formattedTotal?((0,r.uX)(),(0,r.CE)("span",ue,(0,a.toDisplayString)(s.reserved.formattedTotal),1)):((0,r.uX)(),(0,r.CE)("span",de,(0,a.toDisplayString)(l.maxDecimalPlaces(s.reserved.total))+" "+(0,a.toDisplayString)(s.reserved.units),1))])]),(0,r.eW)(),(0,r.Lk)("span",null,(0,a.toDisplayString)(l.percentage(s.reserved)),1)])),_:1},8,["capacity","used","color-stops"])])),(0,r.eW)(),s.used&&void 0!==s.used.useful?((0,r.uX)(),(0,r.CE)("div",pe,[(0,r.bF)(c,{capacity:s.used.total,used:s.used.useful,"color-stops":l.colorStops},{title:(0,r.k6)((()=>[(0,r.Lk)("span",null,[(0,r.eW)((0,a.toDisplayString)(e.t("clusterIndexPage.hardwareResourceGauge.used"))+" ",1),(0,r.Lk)("span",he,[s.used.formattedUseful?((0,r.uX)(),(0,r.CE)("span",ge,(0,a.toDisplayString)(s.used.formattedUseful),1)):((0,r.uX)(),(0,r.CE)("span",fe,(0,a.toDisplayString)(l.maxDecimalPlaces(s.used.useful)),1)),(0,r.eW)("\n                /\n                "),s.used.formattedTotal?((0,r.uX)(),(0,r.CE)("span",me,(0,a.toDisplayString)(s.used.formattedTotal),1)):((0,r.uX)(),(0,r.CE)("span",ye,(0,a.toDisplayString)(l.maxDecimalPlaces(s.used.total))+" "+(0,a.toDisplayString)(s.used.units),1))])]),(0,r.eW)(),(0,r.Lk)("span",null,(0,a.toDisplayString)(l.percentage(s.used)),1)])),_:1},8,["capacity","used","color-stops"])])):(0,r.Q3)("",!0)])])),_:1})}var be=s(74987),Ce=s(64356);const Se={components:{ConsumptionGauge:be.A,SimpleBox:Ce.A},props:{name:{type:String,required:!0},units:{type:String,default:""},used:{type:Object,default:null},reserved:{type:Object,default:null}},computed:{colorStops(){return{0:"--success",30:"--warning",70:"--error"}}},methods:{maxDecimalPlaces(e){return Math.round(100*e)/100},strokes(e,t){return{primaryStrokeColor:this.rgba(e,1),primaryStrokeGradientColor:this.rgba(t,1),secondaryStrokeColor:this.rgba(e,.1),secondaryStrokeGradientColor:this.rgba(t,.1)}},rgba(e,t){return`rgba(var(${e}), ${t})`},percentage(e){return 0===e.total?"":`${(e.useful/e.total*100).toFixed(2)}%`}}};s(45644);const ke=(0,ee.A)(Se,[["render",ve],["__scopeId","data-v-5826f04a"]]),Ee=ke;var Ie=s(13097);const xe={class:"config-badge"},_e={class:"icon icon-brush-icon"};function Ue(e,t,s,a,n,i){const l=(0,r.gN)("clean-tooltip");return(0,r.uX)(),(0,r.CE)("div",xe,[(0,r.Lk)("div",null,[(0,r.Lk)("a",{class:"badge-install btn btn-sm role-secondary","data-testid":"add-custom-cluster-badge",onClick:t[0]||(t[0]=(...e)=>i.customBadgeDialog&&i.customBadgeDialog(...e))},[(0,r.bo)((0,r.Lk)("i",_e,null,512),[[l,i.tooltip]])])])])}var Le=s(77444);const Te={props:{cluster:{type:Object,required:!0}},name:"ConfigBadge",computed:{tooltip(){return this.t("clusterBadge.customizeAppearance")}},methods:{customBadgeDialog(){this.$store.dispatch("cluster/promptModal",{component:"AddCustomBadgeDialog",componentProps:{mode:Le.G5}})}}};s(40924);const Ae=(0,ee.A)(Te,[["render",Ue],["__scopeId","data-v-31f4ef16"]]),De=Ae;function we(e,t,s,a,n,i){const l=(0,r.g2)("SortableTable");return(0,r.uX)(),(0,r.Wv)(l,{loading:e.$fetchState.pending,rows:n.events,headers:n.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"},null,8,["loading","rows","headers"])}var Re=s(80112),We=s(63938);const Pe={components:{SortableTable:Re.A},async fetch(){this.events=await(0,We.fetchClusterResources)(this.$store,N.ll)},data(){const e={...B.rh,canBeVariable:!0,width:130},t=[e,B.qv,B.w5,B.o_,{name:"date",label:"Date",labelKey:"clusterIndexPage.sections.events.date.label",value:"timestamp",sort:"timestamp:desc",formatter:"Date",width:220,defaultSort:!0}];return{events:[],eventHeaders:t}},mounted(){this.dismissRouteHandler=this.$router.beforeEach(this.onRouteChange)},methods:{async onRouteChange(e,t,s){this.$route.name!==e.name&&await this.$store.dispatch("cluster/forgetType",N.ll),s()}},beforeUnmount(){this.dismissRouteHandler()}},Me=(0,ee.A)(Pe,[["render",we]]),Ne=Me;var $e=s(67576),Oe=s(76270);function Xe(e,t,s,a,n,i){const l=(0,r.g2)("Banner"),c=(0,r.g2)("BadgeState"),o=(0,r.g2)("ResourceTable");return(0,r.uX)(),(0,r.CE)("div",null,[e.expiredData.expiring?((0,r.uX)(),(0,r.Wv)(l,{key:0,"data-testid":"cert-expiring-banner",color:"warning",label:e.expiredData.expiring},null,8,["label"])):(0,r.Q3)("",!0),(0,r.eW)(),e.expiredData.expired?((0,r.uX)(),(0,r.Wv)(l,{key:1,color:"error",label:e.expiredData.expired},null,8,["label"])):(0,r.Q3)("",!0),(0,r.eW)(),(0,r.bF)(o,{loading:e.$fetchState.pending,schema:e.schema,headers:e.headers,rows:e.certs,"paging-label":"secret.certificate.paging","paging-params":e.pagingParams,"ignore-filter":!0},{"col:certState":(0,r.k6)((({row:e})=>[(0,r.Lk)("td",null,[(0,r.bF)(c,{color:e.certStateBackground,label:e.certStateDisplay},null,8,["color","label"])])])),_:1},8,["loading","schema","headers","rows","paging-label","paging-params"])])}var Fe=s(2803),Qe=s(91573),Be=s(39147),He=s(82964);const Ge=(0,r.pM)({components:{ResourceTable:Fe.A,Banner:F.l,BadgeState:He.j},async fetch(){this.$store.dispatch("cluster/forgetType",N.bB),this.certs=await this.$store.dispatch("cluster/findAll",{type:N.bB,opt:{watch:!1,filter:{"metadata.fields.1":Qe.TYPES.TLS}}})},data(){return{schema:this.$store.getters["cluster/schemaFor"](N.bB),headers:[{...B.c4,formatter:null,name:"certState",sort:["certState","nameSort"],value:"certState"},B.o_,B.CU,{name:"cn",labelKey:"secret.certificate.cn",value:e=>{if(e.cn)return e.cn+(e.unrepeatedSans.length?` ${this.t("secret.certificate.plusMore",{n:e.unrepeatedSans.length})}`:"")},sort:["cn"],search:["cn"]},{name:"cert-expires2",labelKey:"secret.certificate.expiresDuration",value:e=>e.timeTilExpirationDate,formatter:"LiveDate",sort:["timeTilExpiration"],search:["timeTilExpiration"],defaultSort:!0,width:100},{name:"cert-expires",labelKey:"secret.certificate.expiresOn",value:"cachedCertInfo.notAfter",formatter:"Date",sort:["cachedCertInfo.notAfter"],search:["cachedCertInfo.notAfter"]},{name:"cert-lifetime",labelKey:"secret.certificate.lifetime",value:e=>e.certLifetime,sort:["certLifetime"],search:["certLifetime"]},B.K],certs:[],pagingParams:{pluralLabel:this.t("secret.certificate.certificates"),singularLabel:this.t("secret.certificate.certificate")}}},computed:{expiredData(){let e=0,t=0;for(let s=0;s<this.certs.length;s++){const r=this.certs[s];r.certState===Be.jv.EXPIRING&&e++,r.certState===Be.jv.EXPIRED&&t++}return{expiring:e?this.t("secret.certificate.warnings.expiring",{count:e}):"",expired:t?this.t("secret.certificate.warnings.expired",{count:t}):""}}},beforeUnmount(){this.$store.dispatch("cluster/forgetType",N.bB)}}),je=(0,ee.A)(Ge,[["render",Xe]]),Ye=je;var Ke=s(98918),Ve=s(98914);const qe=[N.CU,N.kf,N.PV,N.oU.DEPLOYMENT,N.oU.STATEFUL_SET,N.oU.JOB,N.oU.DAEMON_SET,N.YV],ze="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-cluster-nodes-1/rancher-cluster-nodes?orgId=1",Je="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-cluster-1/rancher-cluster?orgId=1",Ze="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-k8s-components-nodes-1/rancher-kubernetes-components-nodes?orgId=1",et="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-k8s-components-1/rancher-kubernetes-components?orgId=1",tt="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-etcd-nodes-1/rancher-etcd-nodes?orgId=1",st="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-etcd-1/rancher-etcd?orgId=1",rt=["etcd","scheduler","controller-manager"],at={name:"ClusterExplorerIndexPage",components:{EtcdInfoBanner:se,DashboardMetrics:P.A,HardwareResourceGauge:Ee,ResourceSummary:ae.Ay,Tab:j.A,Tabbed:G.A,AlertTable:X.A,Banner:F.l,ConfigBadge:De,EventsTable:Ne,SimpleBox:Ce.A,Certificates:Ye,TabTitle:Ve.A},mixins:[re.A],fetch(){(0,We.fetchClusterResources)(this.$store,N.NW),(0,We.fetchClusterResources)(this.$store,N.Sm),this.currentCluster&&((0,O.DD)((0,Y.Qr)(this.$store,this.currentCluster.id,[ze,Je]),this,"showClusterMetrics","Determine cluster metrics"),(0,O.DD)((0,Y.Qr)(this.$store,this.currentCluster.id,[Ze,et]),this,"showK8sMetrics","Determine k8s metrics"),(0,O.DD)((0,Y.Qr)(this.$store,this.currentCluster.id,[tt,st]),this,"showEtcdMetrics","Determine etcd metrics"),(0,O.DD)((0,H.kj)(this.$store),this,"canViewMetrics","Determine Grafana Permission"),this.currentCluster.isLocal&&this.$store.getters["management/schemaFor"](N.Mc.NODE)&&this.$store.dispatch("management/findAll",{type:N.Mc.NODE}))},data(){const e=this.$store.getters["cluster/all"](N.i2),t=[B.c4,B.o_,B.gg];return{nodeHeaders:t,constraints:[],cattleDeployment:"loading",fleetDeployment:"loading",fleetStatefulSet:"loading",disconnected:!1,events:[],nodeMetrics:[],showClusterMetrics:!1,showK8sMetrics:!1,showEtcdMetrics:!1,canViewMetrics:!1,CLUSTER_METRICS_DETAIL_URL:ze,CLUSTER_METRICS_SUMMARY_URL:Je,K8S_METRICS_DETAIL_URL:Ze,K8S_METRICS_SUMMARY_URL:et,ETCD_METRICS_DETAIL_URL:tt,ETCD_METRICS_SUMMARY_URL:st,STATES_ENUM:Be.jv,clusterCounts:e,selectedTab:"cluster-events",extensionCards:(0,Oe.A)(this,$e.c7.CARD,$e.O4.CLUSTER_DASHBOARD_CARD,this.$route)}},beforeUnmount(){this.$store.dispatch("cluster/forgetType",N.ll),this.$store.dispatch("cluster/forgetType",N.NW),this.$store.dispatch("cluster/forgetType",N.Hr),this.$store.dispatch("cluster/forgetType",N.$v.NODE),this.$store.dispatch("cluster/forgetType",N.Mc.NODE),this.$store.dispatch("cluster/forgetType",N.oU.DEPLOYMENT),clearInterval(this.interval)},watch:{canViewAgents:{handler(e,t){e&&!t&&this.loadAgents()},immediate:!0}},computed:{...(0,M.L8)(["currentCluster"]),...(0,H.dO)(),nodes(){return this.$store.getters["cluster/all"](N.NW)},pods(){const e=this.$store.getters["cluster/all"](N.Sm);return e.filter((e=>e.spec.nodeName))},mgmtNodes(){return this.$store.getters["management/all"](N.Mc.CLUSTER)},fleetAgentNamespace(){return this.currentCluster.isLocal?this.$store.getters["cluster/canList"](N.oU.DEPLOYMENT)&&this.$store.getters["cluster/canList"](N.oU.STATEFUL_SET)&&this.$store.getters["cluster/byId"](N.CU,"cattle-fleet-system"):this.$store.getters["cluster/canList"](N.oU.STATEFUL_SET)&&this.$store.getters["cluster/byId"](N.CU,"cattle-fleet-system")},cattleAgentNamespace(){if(!this.currentCluster.isLocal)return this.$store.getters["cluster/canList"](N.oU.DEPLOYMENT)&&this.$store.getters["cluster/byId"](N.CU,"cattle-system")},canViewAgents(){return!!this.fleetAgentNamespace||!this.currentCluster.isLocal&&this.cattleAgentNamespace},showClusterTools(){return this.$store.getters["cluster/canList"](N.W8.CLUSTER_REPO)&&this.$store.getters["cluster/canList"](N.W8.APP)},displayProvider(){const e="other";let t=this.currentCluster?.status?.provider||e;return"rke.windows"===t&&(t="rkeWindows"),this.$store.getters["i18n/exists"](`cluster.provider.${t}`)||(t="other"),this.t(`cluster.provider.${t}`)},nodesArchitecture(){const e={};return this.nodes?.forEach((t=>{if(!t.metadata?.state?.transitioning){const s=t.labels?.[$.Pl],r=s||this.t("cluster.architecture.label.unknown");e[r]=(e[r]||0)+1}})),e},architecture(){const e=Object.keys(this.nodesArchitecture);switch(e.length){case 0:return{label:this.t("generic.provisioning")};case 1:return{label:e[0]};default:return{label:this.t("cluster.architecture.label.mixed"),tooltip:e.reduce(((e,t)=>`${e}${t}: ${this.nodesArchitecture[t]}<br>`),"")}}},isHarvesterCluster(){return this.currentCluster?.isHarvester},isRKE(){return["rke","rke.windows","rke2","rke2.windows"].includes((this.currentCluster.status.provider||"").toLowerCase())},accessibleResources(){const e=Object.keys(this.clusterCounts?.[0]?.counts||{}).filter((e=>this.$store.getters["type-map/isIgnored"]({id:e}))),t=[...new Set([...e,...qe])];return t.filter((e=>this.$store.getters["cluster/schemaFor"](e)))},clusterServices(){const e=[];return rt.forEach((t=>{e.push({name:t,status:this.getComponentStatus(t),labelKey:`clusterIndexPage.sections.componentStatus.${t}`})})),this.cattleAgentNamespace&&e.push({name:"cattle",status:this.cattleStatus,labelKey:"clusterIndexPage.sections.componentStatus.cattle"}),this.fleetAgentNamespace&&e.push({name:"fleet",status:this.fleetStatus,labelKey:"clusterIndexPage.sections.componentStatus.fleet"}),e},cattleStatus(){const e=this.cattleDeployment;return"loading"===e?Be.jv.IN_PROGRESS:!e||this.disconnected||e.status.conditions?.find((e=>"True"!==e.status))||e.metadata.state?.error?Be.jv.UNHEALTHY:e.spec.replicas!==e.status.readyReplicas||e.status.unavailableReplicas>0?Be.jv.WARNING:Be.jv.HEALTHY},fleetStatus(){const e=this.currentCluster.isLocal?[...this.fleetStatefulSet?[this.fleetStatefulSet,this.fleetDeployment]:[this.fleetDeployment]]:[this.fleetStatefulSet];if(e.find((e=>"loading"===e)))return Be.jv.IN_PROGRESS;for(const t of e)if(!t||t.status.conditions?.find((e=>"True"!==e.status))||t.metadata.state?.error)return Be.jv.UNHEALTHY;for(const t of e)if(t.spec.replicas!==t.status.readyReplicas||t.status.unavailableReplicas>0)return Be.jv.WARNING;return Be.jv.HEALTHY},totalCountGaugeInput(){const e={name:this.t("clusterIndexPage.resourceGauge.totalResources"),total:0,useful:0,warningCount:0,errorCount:0};return this.accessibleResources.forEach((t=>{const s=(0,ae.xS)(this.$store,t);Object.entries(s).forEach((t=>{e[t[0]]+=t[1]}))})),e},hasStats(){return this.currentCluster?.status?.allocatable&&this.currentCluster?.status?.requested},cpuReserved(){const e=(0,Q.ao)(this.currentCluster?.status?.allocatable?.cpu);return{total:e,useful:(0,Q.ao)(this.currentCluster?.status?.requested?.cpu),units:this.t("clusterIndexPage.hardwareResourceGauge.units.cores",{count:e})}},podsUsed(){return{total:(0,Q.ao)(this.currentCluster?.status?.allocatable?.pods||"0"),useful:(0,Q.ao)(this.currentCluster?.status?.requested?.pods||"0")}},ramReserved(){return(0,Q.S0)(this.currentCluster?.status?.allocatable?.memory,this.currentCluster?.status?.requested?.memory)},metricAggregations(){let e=this.nodes;if(this.currentCluster.isLocal){const t=this.nodes.reduce(((e,t)=>(e[t.id]=t,e)),{});e=this.mgmtNodes.filter((e=>{const s=e.metadata?.labels?.["management.cattle.io/nodename"]||e.id;return!!t[s]}))}const t=e.some((e=>e.hasARole&&!e.isWorker)),s=this.nodeMetrics.filter((e=>{const s=this.nodes.find((t=>t.id===e.id));return s&&(!t||s.isWorker)})),r={cpu:0,memory:0};return(0,Ie.isEmpty)(s)?null:s.reduce(((e,t)=>(e.cpu+=(0,Q.ao)(t.usage.cpu),e.memory+=(0,Q.ao)(t.usage.memory),e)),r)},cpuUsed(){const e=(0,Q.ao)(this.currentCluster?.status?.capacity?.cpu);return{total:e,useful:this.metricAggregations?.cpu,units:this.t("clusterIndexPage.hardwareResourceGauge.units.cores",{count:e})}},ramUsed(){return(0,Q.S0)(this.currentCluster?.status?.capacity?.memory,this.metricAggregations?.memory)},intelOfsIa420fr0Usage(){return this.pods.filter((e=>"Succeeded"!==e.status.phase&&"Failed"!==e.status.phase)).map((e=>{let t=0;return e.spec.containers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/ofs_ia420fr0"]||"0");t+=s})),e.spec.initContainers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/ofs_ia420fr0"]||"0");s>t&&(t=s)})),t})).reduce(((e,t)=>e+t),0)},intelOfsIa420fr0Capacity(){return this.nodes.map((e=>Number.parseInt(e.status.capacity["intel/ofs_ia420fr0"]||"0"))).reduce(((e,t)=>e+t),0)},intelOfsIa420fr0Used(){return{total:this.intelOfsIa420fr0Capacity,useful:this.intelOfsIa420fr0Usage}},intelOfsIa420fr0UsmUsage(){return this.pods.filter((e=>"Succeeded"!==e.status.phase&&"Failed"!==e.status.phase)).map((e=>{let t=0;return e.spec.containers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/ofs_ia420fr0_usm"]||"0");t+=s})),e.spec.initContainers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/ofs_ia420fr0_usm"]||"0");s>t&&(t=s)})),t})).reduce(((e,t)=>e+t),0)},intelOfsIa420fr0UsmCapacity(){return this.nodes.map((e=>Number.parseInt(e.status.capacity["intel/ofs_ia420fr0_usm"]||"0"))).reduce(((e,t)=>e+t),0)},intelOfsIa420fr0UsmUsed(){return{total:this.intelOfsIa420fr0UsmCapacity,useful:this.intelOfsIa420fr0UsmUsage}},intelOfsIa840fr0Usage(){return this.pods.filter((e=>"Succeeded"!==e.status.phase&&"Failed"!==e.status.phase)).map((e=>{let t=0;return e.spec.containers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/ofs_ia840fr0"]||"0");t+=s})),e.spec.initContainers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/ofs_ia840fr0"]||"0");s>t&&(t=s)})),t})).reduce(((e,t)=>e+t),0)},intelOfsIa840fr0Capacity(){return this.nodes.map((e=>Number.parseInt(e.status.capacity["intel/ofs_ia840fr0"]||"0"))).reduce(((e,t)=>e+t),0)},intelOfsIa840fr0Used(){return{total:this.intelOfsIa840fr0Capacity,useful:this.intelOfsIa840fr0Usage}},intelOfsIa840fr0UsmUsage(){return this.pods.filter((e=>"Succeeded"!==e.status.phase&&"Failed"!==e.status.phase)).map((e=>{let t=0;return e.spec.containers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/ofs_ia840fr0_usm"]||"0");t+=s})),e.spec.initContainers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/ofs_ia840fr0_usm"]||"0");s>t&&(t=s)})),t})).reduce(((e,t)=>e+t),0)},intelOfsIa840fr0UsmCapacity(){return this.nodes.map((e=>Number.parseInt(e.status.capacity["intel/ofs_ia840fr0_usm"]||"0"))).reduce(((e,t)=>e+t),0)},intelOfsIa840fr0UsmUsed(){return{total:this.intelOfsIa840fr0UsmCapacity,useful:this.intelOfsIa840fr0UsmUsage}},intelPacA10Usage(){return this.pods.filter((e=>"Succeeded"!==e.status.phase&&"Failed"!==e.status.phase)).map((e=>{let t=0;return e.spec.containers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/pac_a10"]||"0");t+=s})),e.spec.initContainers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/pac_a10"]||"0");s>t&&(t=s)})),t})).reduce(((e,t)=>e+t),0)},intelPacA10Capacity(){return this.nodes.map((e=>Number.parseInt(e.status.capacity["intel/pac_a10"]||"0"))).reduce(((e,t)=>e+t),0)},intelPacA10Used(){return{total:this.intelPacA10Capacity,useful:this.intelPacA10Usage}},intelPacS10Usage(){return this.pods.filter((e=>"Succeeded"!==e.status.phase&&"Failed"!==e.status.phase)).map((e=>{let t=0;return e.spec.containers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/pac_s10"]||"0");t+=s})),e.spec.initContainers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/pac_s10"]||"0");s>t&&(t=s)})),t})).reduce(((e,t)=>e+t),0)},intelPacS10Capacity(){return this.nodes.map((e=>Number.parseInt(e.status.capacity["intel/pac_s10"]||"0"))).reduce(((e,t)=>e+t),0)},intelPacS10Used(){return{total:this.intelPacS10Capacity,useful:this.intelPacS10Usage}},intelPacS10UsmUsage(){return this.pods.filter((e=>"Succeeded"!==e.status.phase&&"Failed"!==e.status.phase)).map((e=>{let t=0;return e.spec.containers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/pac_s10_usm"]||"0");t+=s})),e.spec.initContainers?.forEach((e=>{const s=Number.parseInt(e.resources?.limits?.["intel/pac_s10_usm"]||"0");s>t&&(t=s)})),t})).reduce(((e,t)=>e+t),0)},intelPacS10UsmCapacity(){return this.nodes.map((e=>Number.parseInt(e.status.capacity["intel/pac_s10_usm"]||"0"))).reduce(((e,t)=>e+t),0)},intelPacS10UsmUsed(){return{total:this.intelPacS10UsmCapacity,useful:this.intelPacS10UsmUsage}},fpgaCapacity(){return this.intelOfsIa420fr0Capacity+this.intelOfsIa420fr0UsmCapacity+this.intelOfsIa840fr0Capacity+this.intelOfsIa840fr0UsmCapacity+this.intelPacA10Capacity+this.intelPacS10Capacity+this.intelPacS10UsmCapacity},hasMonitoring(){return!!this.clusterCounts?.[0]?.counts?.[N.W8.APP]?.namespaces?.["cattle-monitoring-system"]},canAccessNodes(){return!!this.clusterCounts?.[0]?.counts?.[N.NW]},canAccessDeployments(){return!!this.clusterCounts?.[0]?.counts?.[N.oU.DEPLOYMENT]},hasMetricsTabs(){return this.canViewMetrics&&(this.showClusterMetrics||this.showK8sMetrics||this.showEtcdMetrics)},hasBadge(){return!!this.currentCluster?.badge},hasDescription(){return!!this.currentCluster?.spec?.description},allEventsLink(){return{name:"c-cluster-product-resource",params:{product:Ke.NAME,resource:N.ll}}},allSecretsLink(){return{name:"c-cluster-product-resource",params:{product:Ke.NAME,resource:N.bB}}},hasNodes(){return this.nodes?.length>0}},methods:{loadAgents(){this.fleetAgentNamespace&&(this.currentCluster.isLocal?(this.setAgentResource("fleetDeployment",N.oU.DEPLOYMENT,"cattle-fleet-system/fleet-controller"),this.setAgentResource("fleetStatefulSet",N.oU.STATEFUL_SET,"cattle-fleet-local-system/fleet-agent")):this.setAgentResource("fleetStatefulSet",N.oU.STATEFUL_SET,"cattle-fleet-system/fleet-agent")),this.cattleAgentNamespace&&(this.setAgentResource("cattleDeployment",N.oU.DEPLOYMENT,"cattle-system/cattle-cluster-agent"),this.interval=setInterval((()=>{this.disconnected=!!this.$store.getters["cluster/inError"]({type:N.NW})}),1e3))},async setAgentResource(e,t,s){try{this[e]=await this.$store.dispatch("cluster/find",{type:t,id:s})}catch(r){this[e]=null}},getComponentStatus(e){const t=(this.currentCluster?.status?.componentStatuses||[]).filter((t=>t.name.startsWith(e)));if(!t.length)return Be.jv.HEALTHY;const s=t.reduce(((e,t)=>{const s=t.conditions.find((e=>"True"!==e.status));return s?e+1:e}),0);return s>0?Be.jv.UNHEALTHY:Be.jv.HEALTHY},showActions(){this.$store.commit("action-menu/show",{resources:this.currentCluster,elem:this.$refs["cluster-actions"]})},async loadMetrics(){this.nodeMetrics=await(0,We.fetchClusterResources)(this.$store,N.$v.NODE,{force:!0})},tabChange(e){this.selectedTab=e?.selectedName},async goToHarvesterCluster(){try{const e=await this.$store.dispatch("management/findAll",{type:N.qt.RANCHER_CLUSTER}),t=e.find((e=>e.mgmt.id===this.currentCluster.id));await t.goToHarvesterCluster()}catch{}}}};s(32424);const nt=(0,ee.A)(at,[["render",W],["__scopeId","data-v-22ef4d2d"]]),it=nt},7836:(e,t,s)=>{var r=s(11354);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var a=s(99548).A;a("3fce7ea0",r,!0,{sourceMap:!1,shadowMode:!1})},45644:(e,t,s)=>{var r=s(74742);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var a=s(99548).A;a("4e677c56",r,!0,{sourceMap:!1,shadowMode:!1})},40924:(e,t,s)=>{var r=s(14830);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var a=s(99548).A;a("a2616ce8",r,!0,{sourceMap:!1,shadowMode:!1})},32424:(e,t,s)=>{var r=s(69746);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var a=s(99548).A;a("d01f3086",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=9438.9ca863e9.js.map