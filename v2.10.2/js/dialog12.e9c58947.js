(self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[]).push([[6602],{52489:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var a=o(45522),i=o.n(a),l=o(67643),r=o.n(l),d=r()(i());d.push([e.id,".prompt-rotate[data-v-1964556f]{margin:0}.card-title h4[data-v-1964556f]{margin-bottom:0}.buttons[data-v-1964556f]{display:flex;justify-content:flex-end;width:100%}",""]);const s=d},29133:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>f});var a=o(20641),i=o(90033);const l={class:"text-default-text"},r={class:"pl-10 pr-10"},d={class:"buttons"};function s(e,t,o,s,n,u){const c=(0,a.g2)("RadioGroup"),p=(0,a.g2)("UnitInput"),b=(0,a.g2)("Banner"),m=(0,a.g2)("AsyncButton"),h=(0,a.g2)("Card");return(0,a.uX)(),(0,a.Wv)(h,{class:"prompt-rotate","show-highlight-border":!1},{title:(0,a.k6)((()=>[(0,a.Lk)("h4",l,[o.kubeNodes.length>1?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)((0,i.toDisplayString)(e.t("drainNode.titleMultiple",{count:o.kubeNodes.length})),1)],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)((0,i.toDisplayString)(e.t("drainNode.titleOne",{name:o.kubeNodes[0].name},!0)),1)],64))])])),body:(0,a.k6)((()=>[(0,a.Lk)("div",r,[(0,a.Lk)("div",null,[(0,a.bF)(c,{value:n.body.deleteLocalData,"onUpdate:value":t[0]||(t[0]=e=>n.body.deleteLocalData=e),name:"deleteLocalData",options:n.radioOptions,row:!0,class:"mb-15"},{label:(0,a.k6)((()=>[(0,a.Lk)("h5",null,(0,i.toDisplayString)(e.t("drainNode.deleteLocalData")),1)])),_:1},8,["value","options"]),(0,a.eW)(),(0,a.bF)(c,{value:n.body.force,"onUpdate:value":t[1]||(t[1]=e=>n.body.force=e),name:"force",options:n.radioOptions,row:!0,class:"mb-15"},{label:(0,a.k6)((()=>[(0,a.Lk)("h5",null,(0,i.toDisplayString)(e.t("drainNode.force")),1)])),_:1},8,["value","options"]),(0,a.eW)(),(0,a.bF)(c,{value:n.gracePeriod,"onUpdate:value":t[2]||(t[2]=e=>n.gracePeriod=e),name:"gracePeriod",options:n.gracePeriodOptions,class:"mb-15"},{label:(0,a.k6)((()=>[(0,a.Lk)("h5",null,(0,i.toDisplayString)(e.t("drainNode.gracePeriod.title")),1)])),_:1},8,["value","options"]),(0,a.eW)(),(0,a.bF)(p,{value:n.body.gracePeriod,"onUpdate:value":t[3]||(t[3]=e=>n.body.gracePeriod=e),mode:n.gracePeriod?n.EDIT:n.VIEW,type:"number",min:"1",suffix:e.t("suffix.sec"),placeholder:e.t("drainNode.gracePeriod.placeholder"),class:"mb-10"},null,8,["value","mode","suffix","placeholder"]),(0,a.eW)(),(0,a.bF)(c,{value:n.timeout,"onUpdate:value":t[4]||(t[4]=e=>n.timeout=e),name:"timeout",options:n.timeoutOptions,class:"mb-15"},{label:(0,a.k6)((()=>[(0,a.Lk)("h5",null,(0,i.toDisplayString)(e.t("drainNode.timeout.title")),1)])),_:1},8,["value","options"]),(0,a.eW)(),(0,a.bF)(p,{value:n.body.timeout,"onUpdate:value":t[5]||(t[5]=e=>n.body.timeout=e),mode:n.timeout?n.EDIT:n.VIEW,type:"number",min:"1",max:"10800",suffix:e.t("suffix.sec"),placeholder:e.t("drainNode.timeout.placeholder")},null,8,["value","mode","suffix","placeholder"])]),(0,a.eW)(),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.errors,((e,t)=>((0,a.uX)(),(0,a.Wv)(b,{key:t,color:"error",label:e},null,8,["label"])))),128))])])),actions:(0,a.k6)((()=>[(0,a.Lk)("div",d,[(0,a.Lk)("button",{class:"btn role-secondary mr-10",onClick:t[6]||(t[6]=(...e)=>u.close&&u.close(...e))},(0,i.toDisplayString)(e.t("generic.cancel")),1),(0,a.eW)(),(0,a.bF)(m,{mode:"drain",onClick:u.apply},null,8,["onClick"])])])),_:1})}var n=o(17793),u=o(17899),c=o(99910),p=o(4207),b=o(39682),m=o(77444),h=o(95510);const y={emits:["close"],components:{AsyncButton:n.A,Banner:u.l,Card:c.Z,RadioGroup:p.z,UnitInput:b.A},props:{kubeNodes:{type:Array,default:()=>[]},normanNodeId:{type:String,default:""}},data(){return{radioOptions:[{label:this.t("generic.yes"),value:!0},{label:this.t("generic.no"),value:!1}],gracePeriodOptions:[{label:this.t("drainNode.gracePeriod.default"),value:!1},{label:this.t("drainNode.gracePeriod.custom"),value:!0}],timeoutOptions:[{label:this.t("drainNode.timeout.default"),value:!1},{label:this.t("drainNode.timeout.custom"),value:!0}],gracePeriod:!1,timeout:!1,body:{deleteLocalData:!1,force:!1,gracePeriod:null,timeout:null},EDIT:m.G5,VIEW:m.nW,errors:[]}},watch:{gracePeriod(e){e&&!this.body.gracePeriod&&(this.body.gracePeriod=30)},"body.gracePeriod"(e){e&&e<1&&(this.body["gracePeriod"]=1)},timeout(e){e&&!this.body.timeout&&(this.body.timeout=60)},"body.timeout"(e){e&&(e<1?this.body["timeout"]=1:e>10800&&(this.body["timeout"]=10800))}},methods:{close(){this.$emit("close")},async apply(e){const{gracePeriod:t,timeout:o,...a}=this.body;this.gracePeriod&&(a.gracePeriod=t),this.timeout&&(a.timeout=o);try{await Promise.all(this.kubeNodes.map((e=>e.norman?.doAction("drain",a)))),this.close()}catch(i){this.errors=(0,h.rz)(i),e(!1)}}}};o(18287);var g=o(66262);const v=(0,g.A)(y,[["render",s],["__scopeId","data-v-1964556f"]]),f=v},18287:(e,t,o)=>{var a=o(52489);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var i=o(99548).A;i("73fbabdd",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=dialog12.e9c58947.js.map