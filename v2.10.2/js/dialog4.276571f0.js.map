{"version":3,"file":"js/dialog4.276571f0.js","mappings":"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","sources":["webpack://dashboard/./shell/dialog/AddProjectMemberDialog.vue?e881","webpack://dashboard/./shell/dialog/AddProjectMemberDialog.vue?5ae3","webpack://dashboard/./shell/dialog/AddProjectMemberDialog.vue","webpack://dashboard/./shell/dialog/AddProjectMemberDialog.vue?1c44","webpack://dashboard/./shell/dialog/AddProjectMemberDialog.vue?7a05","webpack://dashboard/./shell/dialog/AddProjectMemberDialog.vue?ee69"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.prompt-rotate[data-v-42e1c96a]{margin:0}.buttons[data-v-42e1c96a]{display:flex;justify-content:flex-end;width:100%}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.card-container{border:1px solid var(--border);box-shadow:none}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","<script>\r\nimport { Card } from '@components/Card';\r\nimport ProjectMemberEditor from '@shell/components/form/ProjectMemberEditor';\r\nimport AsyncButton from '@shell/components/AsyncButton';\r\nimport Banner from '@components/Banner/Banner.vue';\r\nimport { NORMAN } from '@shell/config/types';\r\n\r\nexport default {\r\n  emits: ['close'],\r\n\r\n  components: {\r\n    Card,\r\n    ProjectMemberEditor,\r\n    AsyncButton,\r\n    Banner\r\n  },\r\n\r\n  props: {\r\n    resources: {\r\n      type:     Array,\r\n      required: true\r\n    },\r\n\r\n    onAdd: {\r\n      type:    Function,\r\n      default: () => {}\r\n    },\r\n\r\n    projectId: {\r\n      type:    String,\r\n      default: null\r\n    },\r\n\r\n    saveInModal: {\r\n      type:    Boolean,\r\n      default: false\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      member: {\r\n        permissionGroup: 'member',\r\n        custom:          {},\r\n        principalId:     '',\r\n        roleTemplateIds: []\r\n      },\r\n      error: null\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    principal() {\r\n      const principalId = this.member.principalId.replace(/\\//g, '%2F');\r\n\r\n      return this.$store.dispatch('rancher/find', {\r\n        type: NORMAN.PRINCIPAL,\r\n        id:   this.member.principalId,\r\n        opt:  { url: `/v3/principals/${ principalId }` }\r\n      }, { root: true });\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    async principalProperty() {\r\n      const principal = await this.principal;\r\n\r\n      return principal?.principalType === 'group' ? 'groupPrincipalId' : 'userPrincipalId';\r\n    },\r\n\r\n    close() {\r\n      this.$emit('close');\r\n    },\r\n\r\n    async apply() {\r\n      this.onAdd(await this.createBindings());\r\n      this.close();\r\n    },\r\n\r\n    async createBindings() {\r\n      const principalProperty = await this.principalProperty();\r\n      const promises = this.member.roleTemplateIds.map((roleTemplateId) => this.$store.dispatch(`rancher/create`, {\r\n        type:                NORMAN.PROJECT_ROLE_TEMPLATE_BINDING,\r\n        roleTemplateId,\r\n        [principalProperty]: this.member.principalId,\r\n        projectId:           this.projectId,\r\n      }));\r\n\r\n      return Promise.all(promises);\r\n    },\r\n\r\n    saveBindings(btnCB) {\r\n      this.error = null;\r\n      this.createBindings()\r\n        .then((bindings) => {\r\n          return Promise.all(bindings.map((b) => b.save()));\r\n        })\r\n        .then(() => {\r\n          btnCB(true);\r\n          setTimeout(this.close, 500);\r\n        })\r\n        .catch((err) => {\r\n          this.error = err;\r\n          btnCB(false);\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Card\r\n    class=\"prompt-rotate\"\r\n    :show-highlight-border=\"false\"\r\n    :sticky=\"true\"\r\n  >\r\n    <template #title>\r\n      <h4\r\n        v-clean-html=\"t('addProjectMemberDialog.title')\"\r\n        class=\"text-default-text\"\r\n      />\r\n    </template>\r\n\r\n    <template #body>\r\n      <div class=\"pl-10 pr-10\">\r\n        <Banner\r\n          v-if=\"error\"\r\n          color=\"error\"\r\n        >\r\n          {{ error }}\r\n        </Banner>\r\n        <ProjectMemberEditor\r\n          v-model:value=\"member\"\r\n          :use-two-columns-for-custom=\"true\"\r\n        />\r\n      </div>\r\n    </template>\r\n\r\n    <template #actions>\r\n      <div class=\"buttons\">\r\n        <button\r\n          class=\"btn role-secondary mr-10\"\r\n          @click=\"close\"\r\n        >\r\n          {{ t('generic.cancel') }}\r\n        </button>\r\n\r\n        <AsyncButton\r\n          v-if=\"saveInModal\"\r\n          mode=\"create\"\r\n          @click=\"cb=>saveBindings(cb)\"\r\n        />\r\n\r\n        <button\r\n          v-else\r\n          class=\"btn role-primary\"\r\n          @click=\"apply\"\r\n        >\r\n          {{ t('generic.add') }}\r\n        </button>\r\n      </div>\r\n    </template>\r\n  </Card>\r\n</template>\r\n<style lang='scss' scoped>\r\n  .prompt-rotate {\r\n    margin: 0;\r\n  }\r\n  .buttons {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    width: 100%;\r\n  }\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n  .card-container {\r\n    border: 1px solid var(--border);\r\n    box-shadow: none;\r\n  }\r\n</style>\r\n","import { render } from \"./AddProjectMemberDialog.vue?vue&type=template&id=42e1c96a&scoped=true\"\nimport script from \"./AddProjectMemberDialog.vue?vue&type=script&lang=js\"\nexport * from \"./AddProjectMemberDialog.vue?vue&type=script&lang=js\"\n\nimport \"./AddProjectMemberDialog.vue?vue&type=style&index=0&id=42e1c96a&lang=scss&scoped=true\"\nimport \"./AddProjectMemberDialog.vue?vue&type=style&index=1&id=42e1c96a&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-42e1c96a\"]])\n\nexport default __exports__","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./AddProjectMemberDialog.vue?vue&type=style&index=0&id=42e1c96a&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"9039d31c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./AddProjectMemberDialog.vue?vue&type=style&index=1&id=42e1c96a&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"87262d44\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["___CSS_LOADER_EXPORT___","push","module","id","class","sticky","title","t","body","color","error","value","member","actions","close","mode","cb","saveBindings","apply","emits","components","Card","ProjectMemberEditor","AsyncButton","Banner","props","resources","type","Array","required","onAdd","Function","default","projectId","String","saveInModal","Boolean","data","permissionGroup","custom","principalId","roleTemplateIds","computed","principal","this","replace","$store","dispatch","PRINCIPAL","opt","url","root","methods","principalProperty","principalType","$emit","createBindings","promises","map","roleTemplateId","PROJECT_ROLE_TEMPLATE_BINDING","Promise","all","btnCB","then","bindings","b","save","setTimeout","catch","err","__exports__","render","content","__esModule","locals","exports","add"],"sourceRoot":""}