{"version":3,"sources":["webpack:///./shell/pages/c/_cluster/_product/members/index.vue?b318","webpack:///shell/components/ExplorerMembers.vue","webpack:///./shell/components/ExplorerMembers.vue?fc30","webpack:///./shell/pages/c/_cluster/_product/members/index.vue?bafc","webpack:///shell/pages/c/_cluster/_product/members/index.vue","webpack:///./shell/components/ExplorerMembers.vue","webpack:///./shell/components/ExplorerMembers.vue?5281","webpack:///./shell/pages/c/_cluster/_product/members/index.vue"],"names":["name","components","Banner","Loading","Masthead","ResourceTable","props","createLocationOverride","type","default","params","data","schema","this","$store","getters","headers","createLocation","cluster","id","resource","clusterRoleTemplateBindings","VIRTUAL_TYPES","computed","filteredClusterRoleTemplateBindings","filter","canManageMembers","isLocal","_vm","_h","$createElement","_c","_self","$fetchState","pending","currentCluster","attrs","CLUSTER_MEMBERS","t","_v","_e","_b","$attrs"],"mappings":"qJAAA,I,yvBCcA,ICdsT,EDctT,CACEA,KAAM,kBAENC,WAAY,CACVC,OAAJ,IACIC,QAAJ,IACIC,SAAJ,IACIC,cAAJ,KAGEC,MAAO,CAELC,uBAAwB,CACtBC,KAAM,OACNC,QAAS,WACP,MAAO,CACLT,KAAM,oCACNU,OAAQ,CAAlB,gDAME,MAvBF,WAuBA,2KACA,wCAEA,mCAEA,GACA,sCAEA,yCACA,WACA,GACA,sFACA,0DACA,wDACA,kEAdA,SAgBA,eAhBA,0CAgBA,EAhBA,cAiBA,YACA,sCAlBA,OAiBA,EAjBA,OAqBA,0CArBA,+CAwBEC,KA/CF,WAgDI,MAAO,CACLC,OAAQC,KAAKC,OAAOC,QAAQ,wBAClC,mCAEMC,QAAS,CAAf,oBACMC,eAAgB,EAAtB,KACA,6BADA,IAEQP,OAAQ,EAAhB,KACA,oCADA,IAEUQ,QAASL,KAAKC,OAAOC,QAAwB,eAAEI,OAGnDC,SAAU,EAAhB,gCACMC,4BAA6B,GAC7BC,cAAN,MAIEC,SAAU,EAAZ,KACA,iCADA,IAEIC,oCAFJ,WAEA,WACM,OAAOX,KAAKQ,4BAA4BI,QAC9C,YAAQ,OAAR,uDAGIC,iBAPJ,WAQM,OAAO,OAAb,IAAa,CAAb,cAEIC,QAVJ,WAWM,OAAOd,KAAKC,OAAOC,QAAwB,eAAEY,Y,OE3FyS,ECE5V,6BCKgB,YACd,GCRW,WAAa,IAAIC,EAAIf,KAASgB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAQD,EAAIK,YAAYC,UAAYN,EAAIO,eAAgBJ,EAAG,WAAWA,EAAG,MAAM,CAACA,EAAG,WAAW,CAACK,MAAM,CAAC,OAASR,EAAIhB,OAAO,SAAWgB,EAAIR,SAAS,oBAAoBQ,EAAIN,cAAce,gBAAgB,kBAAkBT,EAAIX,eAAe,sBAAsBW,EAAIU,EAAE,gCAAgCV,EAAIW,GAAG,KAAMX,EAAW,QAAEG,EAAG,SAAS,CAACK,MAAM,CAAC,MAAQ,QAAQ,MAAQR,EAAIU,EAAE,kCAAkCV,EAAIY,KAAKZ,EAAIW,GAAG,KAAKR,EAAG,gBAAgB,CAACK,MAAM,CAAC,OAASR,EAAIhB,OAAO,QAAUgB,EAAIZ,QAAQ,KAAOY,EAAIJ,oCAAoC,WAAY,EAAM,YAAa,EAAM,aAAa,YAAY,aAAa,CAAC,mBAAmB,KAClsB,IDUpB,EACA,KACA,KACA,M,UEPE,EAAY,YACd,GPRW,WAAa,IAAII,EAAIf,KAASgB,EAAGD,EAAIE,eAAuC,OAAjBF,EAAII,MAAMD,IAAIF,GAAa,kBAAkBD,EAAIa,GAAG,GAAG,kBAAkBb,EAAIc,QAAO,MACtI,IOUpB,EACA,KACA,KACA,MAIa,Y","file":"47be7c7d9dd3c01a67e7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ExplorerMembers',_vm._b({},'ExplorerMembers',_vm.$attrs,false))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { MANAGEMENT, NORMAN, VIRTUAL_TYPES } from '@shell/config/types';\nimport ResourceTable from '@shell/components/ResourceTable';\nimport Loading from '@shell/components/Loading';\nimport Masthead from '@shell/components/ResourceList/Masthead';\nimport { AGE, ROLE, STATE, PRINCIPAL } from '@shell/config/table-headers';\nimport { canViewClusterPermissionsEditor } from '@shell/components/form/Members/ClusterPermissionsEditor.vue';\nimport Banner from '@components/Banner/Banner.vue';\nimport { mapGetters } from 'vuex';\n\n/**\n * Explorer members page.\n * Route: /c/local/explorer/members\n */\nexport default {\n  name: 'ExplorerMembers',\n\n  components: {\n    Banner,\n    Loading,\n    Masthead,\n    ResourceTable\n  },\n\n  props: {\n    // Cluster tole template binding create route - defaults to the explorer route\n    createLocationOverride: {\n      type:    Object,\n      default: () => {\n        return {\n          name:   'c-cluster-product-resource-create',\n          params: { resource: MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING }\n        };\n      }\n    }\n  },\n\n  async fetch() {\n    const clusterRoleTemplateBindingSchema = this.$store.getters[\n      `rancher/schemaFor`\n    ](NORMAN.CLUSTER_ROLE_TEMPLATE_BINDING);\n\n    const hydration = [\n      clusterRoleTemplateBindingSchema ? this.$store.dispatch(\n        `rancher/findAll`,\n        { type: NORMAN.CLUSTER_ROLE_TEMPLATE_BINDING },\n        { root: true }\n      ) : [],\n      clusterRoleTemplateBindingSchema ? this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING }) : [],\n      this.$store.dispatch('rancher/findAll', { type: NORMAN.PRINCIPAL }),\n      this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.USER }),\n      this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.ROLE_TEMPLATE })\n    ];\n    const [clusterRoleTemplateBindings] = await Promise.all(hydration);\n    const steveBindings = await Promise.all(\n      clusterRoleTemplateBindings.map(b => b.steve)\n    );\n\n    this.$set(this, 'clusterRoleTemplateBindings', steveBindings);\n  },\n\n  data() {\n    return {\n      schema: this.$store.getters[`management/schemaFor`](\n        MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING\n      ),\n      headers:        [STATE, PRINCIPAL, ROLE, AGE],\n      createLocation: {\n        ...this.createLocationOverride,\n        params: {\n          ...this.createLocationOverride.params,\n          cluster: this.$store.getters['currentCluster'].id\n        }\n      },\n      resource:                    MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING,\n      clusterRoleTemplateBindings: [],\n      VIRTUAL_TYPES\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    filteredClusterRoleTemplateBindings() {\n      return this.clusterRoleTemplateBindings.filter(\n        b => b.clusterName === this.$store.getters['currentCluster'].id\n      );\n    },\n    canManageMembers() {\n      return canViewClusterPermissionsEditor(this.$store);\n    },\n    isLocal() {\n      return this.$store.getters['currentCluster'].isLocal;\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending || !currentCluster\" />\n  <div v-else>\n    <Masthead\n      :schema=\"schema\"\n      :resource=\"resource\"\n      :favorite-resource=\"VIRTUAL_TYPES.CLUSTER_MEMBERS\"\n      :create-location=\"createLocation\"\n      :create-button-label=\"t('members.createActionLabel')\"\n    />\n    <Banner\n      v-if=\"isLocal\"\n      color=\"error\"\n      :label=\"t('members.localClusterWarning')\"\n    />\n    <ResourceTable\n      :schema=\"schema\"\n      :headers=\"headers\"\n      :rows=\"filteredClusterRoleTemplateBindings\"\n      :groupable=\"false\"\n      :namespaced=\"false\"\n      sub-search=\"subSearch\"\n      :sub-fields=\"['nameDisplay']\"\n    />\n  </div>\n</template>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--6-0!../../node_modules/thread-loader/dist/cjs.js??ref--6-1!../../node_modules/babel-loader/lib/index.js??ref--6-2!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplorerMembers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--6-0!../../node_modules/thread-loader/dist/cjs.js??ref--6-1!../../node_modules/babel-loader/lib/index.js??ref--6-2!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplorerMembers.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--6-0!../../../../../../node_modules/thread-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/babel-loader/lib/index.js??ref--6-2!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--6-0!../../../../../../node_modules/thread-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/babel-loader/lib/index.js??ref--6-2!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<script>\nimport ExplorerMembers from '@shell/components/ExplorerMembers';\nexport default { components: { ExplorerMembers } };\n</script>\n\n<template><ExplorerMembers v-bind=\"$attrs\" /></template>\n","import { render, staticRenderFns } from \"./ExplorerMembers.vue?vue&type=template&id=2704c38c&\"\nimport script from \"./ExplorerMembers.vue?vue&type=script&lang=js&\"\nexport * from \"./ExplorerMembers.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$fetchState.pending || !_vm.currentCluster)?_c('Loading'):_c('div',[_c('Masthead',{attrs:{\"schema\":_vm.schema,\"resource\":_vm.resource,\"favorite-resource\":_vm.VIRTUAL_TYPES.CLUSTER_MEMBERS,\"create-location\":_vm.createLocation,\"create-button-label\":_vm.t('members.createActionLabel')}}),_vm._v(\" \"),(_vm.isLocal)?_c('Banner',{attrs:{\"color\":\"error\",\"label\":_vm.t('members.localClusterWarning')}}):_vm._e(),_vm._v(\" \"),_c('ResourceTable',{attrs:{\"schema\":_vm.schema,\"headers\":_vm.headers,\"rows\":_vm.filteredClusterRoleTemplateBindings,\"groupable\":false,\"namespaced\":false,\"sub-search\":\"subSearch\",\"sub-fields\":['nameDisplay']}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=beb7f82a&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}