(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{2908:function(e,t,r){"use strict";r.r(t);r(18),r(19),r(35),r(17),r(36);var n=r(22),c=r(7),o=r(6),l=(r(2),r(3),r(4),r(5),r(26),r(10),r(912),r(50),r(913),r(914),r(915),r(916),r(917),r(918),r(919),r(920),r(921),r(922),r(923),r(924),r(925),r(926),r(927),r(928),r(45),r(163),r(16),r(48),r(15),r(135),r(55)),h=r(69),L=r(0),d=r(72),f=r(37),E=r(130),m=r(265),T=r(183);function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var R=E.SUBTYPE_MAPPING.GLOBAL.key,y=E.SUBTYPE_MAPPING.CLUSTER.key,A=E.SUBTYPE_MAPPING.NAMESPACE.key,C={name:"c-cluster-".concat(m.NAME,"-roles-resource-create"),params:{cluster:T.BLANK_CLUSTER,resource:L.v.GLOBAL_ROLE}},v={name:"c-cluster-".concat(m.NAME,"-roles-resource-create"),params:{cluster:T.BLANK_CLUSTER,resource:L.v.ROLE_TEMPLATE}},_=new Set(["PUT","blocked-PUT"]),w={name:"Roles",components:{Tab:l.a,Tabbed:h.a,ResourceTable:d.a,Loading:f.a},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.store,n=r.getters["management/schemaFor"](L.v.GLOBAL_ROLE),c=r.getters["management/schemaFor"](L.v.ROLE_TEMPLATE),!n){t.next=9;break}return t.next=6,r.dispatch("management/findAll",{type:L.v.GLOBAL_ROLE});case 6:t.t0=t.sent,t.next=10;break;case 9:t.t0=[];case 10:if(t.t1=t.t0,!c){t.next=17;break}return t.next=14,r.dispatch("management/findAll",{type:L.v.ROLE_TEMPLATE});case 14:t.t2=t.sent,t.next=18;break;case 17:t.t2=[];case 18:return t.t3=t.t2,t.abrupt("return",{globalRoles:t.t1,roleTemplates:t.t3});case 20:case"end":return t.stop()}}),t)})))()},data:function(){var e,t=this.$store.getters["management/schemaFor"](L.v.GLOBAL_ROLE),r=this.$store.getters["management/schemaFor"](L.v.ROLE_TEMPLATE),n=this.$store.getters["type-map/headersFor"](r),o=n.findIndex((function(header){return"default"===header.name}));return{tabs:(e={},Object(c.a)(e,R,{canFetch:null==t?void 0:t.collectionMethods.find((function(e){return"GET"===e})),canCreate:null==t?void 0:t.resourceMethods.find((function(e){return _.has(e)})),weight:3,labelKey:E.SUBTYPE_MAPPING.GLOBAL.labelKey,schema:t,createLocation:P(P({},C),{},{query:{roleContext:R}})}),Object(c.a)(e,y,{canFetch:null==r?void 0:r.collectionMethods.find((function(e){return"GET"===e})),canCreate:null==r?void 0:r.resourceMethods.find((function(e){return _.has(e)})),labelKey:E.SUBTYPE_MAPPING.CLUSTER.labelKey,weight:2,schema:r,headers:this.applyDefaultHeaderLabel(n,o,"tableHeaders.authRoles.clusterDefault"),createLocation:P(P({},v),{},{query:{roleContext:y}})}),Object(c.a)(e,A,{canFetch:null==r?void 0:r.collectionMethods.find((function(e){return"GET"===e})),canCreate:null==r?void 0:r.resourceMethods.find((function(e){return _.has(e)})),labelKey:E.SUBTYPE_MAPPING.NAMESPACE.labelKey,weight:1,schema:r,headers:this.applyDefaultHeaderLabel(n,o,"tableHeaders.authRoles.projectDefault"),createLocation:P(P({},v),{},{query:{roleContext:A}})}),e),GLOBAL:R,CLUSTER:y,PROJECT:A,globalRoles:null,roleTemplates:null}},computed:{globalResources:function(){return this.globalRoles},clusterResources:function(){return this.roleTemplates.filter((function(e){return e.context===E.SUBTYPE_MAPPING.CLUSTER.context}))},namespaceResources:function(){return this.roleTemplates.filter((function(e){return e.context===E.SUBTYPE_MAPPING.NAMESPACE.context}))},type:function(){return this.$route.hash.endsWith(A)?A:this.$route.hash.endsWith(y)?y:R},canCreate:function(){return this.tabs[this.type].canCreate},createLabel:function(){return this.t("rbac.roletemplate.subtypes.".concat(this.type,".createButton"))},createLocation:function(){return this.tabs[this.type].createLocation}},methods:{applyDefaultHeaderLabel:function(e,t,r){var c=Object(n.a)(e);return c[t]=P(P({},e[t]),{},{labelKey:r}),c}}},S=r(1),component=Object(S.a)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.globalRoles&&e.roleTemplates?r("div",[r("header",[r("div",{staticClass:"title"},[r("h1",{staticClass:"m-0"},[e._v("\n        "+e._s(e.t("rbac.roletemplate.label"))+"\n      ")])]),e._v(" "),r("div",{staticClass:"actions-container"},[r("div",{staticClass:"actions"},[e.canCreate?r("n-link",{staticClass:"btn role-primary",attrs:{to:e.createLocation}},[e._v("\n          "+e._s(e.createLabel)+"\n        ")]):e._e()],1)])]),e._v(" "),r("Tabbed",[e.tabs[e.GLOBAL].canFetch?r("Tab",{attrs:{name:e.GLOBAL,weight:e.tabs[e.GLOBAL].weight,"label-key":e.tabs[e.GLOBAL].labelKey}},[r("ResourceTable",{attrs:{schema:e.tabs[e.GLOBAL].schema,rows:e.globalResources}})],1):e._e(),e._v(" "),e.tabs[e.CLUSTER].canFetch?r("Tab",{attrs:{name:e.CLUSTER,weight:e.tabs[e.CLUSTER].weight,"label-key":e.tabs[e.CLUSTER].labelKey}},[r("ResourceTable",{attrs:{schema:e.tabs[e.CLUSTER].schema,headers:e.tabs[e.CLUSTER].headers,rows:e.clusterResources}})],1):e._e(),e._v(" "),e.tabs[e.PROJECT].canFetch?r("Tab",{attrs:{name:e.PROJECT,weight:e.tabs[e.PROJECT].weight,"label-key":e.tabs[e.PROJECT].labelKey}},[r("ResourceTable",{attrs:{schema:e.tabs[e.PROJECT].schema,headers:e.tabs[e.PROJECT].headers,rows:e.namespaceResources}})],1):e._e()],1)],1):r("Loading")}),[],!1,null,null,null);t.default=component.exports}}]);
//# sourceMappingURL=814fc423cdf21dda028f.js.map