{"version":3,"sources":["webpack:///./shell/pages/c/_cluster/_product/members/index.vue?b789","webpack:///./shell/pages/c/_cluster/_product/members/index.vue?bafc","webpack:///shell/pages/c/_cluster/_product/members/index.vue","webpack:///./shell/pages/c/_cluster/_product/members/index.vue"],"names":["name","components","Banner","data","schema","headers","createLocation","params","product","resource","clusterRoleTemplateBindings","VIRTUAL_TYPES","computed","filteredClusterRoleTemplateBindings","this","canManageMembers","isLocal","$store","getters","component","_vm","_h","$createElement","_c","_self","$fetchState","attrs","CLUSTER_MEMBERS","t","_v","_e"],"mappings":"mGAAA,I,iICA4V,ECa5V,CAEEA,KAAM,kBAENC,WAAY,CACVC,O,OAAJ,EAAI,QAAJ,IAAI,SAAJ,IAAI,cAAJ,KAGE,MARF,WAQA,2KACA,2EAEA,GACA,6FACA,sFACA,0DACA,wDACA,kEARA,SAUA,eAVA,0CAUA,EAVA,cAWA,kDAXA,OAWA,EAXA,OAaA,0CAbA,+CAgBEC,KAxBF,WAyBI,MAAO,CACLC,OAAQ,KAAd,0EACMC,QAAS,CACf,KACA,KACA,KACA,KAEMC,eAAgB,CACdN,KAAM,oCACNO,OAAQ,CACNC,QAAS,KAAnB,mCACUC,SAAU,EAApB,kCAGMA,SAAU,EAAhB,gCACMC,4BAA6B,GAC7BC,cAAN,MAIEC,SAAU,CACRC,oCADJ,WACA,WACM,OAAOC,KAAKJ,4BAClB,oBAAQ,OAAR,uDAEIK,iBALJ,WAMM,OAAO,OAAb,IAAa,CAAb,cAEIC,QARJ,WASM,OAAOF,KAAKG,OAAOC,QAAwB,eAAEF,W,OC7D/CG,UAAY,YACd,GHRW,WAAa,IAAIC,EAAIN,KAASO,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAQD,EAAIK,YAAmB,QAAEF,EAAG,WAAWA,EAAG,MAAM,CAACA,EAAG,WAAW,CAACG,MAAM,CAAC,OAASN,EAAIhB,OAAO,SAAWgB,EAAIX,SAAS,oBAAoBW,EAAIT,cAAcgB,gBAAgB,kBAAkBP,EAAId,eAAe,sBAAsBc,EAAIQ,EAAE,gCAAgCR,EAAIS,GAAG,KAAMT,EAAW,QAAEG,EAAG,SAAS,CAACG,MAAM,CAAC,MAAQ,QAAQ,MAAQN,EAAIQ,EAAE,kCAAkCR,EAAIU,KAAKV,EAAIS,GAAG,KAAKN,EAAG,gBAAgB,CAACG,MAAM,CAAC,OAASN,EAAIhB,OAAO,QAAUgB,EAAIf,QAAQ,KAAOe,EAAIP,oCAAoC,WAAY,EAAM,YAAa,EAAM,aAAa,YAAY,aAAa,CAAC,mBAAmB,KAC3qB,IGUpB,EACA,KACA,KACA,MAIa,UAAAM,U","file":"383b403fe8c6267aea6e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$fetchState.pending)?_c('Loading'):_c('div',[_c('Masthead',{attrs:{\"schema\":_vm.schema,\"resource\":_vm.resource,\"favorite-resource\":_vm.VIRTUAL_TYPES.CLUSTER_MEMBERS,\"create-location\":_vm.createLocation,\"create-button-label\":_vm.t('members.createActionLabel')}}),_vm._v(\" \"),(_vm.isLocal)?_c('Banner',{attrs:{\"color\":\"error\",\"label\":_vm.t('members.localClusterWarning')}}):_vm._e(),_vm._v(\" \"),_c('ResourceTable',{attrs:{\"schema\":_vm.schema,\"headers\":_vm.headers,\"rows\":_vm.filteredClusterRoleTemplateBindings,\"groupable\":false,\"namespaced\":false,\"sub-search\":\"subSearch\",\"sub-fields\":['nameDisplay']}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--6-0!../../../../../../node_modules/thread-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/babel-loader/lib/index.js??ref--6-2!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--6-0!../../../../../../node_modules/thread-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/babel-loader/lib/index.js??ref--6-2!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<script>\nimport { MANAGEMENT, NORMAN, VIRTUAL_TYPES } from '@shell/config/types';\nimport ResourceTable from '@shell/components/ResourceTable';\nimport Loading from '@shell/components/Loading';\nimport Masthead from '@shell/components/ResourceList/Masthead';\nimport { AGE, ROLE, STATE, PRINCIPAL } from '@shell/config/table-headers';\nimport { canViewClusterPermissionsEditor } from '@shell/components/form/Members/ClusterPermissionsEditor.vue';\nimport Banner from '@components/Banner/Banner.vue';\n\n/**\n * Explorer members page.\n * Route: /c/local/explorer/members\n */\nexport default {\n\n  name: 'ExplorerMembers',\n\n  components: {\n    Banner, Loading, Masthead, ResourceTable\n  },\n\n  async fetch() {\n    const clusterRoleTemplateBindingSchema = this.$store.getters[`rancher/schemaFor`](NORMAN.CLUSTER_ROLE_TEMPLATE_BINDING);\n\n    const hydration = [\n      clusterRoleTemplateBindingSchema ? this.$store.dispatch(`rancher/findAll`, { type: NORMAN.CLUSTER_ROLE_TEMPLATE_BINDING }, { root: true }) : [],\n      clusterRoleTemplateBindingSchema ? this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING }) : [],\n      this.$store.dispatch('rancher/findAll', { type: NORMAN.PRINCIPAL }),\n      this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.USER }),\n      this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.ROLE_TEMPLATE }),\n    ];\n    const [clusterRoleTemplateBindings] = await Promise.all(hydration);\n    const steveBindings = await Promise.all(clusterRoleTemplateBindings.map(b => b.steve));\n\n    this.$set(this, 'clusterRoleTemplateBindings', steveBindings);\n  },\n\n  data() {\n    return {\n      schema:         this.$store.getters[`management/schemaFor`](MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING),\n      headers:        [\n        STATE,\n        PRINCIPAL,\n        ROLE,\n        AGE\n      ],\n      createLocation: {\n        name:   'c-cluster-product-resource-create',\n        params: {\n          product:  this.$store.getters['currentProduct'].name,\n          resource: MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING,\n        }\n      },\n      resource:                    MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING,\n      clusterRoleTemplateBindings: [],\n      VIRTUAL_TYPES\n    };\n  },\n\n  computed: {\n    filteredClusterRoleTemplateBindings() {\n      return this.clusterRoleTemplateBindings\n        .filter(b => b.clusterName === this.$store.getters['currentCluster'].id);\n    },\n    canManageMembers() {\n      return canViewClusterPermissionsEditor(this.$store);\n    },\n    isLocal() {\n      return this.$store.getters['currentCluster'].isLocal;\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Masthead\n      :schema=\"schema\"\n      :resource=\"resource\"\n      :favorite-resource=\"VIRTUAL_TYPES.CLUSTER_MEMBERS\"\n      :create-location=\"createLocation\"\n      :create-button-label=\"t('members.createActionLabel')\"\n    />\n    <Banner v-if=\"isLocal\" color=\"error\" :label=\"t('members.localClusterWarning')\" />\n    <ResourceTable\n      :schema=\"schema\"\n      :headers=\"headers\"\n      :rows=\"filteredClusterRoleTemplateBindings\"\n      :groupable=\"false\"\n      :namespaced=\"false\"\n      sub-search=\"subSearch\"\n      :sub-fields=\"['nameDisplay']\"\n    />\n  </div>\n</template>\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=41c72212&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}