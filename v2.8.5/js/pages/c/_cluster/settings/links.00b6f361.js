(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/settings/links","pages/c/_cluster/settings/DefaultLinksEditor"],{"23ac":function(e,t,a){var n=a("cbc7");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var s=a("499e").default;s("1404ad08",n,!0,{sourceMap:!1,shadowMode:!1})},"4f969":function(e,t,a){"use strict";a.d(t,"a",(function(){return y})),a.d(t,"b",(function(){return g}));a("b64b"),a("a4d3"),a("4de4"),a("e439"),a("dbb4");var n=a("ade3"),s=a("1da1"),r=a("a34a"),i=a.n(r),u=(a("96cf"),a("7db0"),a("d3b7"),a("d81d"),a("159b"),a("2ca0"),a("caad"),a("2532"),a("99af"),a("58ec")),l=a("a788"),c=a("c5b9"),o=a("fa98"),d=a("ac98");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f=[{key:"docs",value:u["a"],enabled:!0},{key:"forums",value:"https://forums.rancher.com/",enabled:!0},{key:"slack",value:"https://slack.rancher.io/",enabled:!0},{key:"issues",value:"https://github.com/rancher/dashboard/issues/new/choose",enabled:!0},{key:"getStarted",value:"https://ranchermanager.docs.rancher.com/getting-started/overview",enabled:!0}],p={key:"suseCollective",value:"https://susecollective.suse.com/join/prime",enabled:!0},h={key:"commercialSupport",value:"/support",enabled:!0,readonly:!0},m={key:"cnforums",value:"https://forums.rancher.cn/",enabled:!0},k="v1",y="v1.1";function g(e,t,a,n){return O.apply(this,arguments)}function O(){return O=Object(s["a"])(i.a.mark((function e(t,a,n,s){var r,u,v,b,h,m,g,O,x,_,j,S;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return v={},e.prev=1,e.next=4,t.dispatch("management/find",{type:l["B"].SETTING,id:c["c"].UI_CUSTOM_LINKS});case 4:b=e.sent,b.value&&(v=JSON.parse(b.value)),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.warn("Could not parse custom link settings",e.t0);case 11:if(null===(r=v)||void 0===r||null===(u=r.version)||void 0===u||!u.startsWith(k)){e.next=15;break}return(null===(h=v)||void 0===h?void 0:h.version)===k&&(v.version=y,v.defaults.includes(p.key)||v.defaults.push(p.key)),v.defaults&&(m=[].concat(f),Object(d["b"])()&&m.push(p),m.forEach((function(e){var t=v.defaults.find((function(t){return t===e.key}));e.enabled=!!t})),v.defaults=m),e.abrupt("return",w(v,a,n,s,t));case 15:return g={version:k,defaults:[].concat(f),custom:[]},Object(d["b"])()&&g.defaults.push(p),e.prev=17,e.next=20,Object(o["a"])({uiIssuesSetting:t.dispatch("management/find",{type:l["B"].SETTING,id:c["c"].ISSUES}),uiCommunitySetting:t.dispatch("management/find",{type:l["B"].SETTING,id:c["c"].COMMUNITY_LINKS})});case 20:O=e.sent,x=O.uiIssuesSetting,_=O.uiCommunitySetting,"false"===(null===_||void 0===_?void 0:_.value)&&g.defaults.forEach((function(e){return e.enabled=!1})),null!==x&&void 0!==x&&x.value&&(g.custom.push({label:s?s("customLinks.defaults.issues"):"Issues",value:x.value}),S=null===(j=g.defaults)||void 0===j?void 0:j.find((function(e){return"issues"===e.key})),S&&(S.enabled=!1,S.readOnly=!0)),e.next=30;break;case 27:e.prev=27,e.t1=e["catch"](17),console.warn("Could not parse legacy link settings",e.t1);case 30:return e.abrupt("return",w(g,a,n,s,t));case 31:case"end":return e.stop()}}),e,null,[[1,8],[17,27]])}))),O.apply(this,arguments)}function w(e,t,a,n,s){if(!t&&!a){var r,i=null===(r=e.defaults)||void 0===r?void 0:r.find((function(e){return"commercialSupport"===e.key}));i||e.defaults.push(h)}var u=s.getters["i18n/selectedLocaleLabel"];u===n("locale.zh-hans")&&e.defaults.push(m),e.defaults=e.defaults.map((function(e){return b(b({},e),{},{label:n("'customLinks.defaults.".concat(e.key))})}));var l=e.custom.reduce((function(e,t){return e[t.label]=t,e}),{});return e.defaults.forEach((function(e){l[e.label]&&(e.enabled=!1,e.readonly=!0)})),e}},5668:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"key-value"},[t("div",{staticClass:"clearfix"},[t("h3",[e._v("\n      "+e._s(e.t("customLinks.settings.default"))+"\n    ")])]),e._v(" "),t("div",{staticClass:"kv-container"},[t("label",{staticClass:"text-label"},[e._v("\n      "+e._s(e.t("customLinks.settings.keyLabel"))+"\n    ")]),e._v(" "),t("label",{staticClass:"text-label"},[e._v("\n      "+e._s(e.t("customLinks.settings.valueLabel"))+"\n    ")]),e._v(" "),t("label",{staticClass:"text-label"}),e._v(" "),e._l(e.value,(function(a,n){return[t("div",{key:n+"key",staticClass:"kv-item key",class:{"link-hidden":!a.enabled}},[t("span",[e._v(e._s(a.label))])]),e._v(" "),t("div",{key:n+"value",staticClass:"kv-item value",class:{"link-hidden":!a.enabled}},[t("span",[e._v(e._s(a.value))])]),e._v(" "),a.readonly||e.isView?t("div",{key:n+"show"}):t("div",{key:n+"show",staticClass:"link-show-hide-checkbox"},[e.isView?e._e():t("Checkbox",{attrs:{"label-key":"customLinks.settings.showLabel"},on:{input:function(t){return e.showhide(a,n,t)}},model:{value:a.enabled,callback:function(t){e.$set(a,"enabled",t)},expression:"row.enabled"}})],1)]}))],2)])},s=[],r=a("f6b5"),i=a.n(r),u=a("fa3b"),l=a("4de2"),c={name:"DefaultLinksEditor",components:{Checkbox:l["a"]},props:{value:{type:Array,default:function(){return[]}},mode:{type:String,required:!0}},computed:{isView:function(){return this.mode===u["T"]}},methods:{showhide:function(e,t,a){var n=this.value[t];i.a.set(n,"enabled",!!n.enabled),this.$emit("input",this.value)}}},o=c,d=(a("bf94"),a("0c7c")),v=Object(d["a"])(o,n,s,!1,null,"20e61150",null);t["default"]=v.exports},"951d":function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".key-value[data-v-20e61150]{width:100%}.key-value .kv-container[data-v-20e61150]{display:grid;align-items:center;grid-template-columns:1fr 1fr 50px;-moz-column-gap:1.75%;column-gap:1.75%}.key-value .kv-container .kv-item[data-v-20e61150]{background-color:var(--disabled-bg);border:1px solid var(--border);border-radius:5px;width:100%;margin:10px 0 10px 0;height:40px;line-height:40px;padding:0 10px}.key-value .kv-container .kv-item.link-hidden[data-v-20e61150]{color:var(--disabled-text)}.key-value .kv-container .kv-item.key[data-v-20e61150]{align-self:flex-start}",""]),e.exports=t},be0d:function(e,t,a){"use strict";a("23ac")},bf94:function(e,t,a){"use strict";a("db5c")},cbc7:function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".overlay[data-v-37e76483]{width:100%;height:100%;position:absolute;top:0;left:0;background-color:var(--overlay-bg);z-index:1}.ui-links-setting P[data-v-37e76483]{line-height:1.25;margin-bottom:10px}.ui-links-setting .underline[data-v-37e76483]{text-decoration:underline}.action[data-v-37e76483]{display:flex}.action input[data-v-37e76483]{margin-right:5px}",""]),e.exports=t},db5c:function(e,t,a){var n=a("951d");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var s=a("499e").default;s("6f88cca3",n,!0,{sourceMap:!1,shadowMode:!1})},eebf:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[t("h1",{staticClass:"mb-20"},[e._v("\n    "+e._s(e.t("customLinks.label"))+"\n  ")]),e._v(" "),t("div",[t("label",{staticClass:"text-label"},[e._v("\n      "+e._s(e.t("customLinks.description",{},!0))+"\n    ")])]),e._v(" "),t("div",{staticClass:"mt-20"},[t("KeyValue",{attrs:{title:"Custom Links","as-map":!1,"key-name":"label","key-label":e.t("customLinks.settings.keyLabel"),"value-label":e.t("customLinks.settings.valueLabel"),"add-label":e.t("customLinks.addLink"),"read-allowed":!1,protip:!1,mode:e.mode},model:{value:e.value.custom,callback:function(t){e.$set(e.value,"custom",t)},expression:"value.custom"}})],1),e._v(" "),t("div",{staticClass:"ui-links-setting mt-20"},[t("DefaultLinksEditor",{attrs:{mode:e.mode},model:{value:e.value.defaults,callback:function(t){e.$set(e.value,"defaults",t)},expression:"value.defaults"}})],1),e._v(" "),e._l(e.errors,(function(e){return[t("Banner",{key:e,attrs:{color:"error",label:e}})]})),e._v(" "),"edit"===e.mode?t("div",{staticClass:"mt-20"},[t("AsyncButton",{staticClass:"pull-right",attrs:{mode:"apply"},on:{click:e.save}})],1):e._e()],2)},s=[],r=(a("b64b"),a("a4d3"),a("e439"),a("159b"),a("dbb4"),a("ade3")),i=a("1da1"),u=(a("caad"),a("2532"),a("d81d"),a("4de4"),a("d3b7"),a("a34a")),l=a.n(u),c=(a("96cf"),a("c778")),o=a("67c9"),d=a("01ba"),v=a("a788"),b=a("2f40"),f=a("c5b9"),p=a("fa3b"),h=a("aaa3"),m=a("2f62"),k=a("ac98"),y=a("5668"),g=a("4f969");function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x={layout:"authenticated",components:{KeyValue:h["a"],Loading:c["a"],AsyncButton:o["b"],Banner:d["a"],DefaultLinksEditor:y["default"]},fetch:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["b"])(e.$store,e.hasSupport,!1,(function(t){return e.t(t)}));case 2:e.value=t.sent;case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{defaultsDisabled:!0,isRancherPrime:Object(k["b"])(),uiCustomLinks:{},bannerVal:{},value:[],errors:[]}},computed:w(w({},Object(m["b"])({multiWithFallback:"i18n/multiWithFallback"})),{},{mode:function(){var e,t=this.$store.getters["management/schemaFor"](v["B"].SETTING);return null!==t&&void 0!==t&&null!==(e=t.resourceMethods)&&void 0!==e&&e.includes("PUT")?p["M"]:p["T"]},allValues:function(){return{version:g["a"],defaults:this.value.defaults.filter((function(e){return e.enabled})).map((function(e){return e.key})),custom:this.value.custom}},hasSupport:function(){var e;return Object(k["b"])()||"true"===(null===(e=this.$store.getters["management/byId"](v["B"].SETTING,f["c"].SUPPORTED))||void 0===e?void 0:e.value)}}),methods:{deprecateIssueLinks:function(){if(this.uiIssuesSetting.value||this.uiIssuesSetting.value)return this.uiIssuesSetting.value="",this.uiCommunitySetting.value="",this.uiIssuesSetting.save()},save:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var n;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.errors=[],a.prev=1,a.next=4,Object(b["a"])(t.$store,f["c"].UI_CUSTOM_LINKS,"");case 4:return n=a.sent,n.value=JSON.stringify(t.allValues),a.next=8,n.save();case 8:return a.next=10,Object(g["b"])(t.$store,t.hasSupport,!1,(function(e){return t.t(e)}));case 10:t.value=a.sent,e(!0),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](1),t.errors.push(a.t0),e(!1);case 18:case"end":return a.stop()}}),a,null,[[1,14]])})))()}}},_=x,j=(a("be0d"),a("0c7c")),S=Object(j["a"])(_,n,s,!1,null,"37e76483",null);t["default"]=S.exports}}]);
//# sourceMappingURL=links.00b6f361.js.map