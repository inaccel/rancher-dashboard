(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00566044"],{"04da":function(e,t,r){"use strict";var o=function(){var e=this,t=e._self._c;return e.showModal?t("app-modal",{staticClass:"assign-modal",attrs:{name:"assignTo",styles:"background-color: var(--nav-bg); border-radius: var(--border-radius); max-height: 100vh;",height:"auto",scrollable:!0},on:{close:e.close}},[e.loaded?t("Card",{attrs:{"show-highlight-border":!1}},[t("h4",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("assignTo.title",{count:e.resourceCount},!0),expression:"t('assignTo.title', {count: resourceCount}, true)"}],staticClass:"text-default-text",attrs:{slot:"title"},slot:"title"}),e._v(" "),t("div",{staticClass:"pl-10 pr-10",attrs:{slot:"body"},slot:"body"},[t("form",[t("LabeledSelect",{attrs:{label:e.t("assignTo.workspace"),options:e.workspaceOptions,placement:"bottom"},model:{value:e.moveTo,callback:function(t){e.moveTo=t},expression:"moveTo"}}),e._v(" "),t("KeyValue",{key:"labels",staticClass:"mt-20",attrs:{"add-label":e.t("labels.addSetLabel"),"read-allowed":!1},model:{value:e.labels,callback:function(t){e.labels=t},expression:"labels"}}),e._v(" "),e._l(e.errors,(function(e,r){return t("Banner",{key:r,attrs:{color:"error",label:e}})}))],2)]),e._v(" "),t("div",{attrs:{slot:"actions"},slot:"actions"},[t("button",{staticClass:"btn role-secondary",on:{click:e.close}},[e._v("\n        "+e._s(e.t("generic.cancel"))+"\n      ")]),e._v(" "),t("AsyncButton",{attrs:{mode:"apply"},on:{click:e.apply}})],1)]):e._e()],1):e._e()},n=[],a=(r("a4d3"),r("e439"),r("159b"),r("dbb4"),r("fb6a"),r("a630"),r("ac1f"),r("e01a"),r("d28b"),r("1da1")),s=r("ade3"),c=r("a34a"),i=r.n(c),l=(r("96cf"),r("4de4"),r("d3b7"),r("d81d"),r("b0c0"),r("e260"),r("e6cf"),r("3ca3"),r("ddb0"),r("b64b"),r("2f62")),u=r("a788"),m=r("a95f"),p=r("aaa3"),d=r("67c9"),v=r("8dbe"),f=r("d4bf"),h=r("bec1"),b=r("4579"),y=r("de78");function g(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=w(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}function w(e,t){if(e){if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k={components:{Card:f["a"],LabeledSelect:m["a"],KeyValue:p["a"],AsyncButton:d["b"],Banner:h["a"],AppModal:v["a"]},data:function(){return{errors:[],labels:{},moveTo:this.workspace,loaded:!1,allWorkspaces:[],showModal:!1}},computed:O(O(O(O({},Object(l["d"])("action-menu",["showAssignTo","toAssign"])),Object(l["c"])({t:"i18n/t"})),Object(l["c"])(["workspace"])),{},{workspaceOptions:function(){var e=this.allWorkspaces.map((function(e){var t;return null===(t=e.metadata)||void 0===t?void 0:t.name})).filter((function(e){return!!e&&"fleet-local"!==e}));return e},resourceCount:function(){var e;return(null===(e=this.toAssign)||void 0===e?void 0:e.length)||0}}),watch:{showAssignTo:function(e){var t=this;return Object(a["a"])(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e){r.next=11;break}return r.next=3,t.$store.dispatch("rancher/findAll",{type:u["L"].CLUSTER});case 3:return r.next=5,t.$store.dispatch("management/findAll",{type:u["r"].WORKSPACE});case 5:t.allWorkspaces=r.sent,t.moveTo=t.workspace,t.loaded=!0,t.showModal=!0,r.next=12;break;case 11:t.showModal=!1;case 12:case"end":return r.stop()}}),r)})))()}},methods:{close:function(){this.errors=[],this.labels={},this.moveTo=this.workspace,this.$store.commit("action-menu/toggleAssignTo")},apply:function(e){var t=this;return Object(a["a"])(i.a.mark((function r(){var o,n,a,s,c,l,u,m;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:o=[],t.errors=[],n=g(t.toAssign),r.prev=3,n.s();case 5:if((a=n.n()).done){r.next=17;break}return s=a.value,r.next=9,t.$store.dispatch("rancher/clone",{resource:s.norman});case 9:if(c=r.sent,c){r.next=12;break}return r.abrupt("continue",15);case 12:for(c.fleetWorkspaceName=t.moveTo,l=0,u=Object.keys(t.labels);l<u.length;l++)m=u[l],c._labels||Object(y["set"])(c,"_labels",{}),Object(y["set"])(c._labels,m,t.labels[m]);o.push(c.save());case 15:r.next=5;break;case 17:r.next=22;break;case 19:r.prev=19,r.t0=r["catch"](3),n.e(r.t0);case 22:return r.prev=22,n.f(),r.finish(22);case 25:return r.prev=25,r.next=28,Promise.all(o);case 28:e(!0),t.close(),r.next=36;break;case 32:r.prev=32,r.t1=r["catch"](25),t.errors=Object(b["d"])(r.t1),e(!1);case 36:case"end":return r.stop()}}),r,null,[[3,19,22,25],[25,32]])})))()}}},C=k,_=(r("5f4b"),r("0c7c")),j=Object(_["a"])(C,o,n,!1,null,null,null);t["a"]=j.exports},"085c":function(e,t,r){var o=r("4bad");t=o(!1),t.push([e.i,".assign-modal{border-radius:var(--border-radius);overflow:scroll;max-height:100vh}.assign-modal ::-webkit-scrollbar-corner{background:transparent}",""]),e.exports=t},"2e39":function(e,t,r){"use strict";var o=function(){var e=this,t=e._self._c;return e.showModal?t("app-modal",{attrs:{"custom-class":"remove-modal",name:"promptRemove",width:400,height:"auto",styles:"max-height: 100vh;"},on:{close:e.close}},[t("Card",{staticClass:"prompt-remove",attrs:{"show-highlight-border":!1},scopedSlots:e._u([{key:"actions",fn:function(){return[t("button",{staticClass:"btn role-secondary",on:{click:e.close}},[e._v("\n        "+e._s(e.t("generic.cancel"))+"\n      ")]),e._v(" "),t("div",{staticClass:"spacer"}),e._v(" "),t("AsyncButton",{staticClass:"btn bg-error ml-10",attrs:{mode:"delete",disabled:e.deleteDisabled,"data-testid":e.componentTestid+"-confirm-button"},on:{click:e.remove}})]},proxy:!0}],null,!1,1347891345)},[t("h4",{staticClass:"text-default-text",attrs:{slot:"title"},slot:"title"},[e._v("\n      "+e._s(e.t("promptRemove.title"))+"\n    ")]),e._v(" "),t("div",{attrs:{slot:"body"},slot:"body"},[t("div",{staticClass:"mb-10"},[e.hasCustomRemove?e._e():[e._v("\n          "+e._s(e.t("promptRemove.attemptingToRemove",{type:e.type}))+" "),t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.resourceNames(e.names,e.plusMore,e.t),expression:"resourceNames(names, plusMore, t)"}]})],e._v(" "),[e.hasCustomRemove?t(e.removeComponent,e._b({ref:"customPrompt",tag:"component",attrs:{close:e.close,"needs-confirm":e.needsConfirm,value:e.toRemove,names:e.names,type:e.type,"done-location":e.doneLocation},on:{errors:function(t){return e.error=t},done:e.done},model:{value:e.toRemove,callback:function(t){e.toRemove=t},expression:"toRemove"}},"component",e._data,!1)):e._e(),e._v(" "),e.needsConfirm?t("div",{staticClass:"mt-10"},[t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("promptRemove.confirmName",{nameToMatch:e.escapeHtml(e.nameToMatch)},!0),expression:"t('promptRemove.confirmName', { nameToMatch: escapeHtml(nameToMatch) }, true)"}]})]):e._e()]],2),e._v(" "),e.needsConfirm?t("LabeledInput",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{id:"confirm","data-testid":e.componentTestid+"-input",type:"text"},model:{value:e.confirmName,callback:function(t){e.confirmName=t},expression:"confirmName"}},[t("div",{staticClass:"text-warning mb-10 mt-10"},[e._v("\n          "+e._s(e.warning)+"\n        ")]),e._v(" "),t("div",{staticClass:"text-error mb-10 mt-10"},[e._v("\n          "+e._s(e.error)+"\n        ")]),e._v(" "),e.needsConfirm?e._e():t("div",{staticClass:"text-info mt-20"},[e._v("\n          "+e._s(e.protip)+"\n        ")]),e._v(" "),e.chartsToRemoveIsApp?t("Checkbox",{staticClass:"mt-10 type",attrs:{"label-key":"promptRemoveApp.removeCrd"},on:{input:e.chartAddCrdToRemove},model:{value:e.chartsDeleteCrd,callback:function(t){e.chartsDeleteCrd=t},expression:"chartsDeleteCrd"}}):e._e()],1):[t("div",{staticClass:"text-warning mb-10 mt-10"},[e._v("\n          "+e._s(e.warning)+"\n        ")]),e._v(" "),t("div",{staticClass:"text-error mb-10 mt-10"},[e._v("\n          "+e._s(e.error)+"\n        ")])]],2)])],1):e._e()},n=[],a=(r("b64b"),r("a4d3"),r("e439"),r("159b"),r("dbb4"),r("a630"),r("ac1f"),r("e01a"),r("d28b"),r("1da1")),s=r("ade3"),c=r("a34a"),i=r.n(c),l=(r("96cf"),r("fb6a"),r("d81d"),r("e260"),r("d3b7"),r("6062"),r("3ca3"),r("e3df"),r("015a"),r("85ca"),r("74d4"),r("dee5"),r("b628"),r("658e"),r("0b52"),r("9661"),r("0a8d"),r("e495"),r("72d0"),r("2705"),r("a9a1"),r("4a2e"),r("0466"),r("ddb0"),r("b0c0"),r("4de4"),r("e6cf"),r("caad"),r("2532"),r("2f62")),u=r("de78"),m=r("2c94"),p=r("d4bf"),d=r("4de2"),v=r("1227"),f=r("f303"),h=r("67c9"),b=r("7388"),y=r("a788"),g=r("84d3"),w=r("8dbe");function R(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=x(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}function x(e,t){if(e){if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _={name:"PromptRemove",components:{Card:p["a"],Checkbox:d["a"],AsyncButton:h["b"],LabeledInput:g["a"],AppModal:w["a"]},props:{componentTestid:{type:String,default:"prompt-remove"}},data:function(){var e=this.$route.params.resource;return{hasCustomRemove:!1,randomPosition:Math.random(),confirmName:"",error:"",warning:"",preventDelete:!1,removeComponent:this.$store.getters["type-map/importCustomPromptRemove"](e),chartsToRemoveIsApp:!1,chartsDeleteCrd:!1,showModal:!1}},computed:C(C({names:function(){return this.toRemove.map((function(e){return e.nameDisplay})).slice(0,5)},nameToMatchPosition:function(){var e=Math.min(5,this.names.length),t=Math.floor(this.randomPosition*e);return t},nameToMatch:function(){return this.names[this.nameToMatchPosition]},type:function(){var e,t=new Set(this.toRemove.reduce((function(e,t){return e.push(t.type),e}),[]));if(t.size>1)return this.t("generic.resource",{count:this.toRemove.length});var r=null===(e=this.toRemove[0])||void 0===e?void 0:e.schema;return r?this.$store.getters["type-map/labelFor"](r,this.toRemove.length):"resource".concat(1===this.toRemove.length?"":"s")},selfLinks:function(){return this.toRemove.map((function(e){return Object(u["get"])(e,"links.self")}))},needsConfirm:function(){var e=this.toRemove[0];return null===e||void 0===e?void 0:e.confirmRemove},plusMore:function(){var e=this.toRemove.length-this.names.length;return this.t("promptRemove.andOthers",{count:e})},doneLocation:function(){var e,t;if(this.toRemove.length>1)return null;if(this.toRemove[0].doneLocationRemove)return this.toRemove[0].doneLocationRemove;var r=this.toRemove[0].currentRoute(),o={},n=C({},r.params);if(n.id&&(n.id===(null===(e=this.toRemove[0])||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name)||n.id===this.toRemove[0].id)){var a=r.name,s=void 0===a?"":a,c=s.indexOf("-id");if(-1!==c&&(s=s.slice(0,c)),n.namespace){var i=s.indexOf("-namespace");-1!==i&&(s=s.slice(0,i)),delete n.namespace}delete n.id,o.params=n,o.name=s}return o},currentRouter:function(){return this.doneLocation?this.toRemove[0].currentRouter():null},protip:function(){return this.t("promptRemove.protip",{alternateLabel:v["b"]})},deleteDisabled:function(){var e=this.needsConfirm&&this.confirmName!==this.nameToMatch;return this.preventDelete||e}},Object(l["d"])("action-menu",["showPromptRemove","toRemove"])),Object(l["c"])({t:"i18n/t"})),watch:{showPromptRemove:function(e){if(e){var t,r,o,n,a,s=this.toRemove[0];"c-cluster-explorer-tools"===(null===(t=this.currentRouter)||void 0===t||null===(r=t.currentRoute)||void 0===r?void 0:r.name)&&s.type===y["f"].APP&&null!==(o=s.spec)&&void 0!==o&&null!==(n=o.chart)&&void 0!==n&&null!==(a=n.metadata)&&void 0!==a&&a.annotations[b["e"].AUTO_INSTALL]&&(this.chartsToRemoveIsApp=!0),this.showModal=!0;var c=this.$route.params.resource;this.toRemove.length>0&&(c=s.type),this.hasCustomRemove=this.$store.getters["type-map/hasCustomPromptRemove"](c),this.removeComponent=this.$store.getters["type-map/importCustomPromptRemove"](c)}else this.showModal=!1},toRemove:function(e){var t,r=e.filter((function(e){return e.preventDeletionMessage}));if(this.preventDelete=!1,r.length)this.preventDelete=!0,t=r[0].preventDeletionMessage;else{var o=e.filter((function(e){return e.warnDeletionMessage}));o.length&&(t=o[0].warnDeletionMessage)}this.warning="function"===typeof t?t(this.toRemove):t||""}},methods:{resourceNames:m["s"],escapeHtml:m["h"],close:function(){this.confirmName="",this.error="",this.chartsDeleteCrd=!1,this.chartsToRemoveIsApp=!1,this.$store.commit("action-menu/togglePromptRemove")},remove:function(e){var t=this;return Object(a["a"])(i.a.mark((function r(){var o,n,a,s;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.doneLocation&&(t.cachedDoneLocation=C({},t.doneLocation)),!t.hasCustomRemove||null===(o=t.$refs)||void 0===o||null===(n=o.customPrompt)||void 0===n||!n.remove){r.next=17;break}if(a=t.$refs.customPrompt.remove(e),!a||!a.then){r.next=15;break}return r.prev=4,r.next=7,a;case 7:a=r.sent,r.next=15;break;case 10:return r.prev=10,r.t0=r["catch"](4),t.error=r.t0,e(!1),r.abrupt("return");case 15:if(void 0!==a&&!a){r.next=17;break}return r.abrupt("return");case 17:s=t.toRemove.some((function(e){return e.removeSerially})),s?t.serialRemove(e):t.parallelRemove(e);case 19:case"end":return r.stop()}}),r,null,[[4,10]])})))()},serialRemove:function(e){var t=this;return Object(a["a"])(i.a.mark((function r(){var o,n,a,s;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:r.prev=0,o=t.getSpoofedTypes(t.toRemove),n=R(t.toRemove),r.prev=3,n.s();case 5:if((a=n.n()).done){r.next=11;break}return s=a.value,r.next=9,s.remove();case 9:r.next=5;break;case 11:r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](3),n.e(r.t0);case 16:return r.prev=16,n.f(),r.finish(16);case 19:return r.next=21,t.refreshSpoofedTypes(o);case 21:t.done(),r.next=28;break;case 24:r.prev=24,r.t1=r["catch"](0),t.error=r.t1.message||r.t1,e(!1);case 28:case"end":return r.stop()}}),r,null,[[0,24],[3,13,16,19]])})))()},parallelRemove:function(e){var t=this;return Object(a["a"])(i.a.mark((function r(){var o;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,"undefined"===typeof t.toRemove[0].bulkRemove){r.next=6;break}return r.next=4,t.toRemove[0].bulkRemove(t.toRemove,{});case 4:r.next=8;break;case 6:return r.next=8,Promise.all(t.toRemove.map((function(e){return e.remove()})));case 8:return o=t.getSpoofedTypes(t.toRemove),r.next=11,t.refreshSpoofedTypes(o);case 11:t.done(),r.next=18;break;case 14:r.prev=14,r.t0=r["catch"](0),t.error=r.t0.message||r.t0,e(!1);case 18:case"end":return r.stop()}}),r,null,[[0,14]])})))()},done:function(){this.cachedDoneLocation&&!Object(u["isEmpty"])(this.cachedDoneLocation)&&this.currentRouter.push(this.cachedDoneLocation),this.close()},getSpoofedTypes:function(e){var t=Object(f["o"])(this.toRemove.map((function(e){return e.type})));return t.filter(this.$store.getters["type-map/isSpoofed"])},refreshSpoofedTypes:function(e){var t=this,r=this.$store.getters["currentProduct"].inStore,o=e.map((function(e){return t.$store.dispatch("".concat(r,"/findAll"),{type:e,opt:{force:!0}},{root:!0})}));return Promise.all(o)},chartAddCrdToRemove:function(){var e=this;return Object(a["a"])(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.toRemove[0].relatedResourcesToRemove();case 3:r=t.sent,e.toRemove.includes(r)?e.chartsDeleteCrd||e.toRemove.pop(r):e.toRemove.push(r),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=t.t0,e.chartsDeleteCrd=!1;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},j=_,T=(r("bd98"),r("0c7c")),A=Object(T["a"])(j,o,n,!1,null,null,null);t["a"]=A.exports},"39d9":function(e,t,r){var o=r("4bad");t=o(!1),t.push([e.i,".prompt-remove.card-container{box-shadow:none}.prompt-remove #confirm{width:90%;margin-left:3px}.prompt-remove .actions{text-align:right}.prompt-remove .card-actions{display:flex}.prompt-remove .card-actions .spacer{flex:1}",""]),e.exports=t},"5f4b":function(e,t,r){"use strict";r("c4b8")},a5d3:function(e,t,r){var o=r("39d9");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=r("499e").default;n("5722fedc",o,!0,{sourceMap:!1,shadowMode:!1})},bd98:function(e,t,r){"use strict";r("a5d3")},c4b8:function(e,t,r){var o=r("085c");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=r("499e").default;n("13cd30c4",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-00566044.0b0ce063.js.map