{"version":3,"sources":["webpack:///./shell/pages/c/_cluster/manager/cloudCredential/index.vue?4506","webpack:///./shell/pages/c/_cluster/manager/cloudCredential/index.vue?7a8b","webpack:///./shell/pages/c/_cluster/manager/cloudCredential/index.vue?4b6b","webpack:///./shell/pages/c/_cluster/manager/cloudCredential/index.vue","webpack:///shell/pages/c/_cluster/manager/cloudCredential/index.vue","webpack:///./shell/pages/c/_cluster/manager/cloudCredential/index.vue?5a2b","webpack:///./shell/pages/c/_cluster/manager/cloudCredential/index.vue?cc03"],"names":["content","__esModule","default","module","i","locals","exports","add","___CSS_LOADER_API_IMPORT___","push","render","_vm","this","_c","_self","$fetchState","pending","attrs","schema","resource","createLocation","t","_v","expiredData","expiring","_e","expired","rows","headers","scopedSlots","_u","key","fn","_ref","row","_s","id","replace","staticRenderFns","components","Loading","ResourceTable","Masthead","Banner","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","promises","hash","wrap","_context","prev","next","$store","getters","SECRET","secrets","dispatch","type","allCredentials","NORMAN","CLOUD_CREDENTIAL","allHash","sent","hasHarvester","find","cc","harvestercredentialConfig","stop","data","computed","ID_UNLINKED","NAME_UNLINKED","name","labelKey","value","sort","search","formatter","DESCRIPTION","AGE_NORMAN","params","product","counts","reduce","res","expireData","count","component"],"mappings":"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","file":"js/chunk-0986fbfe.93783aae.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=e527d0e2&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"c5f06ed6\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".banner[data-v-e527d0e2]{margin:0 0 10px 0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../../../node_modules/vue-style-loader/index.js??ref--9-oneOf-1-0!../../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=e527d0e2&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.$fetchState.pending)?_c('Loading'):_c('div',[_c('Masthead',{attrs:{\"schema\":_vm.schema,\"resource\":_vm.resource,\"create-location\":_vm.createLocation,\"type-display\":_vm.t('manager.cloudCredentials.label')}}),_vm._v(\" \"),(_vm.expiredData.expiring)?_c('Banner',{attrs:{\"data-testid\":\"cert-expiring-banner\",\"color\":\"warning\",\"label\":_vm.expiredData.expiring}}):_vm._e(),_vm._v(\" \"),(_vm.expiredData.expired)?_c('Banner',{attrs:{\"color\":\"error\",\"label\":_vm.expiredData.expired}}):_vm._e(),_vm._v(\" \"),_c('ResourceTable',{attrs:{\"schema\":_vm.schema,\"rows\":_vm.rows,\"headers\":_vm.headers,\"namespaced\":false,\"group-by\":\"providerDisplay\"},scopedSlots:_vm._u([{key:\"cell:id\",fn:function({row}){return [_vm._v(\"\\n      \"+_vm._s(row.id.replace('cattle-global-data:', ''))+\"\\n    \")]}}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading';\nimport ResourceTable from '@shell/components/ResourceTable';\nimport Masthead from '@shell/components/ResourceList/Masthead';\nimport { NORMAN, SECRET } from '@shell/config/types';\nimport {\n  AGE_NORMAN,\n  DESCRIPTION,\n  ID_UNLINKED,\n  NAME_UNLINKED,\n} from '@shell/config/table-headers';\nimport { allHash } from 'utils/promise';\nimport { Banner } from '@components/Banner';\n\nexport default {\n  components: {\n    Loading,\n    ResourceTable,\n    Masthead,\n    Banner\n  },\n\n  async fetch() {\n    const promises = {};\n\n    if (this.$store.getters['management/schemaFor'](SECRET) && !this.$store.getters[`cluster/paginationEnabled`](SECRET)) {\n      // Having secrets allows showing the public portion of more types but not all users can see them.\n      promises.secrets = this.$store.dispatch('management/findAll', { type: SECRET });\n    }\n    promises.allCredentials = this.$store.dispatch('rancher/findAll', { type: NORMAN.CLOUD_CREDENTIAL });\n\n    const hash = await allHash(promises);\n\n    this.allCredentials = hash.allCredentials;\n    // This can be optimized in future to to a quick fetch for those with annotation `\"provisioning.cattle.io/driver\": \"harvester\"`\n    this.hasHarvester = !!this.allCredentials.find((cc) => !!cc.harvestercredentialConfig);\n  },\n\n  data() {\n    return {\n      allCredentials: null,\n      resource:       NORMAN.CLOUD_CREDENTIAL,\n      schema:         this.$store.getters['rancher/schemaFor'](NORMAN.CLOUD_CREDENTIAL),\n    };\n  },\n\n  computed: {\n    rows() {\n      return this.allCredentials || [];\n    },\n\n    headers() {\n      const headers = [\n        ID_UNLINKED,\n        NAME_UNLINKED,\n        {\n          name:      'apikey',\n          labelKey:  'tableHeaders.apikey',\n          value:     'publicData',\n          sort:      'publicData',\n          search:    'publicData',\n          formatter: 'CloudCredPublicData',\n        },\n        DESCRIPTION,\n      ];\n\n      if (this.hasHarvester) {\n        headers.push({\n          name:      'expiresDate',\n          labelKey:  'tableHeaders.expires',\n          value:     'expires',\n          sort:      'expiresForSort',\n          formatter: 'CloudCredExpired',\n        });\n      }\n\n      headers.push(AGE_NORMAN);\n\n      return headers;\n    },\n\n    createLocation() {\n      return {\n        name:   'c-cluster-manager-cloudCredential-create',\n        params: {\n          product:  this.$store.getters['currentProduct'].name,\n          resource: this.resource,\n        },\n      };\n    },\n\n    expiredData() {\n      const counts = this.allCredentials.reduce((res, cc) => {\n        const expireData = cc.expireData;\n\n        if (expireData?.expiring) {\n          res.expiring++;\n        }\n        if (expireData?.expired) {\n          res.expired++;\n        }\n\n        return res;\n      }, {\n        expiring: 0,\n        expired:  0\n      });\n\n      return {\n        expiring: counts.expiring ? this.t('manager.cloudCredentials.banners.expiring', { count: counts.expiring }) : '',\n        expired:  counts.expired ? this.t('manager.cloudCredentials.banners.expired', { count: counts.expired }) : '',\n      };\n    }\n  },\n\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Masthead\n      :schema=\"schema\"\n      :resource=\"resource\"\n      :create-location=\"createLocation\"\n      :type-display=\"t('manager.cloudCredentials.label')\"\n    />\n    <Banner\n      v-if=\"expiredData.expiring\"\n      data-testid=\"cert-expiring-banner\"\n      color=\"warning\"\n      :label=\"expiredData.expiring\"\n    />\n    <Banner\n      v-if=\"expiredData.expired\"\n      color=\"error\"\n      :label=\"expiredData.expired\"\n    />\n\n    <ResourceTable\n      :schema=\"schema\"\n      :rows=\"rows\"\n      :headers=\"headers\"\n      :namespaced=\"false\"\n      group-by=\"providerDisplay\"\n    >\n      <template #cell:id=\"{row}\">\n        {{ row.id.replace('cattle-global-data:', '') }}\n      </template>\n    </ResourceTable>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.banner {\n  margin: 0 0 10px 0\n}\n</style>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e527d0e2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e527d0e2&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e527d0e2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}