(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14b72dac"],{"0237":function(e,t,a){var s=a("4bad");t=s(!1),t.push([e.i,".install-steps[data-v-ce349040]{padding-top:0;height:0;position:relative;overflow:hidden}.install-steps.isPlainLayout[data-v-ce349040]{padding:20px}.install-steps .description[data-v-ce349040]{display:flex;flex-direction:column;margin-top:0}.wizard .logo-bg[data-v-ce349040]{margin-right:10px;height:50px;width:50px;background-color:#fff;border:5px solid #fff;border-radius:calc(var(--border-radius)*3);position:relative}.wizard .logo[data-v-ce349040]{max-height:40px;max-width:40px;position:absolute;width:auto;height:auto;top:0;right:0;bottom:0;left:0;margin:auto}.wizard.windowsIncompatible[data-v-ce349040] .header{padding-bottom:15px}.wizard .os-label[data-v-ce349040]{position:absolute;background-color:var(--warning-banner-bg);color:var(--warning);margin-top:5px}.step__basic[data-v-ce349040]{display:flex;flex-direction:column;flex:1}.step__basic .spacer[data-v-ce349040]{line-height:2}.step__values__controls[data-v-ce349040]{display:flex;margin-bottom:15px}.step__values__controls[data-v-ce349040]>:not(:last-of-type){margin-right:10px}.step__values__content[data-v-ce349040],.step__values__controls--spacer[data-v-ce349040]{flex:1}.step__values__content[data-v-ce349040] .tab-container{overflow:auto}.slideIn[data-v-ce349040]{border-left:var(--header-border-size) solid var(--header-border);position:absolute;top:0;right:-35%;height:100%;background-color:var(--topmenu-bg);width:35%;z-index:10;display:flex;flex-direction:column;padding:10px;transition:right .5s ease}.slideIn__header[data-v-ce349040]{display:flex;align-items:center;justify-content:space-between}.slideIn__header__buttons[data-v-ce349040]{display:flex}.slideIn__header__button[data-v-ce349040]{cursor:pointer;display:flex;align-items:center;justify-content:center;padding:2px}.slideIn__header__button>i[data-v-ce349040]{font-size:20px;opacity:.5}.slideIn__header__button[data-v-ce349040]:hover{background-color:var(--wm-closer-hover-bg)}.slideIn .chart-content__tabs[data-v-ce349040]{display:flex;flex-direction:column;flex:1;height:0;padding-bottom:10px}.slideIn .chart-content__tabs[data-v-ce349040] .chart-readmes{flex:1;overflow:auto}.slideIn__show[data-v-ce349040]{right:0}.scroll__container[data-v-ce349040]{min-height:200px;margin-bottom:60px}.scroll__container[data-v-ce349040],.scroll__content[data-v-ce349040]{overflow:auto;display:flex;flex:1}[data-v-ce349040] .yaml-editor{flex:1}.outer-container[data-v-ce349040]{display:flex;flex-direction:column;padding:0;overflow:auto}.header[data-v-ce349040]{display:flex;align-content:space-between;align-items:center;border-bottom:var(--header-border-size) solid var(--header-border)}.header>.title[data-v-ce349040]{flex:1;min-height:75px}.header .choice-banner[data-v-ce349040]{flex-basis:40%;display:flex;align-items:center}.header .choice-banner.top H2[data-v-ce349040]{margin:0}.header .choice-banner.top .title[data-v-ce349040]{display:flex;align-items:center;justify-content:space-evenly}.header .choice-banner.top .title>.subtitle[data-v-ce349040]{margin:0 20px}.header .choice-banner.top .subtitle[data-v-ce349040]{display:flex;flex-direction:column}.header .choice-banner.top .subtitle .subtext[data-v-ce349040]{color:var(--input-label)}.header .choice-banner[data-v-ce349040]:not(.top){box-shadow:0 0 12px 3px var(--box-bg);flex-direction:row;align-items:center;justify-content:start}.header .choice-banner[data-v-ce349040]:not(.top):hover{outline:var(--outline-width) solid var(--outline);cursor:pointer}.header .choice-banner .round-image[data-v-ce349040]{min-width:50px;height:50px;margin:10px 10px 10px 0;border-radius:50%;overflow:hidden}.header .choice-banner .round-image .logo[data-v-ce349040]{min-width:50px;height:50px}",""]),e.exports=t},"3ca4":function(e,t,a){"use strict";a.r(t);var s=a("2909"),n=(a("b0c0"),a("a4d3"),a("e01a"),function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):e.legacyApp||e.mcapp?t("div",{staticClass:"install-steps",class:{isPlainLayout:e.isPlainLayout}},[t("div",{staticClass:"outer-container"},[t("div",{staticClass:"header mb-20"},[t("div",{staticClass:"title"},[t("div",{staticClass:"top choice-banner"},[t("div",{staticClass:"title"},[e._t("bannerTitleImage",(function(){return[t("div",{staticClass:"round-image"},[t("LazyImage",{staticClass:"logo",attrs:{src:e.chart?e.chart.icon:""}})],1)]})),e._v(" "),t("div",{staticClass:"subtitle"},[e.stepperName?t("h2",[e._v("\n                  "+e._s(e.stepperName)+"\n                ")]):e._e(),e._v(" "),e.stepperSubtext?t("span",{staticClass:"subtext"},[e._v(e._s(e.stepperSubtext))]):e._e()])],2)])])]),e._v(" "),t("Banner",{staticClass:"description",attrs:{color:"warning"}},[e.mcapp?e._e():t("span",[e._v("\n          "+e._s(e.t("catalog.install.error.legacy.label",{legacyType:e.mcapp?e.legacyDefs.mcm:e.legacyDefs.legacy},!0))+"\n        ")]),e._v(" "),e.legacyEnabled?e.mcapp?[t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("catalog.install.error.legacy.mcmNotSupported"),expression:"t('catalog.install.error.legacy.mcmNotSupported')"}]})]:[t("router-link",{attrs:{to:e.legacyAppRoute}},[t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("catalog.install.error.legacy.navigate"),expression:"t('catalog.install.error.legacy.navigate')"}]})])]:[t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("catalog.install.error.legacy.enableLegacy.prompt",!0),expression:"t('catalog.install.error.legacy.enableLegacy.prompt', true)"}]}),e._v(" "),t("router-link",{attrs:{to:e.legacyFeatureRoute}},[e._v("\n            "+e._s(e.t("catalog.install.error.legacy.enableLegacy.goto"))+"\n          ")])]],2)],1)]):t("div",{staticClass:"install-steps pt-20",class:{isPlainLayout:e.isPlainLayout}},[t("TypeDescription",{attrs:{resource:"chart"}}),e._v(" "),e.value?t("Wizard",{staticClass:"wizard",class:{windowsIncompatible:e.windowsIncompatible},attrs:{steps:e.steps,errors:e.errors,"edit-first-step":!0,"banner-title":e.stepperName,"banner-title-subtext":e.stepperSubtext,"finish-mode":e.action},on:{cancel:e.cancel,finish:e.finish},scopedSlots:e._u([e._l(e.customSteps,(function(a){return{key:a.name,fn:function(){return[t(a.component,{key:a.name,tag:"component",on:{update:function(t){return e.updateStep(a.name,t)},errors:function(t){var a;return(a=e.errors).push.apply(a,Object(s["a"])(t))}}})]},proxy:!0}})),{key:"bannerTitleImage",fn:function(){return[t("div",[t("div",{staticClass:"logo-bg"},[t("LazyImage",{staticClass:"logo",attrs:{src:e.chart?e.chart.icon:""}})],1),e._v(" "),e.windowsIncompatible?t("label",{staticClass:"os-label"},[e._v("\n            "+e._s(e.windowsIncompatible)+"\n          ")]):e._e()])]},proxy:!0},{key:"basics",fn:function(){return[t("div",{staticClass:"step__basic"},[e.step1Description?t("Banner",{staticClass:"description",attrs:{color:"info"}},[t("div",[t("span",[e._v(e._s(e.step1Description))]),e._v(" "),e.namespaceNewAllowed?t("span",{staticClass:"mt-10"},[e._v("\n                "+e._s(e.t("catalog.install.steps.basics.nsCreationDescription",{},!0))+"\n              ")]):e._e()])]):e._e(),e._v(" "),e.requires.length||e.warnings.length?t("div",{staticClass:"mb-15"},[e._l(e.requires,(function(e){return t("Banner",{key:e,attrs:{color:"error"}},[t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e,expression:"msg"}]})])})),e._v(" "),e._l(e.warnings,(function(e){return t("Banner",{key:e,attrs:{color:"warning"}},[t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e,expression:"msg"}]})])}))],2):e._e(),e._v(" "),e.showSelectVersionOrChart?t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-4"},[e.chart?t("LabeledSelect",{attrs:{label:e.t("catalog.install.version"),value:e.query.versionName,options:e.filteredVersions,selectable:function(e){return!e.disabled}},on:{input:e.selectVersion}}):t("LabeledSelect",{attrs:{label:e.t("catalog.install.chart"),value:e.chart,options:e.charts,selectable:function(e){return!e.disabled},"get-option-label":function(t){return e.getOptionLabel(t)},"option-key":"key"},on:{input:function(t){return e.selectChart(t)}},scopedSlots:e._u([{key:"option",fn:function(a){return["divider"===a.kind?[t("hr")]:"label"===a.kind?[t("b",{staticStyle:{position:"relative",left:"-2.5px"}},[e._v(e._s(a.label))])]:e._e()]}}],null,!1,3217780982)})],1)]):e._e(),e._v(" "),t("NameNsDescription",{attrs:{"description-hidden":!0,mode:e.mode,"name-disabled":e.nameDisabled,"name-required":!1,"name-ns-hidden":!e.showNameEditor,"force-namespace":e.forceNamespace,"namespace-new-allowed":e.namespaceNewAllowed,"extra-columns":e.showProject?["project"]:[],"show-spacer":!1,horizontal:!1},on:{isNamespaceNew:function(t){e.isNamespaceNew=t}},scopedSlots:e._u([e.showProject?{key:"project",fn:function(){return[t("LabeledSelect",{attrs:{disabled:!e.namespaceIsNew,label:e.t("catalog.install.project"),"option-key":"id",options:e.projectOpts,tooltip:e.namespaceIsNew?"":e.t("catalog.install.namespaceIsInProject",{namespace:e.value.metadata.namespace},!0),"hover-tooltip":!e.namespaceIsNew,status:"info"},model:{value:e.project,callback:function(t){e.project=t},expression:"project"}})]},proxy:!0}:null],null,!0),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),t("Checkbox",{staticClass:"mb-20",attrs:{label:e.t("catalog.install.steps.helmCli.checkbox",{action:e.action,existing:!!e.existing})},model:{value:e.showCommandStep,callback:function(t){e.showCommandStep=t},expression:"showCommandStep"}}),e._v(" "),e.showCustomRegistry?t("Checkbox",{staticClass:"mb-20",attrs:{label:e.t("catalog.chart.registry.custom.checkBoxLabel"),tooltip:e.t("catalog.chart.registry.tooltip")},model:{value:e.showCustomRegistryInput,callback:function(t){e.showCustomRegistryInput=t},expression:"showCustomRegistryInput"}}):e._e(),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[e.showCustomRegistryInput?t("LabeledInput",{attrs:{"label-key":"catalog.chart.registry.custom.inputLabel","placeholder-key":"catalog.chart.registry.custom.placeholder","min-height":30},model:{value:e.customRegistrySetting,callback:function(t){e.customRegistrySetting=t},expression:"customRegistrySetting"}}):e._e()],1)]),e._v(" "),t("div",{staticClass:"step__values__controls--spacer",staticStyle:{flex:"1"}},[e._v("\n \n          ")]),e._v(" "),e.isNamespaceNew&&e.value.metadata.namespace.length?t("Banner",{attrs:{color:"info"}},[t("div",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("catalog.install.steps.basics.createNamespace",{namespace:e.value.metadata.namespace},!0),expression:"t('catalog.install.steps.basics.createNamespace', {namespace: value.metadata.namespace}, true) "}]})]):e._e()],1)]},proxy:!0},{key:"clusterTplVersion",fn:function(){return[t("Banner",{staticClass:"description",attrs:{color:"info"}},[e._v("\n          "+e._s(e.t("catalog.install.steps.clusterTplVersion.description"))+"\n        ")]),e._v(" "),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-4"},[e.chart?t("LabeledSelect",{attrs:{label:e.t("catalog.install.version"),value:e.query.versionName,options:e.filteredVersions,selectable:function(e){return!e.disabled}},on:{input:e.selectVersion}}):e._e()],1),e._v(" "),t("div",{staticClass:"step__values__controls--spacer"},[e._v("\n \n          ")]),e._v(" "),t("div",{staticClass:"btn-group"},[t("button",{staticClass:"btn bg-primary btn-sm",attrs:{type:"button",disabled:!e.hasReadme||e.showingReadmeWindow},on:{click:function(t){e.showSlideIn=!e.showSlideIn}}},[e._v("\n              "+e._s(e.t("catalog.install.steps.helmValues.chartInfo.button"))+"\n            ")])])])]},proxy:!0},{key:"helmValues",fn:function(){return[e.step2Description?t("Banner",{staticClass:"description",attrs:{color:"info"}},[e._v("\n          "+e._s(e.step2Description)+"\n        ")]):e._e(),e._v(" "),t("div",{staticClass:"step__values__controls"},[t("ButtonGroup",{attrs:{"data-testid":"btn-group-options-view",options:e.formYamlOptions,"inactive-class":"bg-disabled btn-sm","active-class":"bg-primary btn-sm",disabled:e.preFormYamlOption!=e.formYamlOption},model:{value:e.preFormYamlOption,callback:function(t){e.preFormYamlOption=t},expression:"preFormYamlOption"}}),e._v(" "),t("div",{staticClass:"step__values__controls--spacer"},[e._v("\n \n          ")]),e._v(" "),e.showDiff?t("ButtonGroup",{attrs:{options:e.yamlDiffModeOptions,"inactive-class":"bg-disabled btn-sm","active-class":"bg-primary btn-sm"},model:{value:e.diffMode,callback:function(t){e.diffMode=t},expression:"diffMode"}}):e._e(),e._v(" "),e.hasReadme&&!e.showingReadmeWindow?t("div",{staticClass:"btn-group"},[t("button",{staticClass:"btn bg-primary btn-sm",attrs:{type:"button"},on:{click:function(t){e.showSlideIn=!e.showSlideIn}}},[e._v("\n              "+e._s(e.t("catalog.install.steps.helmValues.chartInfo.button"))+"\n            ")])]):e._e()],1),e._v(" "),t("div",{staticClass:"scroll__container"},[t("div",{staticClass:"scroll__content"},[e.valuesComponent&&e.showValuesComponent?[e.componentHasTabs?t("Tabbed",{ref:"tabs",staticClass:"step__values__content",class:{"with-name":e.showNameEditor},attrs:{"side-tabs":!0,"hide-single-tab":!0},on:{changed:function(t){return e.tabChanged(t)}}},[t(e.valuesComponent,{tag:"component",staticClass:"step__values__content",attrs:{mode:e.mode,chart:e.chart,existing:e.existing,version:e.version,"version-info":e.versionInfo,"auto-install-info":e.autoInstallInfo},on:{warn:function(t){return e.errors.push(t)},"register-before-hook":e.registerBeforeHook,"register-after-hook":e.registerAfterHook,valid:function(t){return e.updateStepTwoReady(t)}},model:{value:e.chartValues,callback:function(t){e.chartValues=t},expression:"chartValues"}})],1):[e.valuesComponent?t(e.valuesComponent,{tag:"component",staticClass:"step__values__content",attrs:{mode:e.mode,chart:e.chart,existing:e.existing,version:e.version,"version-info":e.versionInfo,"auto-install-info":e.autoInstallInfo},on:{warn:function(t){return e.errors.push(t)},"register-before-hook":e.registerBeforeHook,"register-after-hook":e.registerAfterHook},model:{value:e.chartValues,callback:function(t){e.chartValues=t},expression:"chartValues"}}):e._e()]]:e.hasQuestions&&e.showQuestions?t("Tabbed",{ref:"tabs",staticClass:"step__values__content",class:{"with-name":e.showNameEditor},attrs:{"side-tabs":!0,"hide-single-tab":!0},on:{changed:function(t){return e.tabChanged(t)}}},[t("Questions",{attrs:{"in-store":e.inStore,mode:e.mode,source:e.versionInfo,"ignore-variables":e.ignoreVariables,tabbed:"multiple","target-namespace":e.targetNamespace},model:{value:e.chartValues,callback:function(t){e.chartValues=t},expression:"chartValues"}})],1):[t("YamlEditor",{ref:"yaml",staticClass:"step__values__content",attrs:{scrolling:!0,"initial-yaml-values":e.originalYamlValues,"editor-mode":e.editorMode,"hide-preview-buttons":!0},model:{value:e.valuesYaml,callback:function(t){e.valuesYaml=t},expression:"valuesYaml"}})]],2)]),e._v(" "),t("ResourceCancelModal",{ref:"cancelModal",attrs:{"is-cancel-modal":!1,"is-form":!0},on:{"cancel-cancel":function(t){e.preFormYamlOption=e.formYamlOption},"confirm-cancel":function(t){e.formYamlOption=e.preFormYamlOption}}})]},proxy:!0},{key:"helmCli",fn:function(){return[e.step3Description?t("Banner",{staticClass:"description",attrs:{color:"info"}},[e._v("\n          "+e._s(e.step3Description)+"\n        ")]):e._e(),e._v(" "),t("div",[e.existing?t("Checkbox",{attrs:{label:e.t("catalog.install.helm.cleanupOnFail")},model:{value:e.customCmdOpts.cleanupOnFail,callback:function(t){e.$set(e.customCmdOpts,"cleanupOnFail",t)},expression:"customCmdOpts.cleanupOnFail"}}):e._e()],1),e._v(" "),t("div",[e.existing?e._e():t("Checkbox",{attrs:{label:e.t("catalog.install.helm.crds")},model:{value:e.customCmdOpts.crds,callback:function(t){e.$set(e.customCmdOpts,"crds",t)},expression:"customCmdOpts.crds"}})],1),e._v(" "),t("div",[t("Checkbox",{attrs:{label:e.t("catalog.install.helm.hooks")},model:{value:e.customCmdOpts.hooks,callback:function(t){e.$set(e.customCmdOpts,"hooks",t)},expression:"customCmdOpts.hooks"}})],1),e._v(" "),t("div",[e.existing?t("Checkbox",{attrs:{label:e.t("catalog.install.helm.force")},model:{value:e.customCmdOpts.force,callback:function(t){e.$set(e.customCmdOpts,"force",t)},expression:"customCmdOpts.force"}}):e._e()],1),e._v(" "),t("div",[e.existing?t("Checkbox",{attrs:{label:e.t("catalog.install.helm.resetValues")},model:{value:e.customCmdOpts.resetValues,callback:function(t){e.$set(e.customCmdOpts,"resetValues",t)},expression:"customCmdOpts.resetValues"}}):e._e()],1),e._v(" "),t("div",[e.existing?e._e():t("Checkbox",{attrs:{label:e.t("catalog.install.helm.openapi")},model:{value:e.customCmdOpts.openApi,callback:function(t){e.$set(e.customCmdOpts,"openApi",t)},expression:"customCmdOpts.openApi"}})],1),e._v(" "),t("div",[t("Checkbox",{attrs:{label:e.t("catalog.install.helm.wait")},model:{value:e.customCmdOpts.wait,callback:function(t){e.$set(e.customCmdOpts,"wait",t)},expression:"customCmdOpts.wait"}})],1),e._v(" "),t("div",{staticClass:"mt-10",staticStyle:{display:"block","max-width":"400px"}},[t("UnitInput",{attrs:{label:e.t("catalog.install.helm.timeout.label"),suffix:e.t("catalog.install.helm.timeout.unit",{value:e.customCmdOpts.timeout})},model:{value:e.customCmdOpts.timeout,callback:function(t){e.$set(e.customCmdOpts,"timeout",e._n(t))},expression:"customCmdOpts.timeout"}})],1),e._v(" "),t("div",{staticClass:"mt-10",staticStyle:{display:"block","max-width":"400px"}},[e.existing?t("UnitInput",{attrs:{label:e.t("catalog.install.helm.historyMax.label"),suffix:e.t("catalog.install.helm.historyMax.unit",{value:e.customCmdOpts.historyMax})},model:{value:e.customCmdOpts.historyMax,callback:function(t){e.$set(e.customCmdOpts,"historyMax",e._n(t))},expression:"customCmdOpts.historyMax"}}):e._e()],1),e._v(" "),t("div",{staticClass:"mt-10",staticStyle:{display:"block","max-width":"400px"}},[t("LabeledInput",{attrs:{"label-key":"catalog.install.helm.description.label","placeholder-key":"catalog.install.helm.description.placeholder","min-height":30},model:{value:e.customCmdOpts.description,callback:function(t){e.$set(e.customCmdOpts,"description",t)},expression:"customCmdOpts.description"}})],1)]},proxy:!0}],null,!0)}):e._e(),e._v(" "),t("div",{staticClass:"slideIn",class:{hide:!1,slideIn__show:e.showSlideIn}},[t("h2",{staticClass:"slideIn__header"},[e._v("\n        "+e._s(e.t("catalog.install.steps.helmValues.chartInfo.label"))+"\n        "),t("div",{staticClass:"slideIn__header__buttons"},[t("div",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("catalog.install.slideIn.dock"),expression:"t('catalog.install.slideIn.dock')"}],staticClass:"slideIn__header__button",on:{click:function(t){e.showSlideIn=!1,e.showReadmeWindow()}}},[t("i",{staticClass:"icon icon-dock"})]),e._v(" "),t("div",{staticClass:"slideIn__header__button",on:{click:function(t){e.showSlideIn=!1}}},[t("i",{staticClass:"icon icon-close"})])])]),e._v(" "),e.hasReadme?t("ChartReadme",{staticClass:"chart-content__tabs",attrs:{"version-info":e.versionInfo}}):e._e()],1)],1)}),i=[],o=(a("e439"),a("dbb4"),a("fb6a"),a("a630"),a("d28b"),a("ade3")),r=a("1da1"),l=a("a34a"),c=a.n(l),u=(a("96cf"),a("caad"),a("2532"),a("b64b"),a("ac1f"),a("5319"),a("e260"),a("d3b7"),a("ddb0"),a("d81d"),a("4de4"),a("99af"),a("7db0"),a("4e82"),a("159b"),a("e6cf"),a("3ca3"),a("1276"),a("e2c1")),d=a("4245"),p=a.n(d),m=a("63ea"),h=a.n(m),v=a("e528"),f=a("c2de"),b=a("2f62"),g=a("bec1"),y=a("5557"),w=a("5fc0"),x=a("4de2"),_=a("a95f"),C=a("84d3"),O=a("669c"),k=a("bc1c"),I=a("c778"),N=a("fe5a"),V=a("4360"),R=a("19c1"),S=a("a4d2"),j=a("1599"),Y=a("8366"),D=a("8f23"),T=a("35f4"),E=a("2467"),L=a("ad3d"),F=a("a788"),P=a("fa3b"),$=a("7388"),A=a("4579"),M=a("de78"),U=function(e){var t={epinio:"global.rbac.pspEnabled",longhorn:"enablePSP","rancher-alerting-drivers":"global.cattle.psp.enabled",neuvector:"global.cattle.psp.enabled","prometheus-federator":"global.rbac.pspEnabled"},a=t[e.chart.name];return[a]},q=a("f303"),W=a("f6b5"),K=a.n(W),B=a("f29a"),G=a("5ce5"),H=a("c5b9");function z(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Q(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var s=0,n=function(){};return{s:n,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,r=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){r=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(r)throw i}}}}function Q(e,t){if(e){if("string"===typeof e)return J(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=e[a];return s}function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee={FORM:"FORM",YAML:"YAML",DIFF:"DIFF"};function te(e){return Object.keys(e).includes(P["q"])}var ae={name:"Install",layout:function(e){return te(e.query)?"plain":""},components:{Banner:g["a"],ButtonGroup:y["a"],ChartReadme:w["a"],Checkbox:x["a"],LabeledInput:C["a"],LabeledSelect:_["a"],LabeledTooltip:O["a"],LazyImage:k["a"],Loading:I["a"],NameNsDescription:N["a"],ResourceCancelModal:V["a"],Questions:R["a"],Tabbed:S["a"],UnitInput:j["a"],YamlEditor:Y["b"],Wizard:D["a"],TypeDescription:T["a"]},mixins:[L["c"],E["a"]],fetch:function(){var e=this;return Object(r["a"])(c.a.mark((function t(){var a,s,n,i,o,r,l,u,d,m,h,v,f,b,g,y,w,x,_,C,O,k,I,N,V,R,S,j;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.errors=[],t.prev=1,t.next=4,e.fetchChart();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.warn("Unable to fetch chart: ",t.t0);case 9:return t.prev=9,t.next=12,e.fetchAutoInstallInfo();case 12:t.next=17;break;case 14:t.prev=14,t.t1=t["catch"](9),console.warn("Unable to determine if other charts require install: ",t.t1);case 17:if(!e.showCustomRegistry){t.next=37;break}return t.prev=18,t.next=21,e.getClusterRegistry();case 21:e.clusterRegistry=t.sent,t.next=27;break;case 24:t.prev=24,t.t2=t["catch"](18),console.warn("Unable to get cluster registry: ",t.t2);case 27:return t.prev=27,t.next=30,e.getGlobalRegistry();case 30:e.globalRegistry=t.sent,t.next=36;break;case 33:t.prev=33,t.t3=t["catch"](27),console.warn("Unable to get global registry: ",t.t3);case 36:e.defaultRegistrySetting=e.clusterRegistry||e.globalRegistry;case 37:return t.prev=37,t.next=40,e.$store.dispatch("management/find",{type:F["F"].SETTING,id:H["c"].SERVER_URL});case 40:e.serverUrlSetting=t.sent,t.next=46;break;case 43:t.prev=43,t.t4=t["catch"](37),console.error("Unable to fetch `server-url` setting: ",t.t4);case 46:if(e.existing?(e.forceNamespace=e.existing.metadata.namespace,e.nameDisabled=!0):e.$route.query[P["j"]]===P["P"]?e.forceNamespace=F["m"]:null!==(a=e.chart)&&void 0!==a&&a.targetNamespace?e.forceNamespace=e.chart.targetNamespace:e.query.appNamespace?e.forceNamespace=e.query.appNamespace:e.forceNamespace=null,t.prev=47,!e.existing){t.next=54;break}return t.next=51,e.existing.deployedAsLegacy();case 51:t.t5=t.sent,t.next=55;break;case 54:t.t5=!1;case 55:e.legacyApp=t.t5,t.next=62;break;case 58:t.prev=58,t.t6=t["catch"](47),e.legacyApp=!1,console.warn("Unable to determine if existing install is a legacy app: ",t.t6);case 62:if(t.prev=62,!e.existing){t.next=69;break}return t.next=66,e.existing.deployedAsMultiCluster();case 66:t.t7=t.sent,t.next=70;break;case 69:t.t7=!1;case 70:e.mcapp=t.t7,t.next=77;break;case 73:t.prev=73,t.t8=t["catch"](62),e.mcapp=!1,console.warn("Unable to determine if existing install is a mc app: ",t.t8);case 77:return t.prev=77,t.next=80,e.$store.dispatch("cluster/create",{type:"chartInstallAction",metadata:{namespace:e.forceNamespace||e.$store.getters["defaultNamespace"],name:(null===(l=e.existing)||void 0===l||null===(u=l.spec)||void 0===u?void 0:u.name)||e.query.appName||""}});case 80:e.value=t.sent,t.next=87;break;case 83:return t.prev=83,t.t9=t["catch"](77),console.error("Unable to create object of type `chartInstallAction`: ",t.t9),t.abrupt("return");case 87:if(e.existing||(null!==(d=e.chart)&&void 0!==d&&d.targetName?(e.value.metadata.name=e.chart.targetName,e.nameDisabled=!0):e.query.appName?e.value.metadata.name=e.query.appName:e.nameDisabled=!1,e.query.description&&(e.customCmdOpts.description=e.query.description)),!e.forceNamespace||e.existing){t.next=99;break}return t.prev=89,t.next=92,e.$store.dispatch("cluster/find",{type:P["w"],id:e.forceNamespace});case 92:m=t.sent,v=null===(h=m.metadata.annotations)||void 0===h?void 0:h[$["y"]],v&&(e.project=v.replace(":","/")),t.next=99;break;case 97:t.prev=97,t.t10=t["catch"](89);case 99:if(e.chart&&e.query.versionName){t.next=101;break}return t.abrupt("return");case 101:if(!e.version){t.next=104;break}return t.next=104,e.loadValuesComponent();case 104:return t.next=106,e.loadChartSteps();case 106:e.loadedVersion&&e.loadedVersion===e.version.key||(e.loadedVersion?(e.showingYaml&&e.applyYamlToValues(),y=Object(M["diff"])(e.loadedVersionValues,e.chartValues)):y=e.existing?Object(M["clone"])((null===(w=e.existing.spec)||void 0===w?void 0:w.values)||{}):{},e.removeGlobalValuesFrom(y),e.chartValues=p()(p()({},(null===(f=e.versionInfo)||void 0===f?void 0:f.values)||{}),y),e.showCustomRegistry&&(j=(null===(x=e.chartValues)||void 0===x||null===(_=x.global)||void 0===_?void 0:_.systemDefaultRegistry)||(null===(C=e.chartValues)||void 0===C||null===(O=C.global)||void 0===O||null===(k=O.cattle)||void 0===k?void 0:k.systemDefaultRegistry),null===(I=e.chartValues)||void 0===I||(null===(N=I.global)||void 0===N||delete N.systemDefaultRegistry),null===(V=e.chartValues)||void 0===V||(null===(R=V.global)||void 0===R||(null===(S=R.cattle)||void 0===S||delete S.systemDefaultRegistry)),e.customRegistrySetting=j||e.defaultRegistrySetting,e.showCustomRegistryInput=!!e.customRegistrySetting),e.valuesYaml=Object(B["f"])(e.chartValues),e.loadedVersion||(e.originalYamlValues=e.valuesYaml),e.loadedVersionValues=(null===(b=e.versionInfo)||void 0===b?void 0:b.values)||{},e.loadedVersion=null===(g=e.version)||void 0===g?void 0:g.key),e.updateStepOneReady(),e.preFormYamlOption=e.valuesComponent||e.hasQuestions?ee.FORM:ee.YAML,e.migratedApp="true"===(null===(s=e.existing)||void 0===s||null===(n=s.spec)||void 0===n||null===(i=n.chart)||void 0===i||null===(o=i.metadata)||void 0===o||null===(r=o.annotations)||void 0===r?void 0:r[$["e"].MIGRATED]);case 110:case"end":return t.stop()}}),t,null,[[1,6],[9,14],[18,24],[27,33],[37,43],[47,58],[62,73],[77,83],[89,97]])})))()},data:function(){var e={cleanupOnFail:!1,crds:!0,hooks:!0,force:!1,resetValues:!1,openApi:!0,wait:!0,timeout:600,historyMax:5};return{defaultRegistrySetting:"",customRegistrySetting:"",serverUrlSetting:null,chartValues:null,clusterRegistry:"",originalYamlValues:null,previousYamlValues:null,errors:null,existing:null,globalRegistry:"",forceNamespace:null,loadedVersion:null,loadedVersionValues:null,legacyApp:null,mcapp:null,mode:null,value:null,valuesComponent:null,valuesYaml:"",project:null,migratedApp:!1,defaultCmdOpts:e,customCmdOpts:Z({},e),autoInstallInfo:[],nameDisabled:!1,preFormYamlOption:ee.YAML,formYamlOption:ee.YAML,showDiff:!1,showValuesComponent:!0,showQuestions:!0,showSlideIn:!1,shownReadmeWindows:[],componentHasTabs:!1,showCommandStep:!1,showCustomRegistryInput:!1,isNamespaceNew:!1,stepBasic:{name:"basics",label:this.t("catalog.install.steps.basics.label"),subtext:this.t("catalog.install.steps.basics.subtext"),descriptionKey:"catalog.install.steps.basics.description",ready:!0,weight:30},stepClusterTplVersion:{name:"clusterTplVersion",label:this.t("catalog.install.steps.clusterTplVersion.label"),subtext:this.t("catalog.install.steps.clusterTplVersion.subtext"),descriptionKey:"catalog.install.steps.helmValues.description",ready:!0,weight:30},stepValues:{name:"helmValues",label:this.t("catalog.install.steps.helmValues.label"),subtext:this.t("catalog.install.steps.helmValues.subtext"),descriptionKey:"catalog.install.steps.helmValues.description",ready:!0,weight:20},stepCommands:{name:"helmCli",label:this.t("catalog.install.steps.helmCli.label"),subtext:this.t("catalog.install.steps.helmCli.subtext"),descriptionKey:"catalog.install.steps.helmCli.description",ready:!0,weight:10},customSteps:[],isPlainLayout:te(this.$route.query),legacyDefs:{legacy:this.t("catalog.install.error.legacy.category.legacy"),mcm:this.t("catalog.install.error.legacy.category.mcm")}}},computed:Z(Z({},Object(b["c"])({inStore:"catalog/inStore",features:"features/get"})),{},{mcm:Object(f["mapFeature"])(f["MULTI_CLUSTER"]),ignoreVariables:function(){return U(this.versionInfo)},namespaceIsNew:function(){var e,t,a=this.$store.getters["cluster/all"](P["w"]),s=null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.namespace;return!!s&&!Object(q["e"])(a,"id",s)},showProject:function(){return this.isRancher&&!this.existing&&this.forceNamespace},projectOpts:function(){var e=this.currentCluster,t=this.$store.getters["management/all"](F["F"].PROJECT),a=t.filter((function(t){return t.spec.clusterName===(null===e||void 0===e?void 0:e.id)})).map((function(e){return{id:e.id,label:e.nameDisplay,value:e.id}}));return a.unshift({id:"none",label:"(".concat(this.t("generic.none"),")"),value:""}),a},charts:function(){for(var e,t=this,a=null===(e=this.existing)||void 0===e?void 0:e.matchingChart(!0),s=this.$store.getters["catalog/charts"].filter((function(e){return e.key===(null===a||void 0===a?void 0:a.key)||e.chartName===(null===a||void 0===a?void 0:a.chartName)||!(e.hidden&&!t.showHidden)&&!(e.deprecated&&!t.showDeprecated)})),n="",i=0;i<s.length;i++)s[i].repoName!==n&&(n=s[i].repoName,Object(q["g"])(s,i,{kind:"label",label:s[i].repoNameDisplay,disabled:!0}),i++);return s},showSelectVersionOrChart:function(){return this.existing||P["k"]in this.$route.query},showNameEditor:function(){return!this.nameDisabled||!this.forceNamespace},showVersions:function(){var e;return(null===(e=this.chart)||void 0===e?void 0:e.versions.length)>1},targetNamespace:function(){var e;return this.forceNamespace?this.forceNamespace:null!==(e=this.value)&&void 0!==e&&e.metadata.namespace?this.value.metadata.namespace:"default"},editorMode:function(){return this.showDiff?Y["a"].DIFF_CODE:Y["a"].EDIT_CODE},showingYaml:function(){return this.formYamlOption===ee.YAML||!this.valuesComponent&&!this.hasQuestions},showingYamlDiff:function(){return this.formYamlOption===ee.DIFF},formYamlOptions:function(){var e=[];return(this.valuesComponent||this.hasQuestions)&&e.push({labelKey:"catalog.install.section.chartOptions",value:ee.FORM}),e.push({labelKey:"catalog.install.section.valuesYaml",value:ee.YAML},{labelKey:"catalog.install.section.diff",value:ee.DIFF,disabled:this.formYamlOption===ee.FORM?this.originalYamlValues===u["a"].dump(this.chartValues||{}):this.originalYamlValues===this.valuesYaml}),e},yamlDiffModeOptions:function(){return[{labelKey:"resourceYaml.buttons.unified",value:"unified"},{labelKey:"resourceYaml.buttons.split",value:"split"}]},stepperName:function(){var e,t;return(null===(e=this.existing)||void 0===e?void 0:e.nameDisplay)||(null===(t=this.chart)||void 0===t?void 0:t.chartNameDisplay)},stepperSubtext:function(){return this.existing&&this.currentVersion!==this.targetVersion?"".concat(this.currentVersion," > ").concat(this.targetVersion):this.targetVersion},readmeWindowName:function(){var e;return"".concat(this.stepperName,"-").concat(null===(e=this.version)||void 0===e?void 0:e.version)},showingReadmeWindow:function(){return!!this.$store.getters["wm/byId"](this.readmeWindowName)},diffMode:Object(v["mapPref"])(v["DIFF"]),step1Description:function(){var e=this.steps.find((function(e){return"basics"===e.name})).descriptionKey;return this.$store.getters["i18n/withFallback"](e,{action:this.action,existing:!!this.existing},"")},step2Description:function(){var e=this.steps.find((function(e){return"helmValues"===e.name})).descriptionKey;return this.$store.getters["i18n/withFallback"](e,{action:this.action,existing:!!this.existing},"")},step3Description:function(){var e=this.steps.find((function(e){return"helmCli"===e.name})).descriptionKey;return this.$store.getters["i18n/withFallback"](e,{action:this.action,existing:!!this.existing},"")},steps:function(){var e,t,a,n=[],i=null===(e=this.version)||void 0===e||null===(t=e.annotations)||void 0===t?void 0:t[$["e"].TYPE];i===$["e"]._CLUSTER_TPL?((null===(a=this.filteredVersions)||void 0===a?void 0:a.length)>1&&n.push(this.stepClusterTplVersion),n.push(Z(Z({},this.stepValues),{},{label:this.t("catalog.install.steps.clusterTplValues.label"),subtext:this.t("catalog.install.steps.clusterTplValues.subtext"),descriptionKey:"catalog.install.steps.clusterTplValues.description"}))):n.push.apply(n,[this.stepBasic,this.stepValues].concat(Object(s["a"])(this.customSteps)));return this.showCommandStep&&n.push(this.stepCommands),n.sort((function(e,t){return(t.weight||0)-(e.weight||0)}))},cmdOptions:function(){return this.showCommandStep?this.customCmdOpts:this.defaultCmdOpts},namespaceNewAllowed:function(){return!this.existing&&!this.forceNamespace},legacyEnabled:function(){return this.features(f["LEGACY"])},legacyFeatureRoute:function(){return{name:"c-cluster-product-resource",params:{product:"settings",resource:"management.cattle.io.feature"}}},legacyAppRoute:function(){return{name:"c-cluster-legacy-project"}},windowsIncompatible:function(){var e;if(null!==(e=this.chart)&&void 0!==e&&e.windowsIncompatible)return this.t("catalog.charts.windowsIncompatible");if(this.versionInfo){var t,a,s,n=!((null===(t=this.versionInfo)||void 0===t||null===(a=t.chart)||void 0===a||null===(s=a.annotations)||void 0===s?void 0:s[$["e"].PERMITTED_OS])||G["LINUX"]).includes("windows");if(n&&!this.chart.windowsIncompatible)return this.t("catalog.charts.versionWindowsIncompatible")}return null},showCustomRegistry:function(){var e,t,a,s=(null===(e=this.versionInfo)||void 0===e||null===(t=e.values)||void 0===t?void 0:t.global)||{};return void 0!==s.systemDefaultRegistry||void 0!==(null===(a=s.cattle)||void 0===a?void 0:a.systemDefaultRegistry)}}),watch:{"$route.query":function(e,t){h()(e,t)||(this.$fetch(),this.showSlideIn=!1)},"value.metadata.namespace":function(e,t){if(e){var a,s=this.$store.getters["cluster/byId"](P["w"],this.value.metadata.namespace),n=null===s||void 0===s||null===(a=s.metadata.annotations)||void 0===a?void 0:a[$["y"]];n&&(this.project=n.replace(":","/"))}},preFormYamlOption:function(e,t){e===ee.FORM&&this.valuesYaml!==this.previousYamlValues&&this.$refs.cancelModal?this.$refs.cancelModal.show():this.formYamlOption=e},formYamlOption:function(e,t){switch(e){case ee.FORM:this.valuesYaml=this.previousYamlValues,this.showValuesComponent=!0,this.showQuestions=!0,this.showDiff=!1;break;case ee.YAML:t===ee.FORM&&(this.valuesYaml=u["a"].dump(this.chartValues||{}),this.previousYamlValues=this.valuesYaml),this.showValuesComponent=!1,this.showQuestions=!1,this.showDiff=!1;break;case ee.DIFF:t===ee.FORM&&(this.valuesYaml=u["a"].dump(this.chartValues||{}),this.previousYamlValues=this.valuesYaml),this.showValuesComponent=!1,this.showQuestions=!1,this.updateValue(this.valuesYaml),this.showDiff=!0;break}},requires:function(){this.updateStepOneReady()},warnings:function(){this.updateStepOneReady()}},mounted:function(){var e=this;return Object(r["a"])(c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadValuesComponent();case 2:return t.next=4,e.loadChartSteps();case 4:window.scrollTop=0,e.preFormYamlOption=e.valuesComponent||e.hasQuestions?ee.FORM:ee.YAML;case 6:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){var e=this;this.shownReadmeWindows.forEach((function(t){return e.$store.dispatch("wm/close",t,{root:!0})}))},methods:{getClusterRegistry:function(){var e=this;return Object(r["a"])(c.a.mark((function t(){var a,s,n,i,o,r,l,u,d,p,m,h;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.$store.getters["management/schemaFor"](F["e"].RANCHER_CLUSTER),!a){t.next=27;break}if(i=e.$store.getters["currentCluster"],o=null===i||void 0===i?void 0:i.provClusterId,t.prev=4,!o){t.next=11;break}return t.next=8,e.$store.dispatch("management/find",{type:F["e"].RANCHER_CLUSTER,id:o});case 8:t.t0=t.sent,t.next=12;break;case 11:t.t0={};case 12:r=t.t0,t.next=18;break;case 15:t.prev=15,t.t1=t["catch"](4),console.error("Unable to fetch prov cluster '".concat(o,"': "),t.t1);case 18:if(null===(s=r)||void 0===s||!s.isRke2){t.next=22;break}if(u=(null===(l=r.agentConfig)||void 0===l?void 0:l["system-default-registry"])||"",!u){t.next=22;break}return t.abrupt("return",u);case 22:if(null===(n=r)||void 0===n||!n.isRke1){t.next=27;break}if(m=null===i||void 0===i||null===(d=i.spec)||void 0===d||null===(p=d.rancherKubernetesEngineConfig)||void 0===p?void 0:p.privateRegistries,!((null===m||void 0===m?void 0:m.length)>0)){t.next=27;break}return h=m.find((function(e){return e.isDefault})),t.abrupt("return",h.url);case 27:case"end":return t.stop()}}),t,null,[[4,15]])})))()},getGlobalRegistry:function(){var e=this;return Object(r["a"])(c.a.mark((function t(){var a;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("management/find",{type:F["F"].SETTING,id:H["c"].SYSTEM_DEFAULT_REGISTRY});case 2:return a=t.sent,t.abrupt("return",a.value);case 4:case"end":return t.stop()}}),t)})))()},updateValue:function(e){this.$refs.yaml&&this.$refs.yaml.updateValue(e)},loadValuesComponent:function(){var e=this;return Object(r["a"])(c.a.mark((function t(){var a,s,n,i,o,r;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=null===(a=e.version)||void 0===a||null===(s=a.annotations)||void 0===s?void 0:s[$["e"].COMPONENT],!n){t.next=17;break}if(i=e.$store.getters["type-map/hasCustomChart"](n),!i){t.next=12;break}return e.valuesComponent=e.$store.getters["type-map/importChart"](n),t.next=7,e.valuesComponent();case 7:r=t.sent,e.showValuesComponent=!0,e.componentHasTabs=(null===r||void 0===r||null===(o=r.default)||void 0===o?void 0:o.hasTabs)||!1,t.next=15;break;case 12:e.valuesComponent=null,e.componentHasTabs=!1,e.showValuesComponent=!1;case 15:t.next=20;break;case 17:e.valuesComponent=null,e.componentHasTabs=!1,e.showValuesComponent=!1;case 20:case"end":return t.stop()}}),t)})))()},loadChartSteps:function(){var e=this;return Object(r["a"])(c.a.mark((function t(){var a,s,n,i;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=null===(a=e.version)||void 0===a||null===(s=a.annotations)||void 0===s?void 0:s[$["e"].COMPONENT],!n){t.next=8;break}return t.next=4,e.$store.getters["catalog/chartSteps"](n);case 4:return i=t.sent,t.next=7,Promise.all(i.map((function(t){return e.loadChartStep(t)})));case 7:e.customSteps=t.sent;case 8:case"end":return t.stop()}}),t)})))()},loadChartStep:function(e){var t=this;return Object(r["a"])(c.a.mark((function a(){var s,n,i,o,r;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.component();case 2:return o=a.sent,r=t.$store.getters["i18n/withFallback"],a.abrupt("return",{name:e.name,label:r(null===o||void 0===o||null===(s=o.default)||void 0===s?void 0:s.label,null,e.name),subtext:r(null===o||void 0===o||null===(n=o.default)||void 0===n?void 0:n.subtext,null,""),weight:null===o||void 0===o||null===(i=o.default)||void 0===i?void 0:i.weight,ready:!1,hidden:!0,loading:!0,component:e.component});case 5:case"end":return a.stop()}}),a)})))()},selectChart:function(e){var t;e&&this.$router.applyQuery((t={},Object(o["a"])(t,P["A"],e.repoName),Object(o["a"])(t,P["B"],e.repoType),Object(o["a"])(t,P["d"],e.chartName),Object(o["a"])(t,P["J"],e.versions[0].version),t))},cancel:function(){this.existing?this.done():this.$route.query[P["k"]]===P["P"]?this.$router.replace(this.clusterToolsLocation()):this.$route.query[P["j"]]===P["P"]?this.$router.replace(this.clustersLocation()):this.$router.replace(this.chartLocation(!1))},done:function(){this.$route.query[P["k"]]===P["P"]?this.$router.replace(this.clusterToolsLocation()):this.$route.query[P["j"]]===P["P"]?this.$router.replace(this.clustersLocation()):this.$router.replace(this.appLocation())},finish:function(e){var t=this;return Object(r["a"])(c.a.mark((function a(){var s,n,i,o,r,l;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,s=!!t.existing,t.errors=[],a.next=5,t.applyHooks(L["b"]);case 5:if(n=t.actionInput(s),i=n.errors,o=n.input,null===i||void 0===i||!i.length){a.next=10;break}return t.errors=i,e(!1),a.abrupt("return");case 10:return a.next=12,t.repo.doAction(s?"upgrade":"install",o);case 12:return r=a.sent,l="".concat(r.operationNamespace,"/").concat(r.operationName),a.next=16,t.repo.waitForOperation(l);case 16:return a.next=18,t.$store.dispatch("".concat(t.inStore,"/find"),{type:F["f"].OPERATION,id:l});case 18:return t.operation=a.sent,a.prev=19,a.next=22,t.operation.waitForLink("logs");case 22:t.operation.openLogs(),a.next=27;break;case 25:a.prev=25,a.t0=a["catch"](19);case 27:return a.next=29,t.applyHooks(L["a"]);case 29:e(!0),t.done(),a.next=37;break;case 33:a.prev=33,a.t1=a["catch"](0),t.errors=Object(A["d"])(a.t1),e(!1);case 37:case"end":return a.stop()}}),a,null,[[0,33],[19,25]])})))()},addGlobalValuesTo:function(e){var t,a,s,n,i,o,r,l,c=e.global;c||(c={},Object(M["set"])(e,"global",c));var u=c.cattle;u||(u={},Object(M["set"])(e.global,"cattle",u));var d=this.currentCluster,p=this.$store.getters["management/all"](F["F"].PROJECT),m=(null===(t=p.find((function(e){var t;return"System"===(null===(t=e.spec)||void 0===t?void 0:t.displayName)})))||void 0===t||null===(a=t.id)||void 0===a||null===(s=a.split("/"))||void 0===s?void 0:s[1])||"",h=(null===(n=this.serverUrlSetting)||void 0===n?void 0:n.value)||"",v=((null===d||void 0===d?void 0:d.workerOSs)||[]).includes(G["WINDOWS"]),f=(null===d||void 0===d||null===(i=d.spec)||void 0===i||null===(o=i.rancherKubernetesEngineConfig)||void 0===o?void 0:o.prefixPath)||"",b=(null===d||void 0===d||null===(r=d.spec)||void 0===r||null===(l=r.rancherKubernetesEngineConfig)||void 0===l?void 0:l.winPrefixPath)||"";return g(u,"clusterId",null===d||void 0===d?void 0:d.id),g(u,"clusterName",null===d||void 0===d?void 0:d.nameDisplay),this.showCustomRegistry&&(Object(M["set"])(u,"systemDefaultRegistry",this.customRegistrySetting),Object(M["set"])(c,"systemDefaultRegistry",this.customRegistrySetting)),g(c,"cattle.systemProjectId",m),g(u,"url",h),g(u,"rkePathPrefix",f),g(u,"rkeWindowsPathPrefix",b),v&&g(u,"windows.enabled",!0),e;function g(e,t,a){"undefined"===typeof Object(M["get"])(e,t)&&Object(M["set"])(e,t,a)}},removeGlobalValuesFrom:function(e){var t,a,s,n,i,o,r,l,c;if(e){var u=this.$store.getters["currentCluster"],d=(null===(t=this.serverUrlSetting)||void 0===t?void 0:t.value)||"",p=((null===u||void 0===u?void 0:u.workerOSs)||[]).includes(G["WINDOWS"]),m=(null===u||void 0===u||null===(a=u.spec)||void 0===a||null===(s=a.rancherKubernetesEngineConfig)||void 0===s?void 0:s.prefixPath)||"",h=(null===u||void 0===u||null===(n=u.spec)||void 0===n||null===(i=n.rancherKubernetesEngineConfig)||void 0===i?void 0:i.winPrefixPath)||"";return null!==(o=e.global)&&void 0!==o&&o.cattle&&(v(e.global.cattle,"clusterId",null===u||void 0===u?void 0:u.id),v(e.global.cattle,"clusterName",null===u||void 0===u?void 0:u.nameDisplay),v(e.global.cattle,"url",d),v(e.global.cattle,"rkePathPrefix",m),v(e.global.cattle,"rkeWindowsPathPrefix",h),p&&v(e.global.cattle.windows,"enabled",!0)),null!==(r=e.global)&&void 0!==r&&null!==(l=r.cattle)&&void 0!==l&&l.windows&&!Object.keys(e.global.cattle.windows).length&&delete e.global.cattle.windows,null!==(c=e.global)&&void 0!==c&&c.cattle&&!Object.keys(e.global.cattle).length&&delete e.global.cattle,Object.keys(e.global||{}).length||delete e.global,e}function v(e,t,a){Object(M["get"])(e,t)===a&&delete e[t]}},applyYamlToValues:function(){try{this.chartValues=u["a"].load(this.valuesYaml)}catch(e){return{errors:Object(A["d"])(e)}}return{errors:[]}},actionInput:function(e){var t,a,n,i,r,l=(null===(t=this.versionInfo)||void 0===t?void 0:t.values)||{},c=[];if(this.showingYaml||this.showingYamlDiff){var u=this.applyYamlToValues(),d=u.errors;c.push.apply(c,Object(s["a"])(d))}var p=Object(M["diff"])(l,this.chartValues);this.addGlobalValuesTo(p);var m=JSON.parse(JSON.stringify(this.value)),h=this.migratedApp?Object(o["a"])({},$["e"].MIGRATED,"true"):{},v={chartName:this.chart.chartName,version:(null===(a=this.version)||void 0===a?void 0:a.version)||this.query.versionName,releaseName:m.metadata.name,description:this.customCmdOpts.description,annotations:Z(Z({},h),{},(n={},Object(o["a"])(n,$["e"].SOURCE_REPO_TYPE,this.chart.repoType),Object(o["a"])(n,$["e"].SOURCE_REPO_NAME,this.chart.repoName),n)),values:p};e&&(v.resetValues=this.cmdOptions.resetValues);var f={charts:[v],noHooks:!1===this.cmdOptions.hooks,timeout:this.cmdOptions.timeout>0?"".concat(this.cmdOptions.timeout,"s"):null,wait:!0===this.cmdOptions.wait,namespace:m.metadata.namespace,projectId:this.project};e?(f.force=!0===this.cmdOptions.force,f.historyMax=this.cmdOptions.historyMax,f.cleanupOnFail=this.cmdOptions.cleanupOnFail):(f.disableOpenAPIValidation=!1===this.cmdOptions.openApi,f.skipCRDs=!1===this.cmdOptions.crds);var b,g=[],y=((null===(i=this.version)||void 0===i||null===(r=i.annotations)||void 0===r?void 0:r[$["e"].AUTO_INSTALL_GVK])||"").split(/\s*,\s*/).filter((function(e){return!!e})).reverse(),w=z(y);try{for(w.s();!(b=w.n()).done;){var x=b.value,_=this.$store.getters["catalog/versionProviding"]({gvr:x,repoName:this.chart.repoName,repoType:this.chart.repoType});_?g.push(_):c.push("This chart requires another chart that provides ".concat(x,", but none was was found"))}}catch(T){w.e(T)}finally{w.f()}var C,O=z(this.autoInstallInfo);try{for(O.s();!(C=O.n()).done;){var k=C.value,I=k.allValues,N=k.values,V=Object(M["diff"])(N,I),R=Z(Z({},V),{},{global:p.global});f.charts.unshift({chartName:k.chart.name,version:k.chart.version,releaseName:k.chart.annotations[$["e"].RELEASE_NAME]||v.name,projectId:this.project,values:R})}}catch(T){O.e(T)}finally{O.f()}for(var S=0,j=g;S<j.length;S++){var Y,D=j[S];f.charts.unshift({chartName:D.name,version:D.version,releaseName:D.annotations[$["e"].RELEASE_NAME]||D.name,projectId:this.project,values:this.addGlobalValuesTo({global:p.global}),annotations:Z(Z({},h),{},(Y={},Object(o["a"])(Y,$["e"].SOURCE_REPO_TYPE,D.repoType),Object(o["a"])(Y,$["e"].SOURCE_REPO_NAME,D.repoName),Y))})}return{errors:c,input:f}},tabChanged:function(){window.scrollTop=0},updateStepOneReady:function(){var e=!this.requires.length,t=!!this.chart;this.steps[0].ready=e&&t},updateStepTwoReady:function(e){this.updateStep("helmValues",{ready:e})},getOptionLabel:function(e){return null===e||void 0===e?void 0:e.chartNameDisplay},showReadmeWindow:function(){this.$store.dispatch("wm/open",{id:this.readmeWindowName,label:this.readmeWindowName,icon:"file",component:"ChartReadme",attrs:{versionInfo:this.versionInfo}},{root:!0}),this.shownReadmeWindows.push(this.readmeWindowName)},updateStep:function(e,t){var a=this.steps.find((function(t){return t.name===e}));if(a)for(var s in t)K.a.set(a,s,t[s])}}},se=ae,ne=(a("f561"),a("0c7c")),ie=Object(ne["a"])(se,n,i,!1,null,"ce349040",null);t["default"]=ie.exports},af61:function(e,t,a){var s=a("0237");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=a("499e").default;n("6bca2e07",s,!0,{sourceMap:!1,shadowMode:!1})},f561:function(e,t,a){"use strict";a("af61")}}]);
//# sourceMappingURL=chunk-14b72dac.0f4c2b54.js.map