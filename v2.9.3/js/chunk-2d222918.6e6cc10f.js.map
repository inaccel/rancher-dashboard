{"version":3,"sources":["webpack:///./shell/pages/c/_cluster/auth/config/index.vue","webpack:///shell/pages/c/_cluster/auth/config/index.vue","webpack:///./shell/pages/c/_cluster/auth/config/index.vue?1dac","webpack:///./shell/pages/c/_cluster/auth/config/index.vue?8cad"],"names":["render","_vm","this","_c","_self","$fetchState","pending","staticClass","_v","_s","displayName","enabled","length","_e","attrs","t","localUsersRoute","rows","colorFor","on","row","goTo","id","staticRenderFns","components","SelectIconGrid","Banner","Loading","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","authProvs","wrap","_context","prev","next","authProvidersInfo","$store","sent","enabledLocation","abrupt","$router","replace","$set","nonLocal","stop","data","resource","MANAGEMENT","AUTH_CONFIG","getters","inStore","hasListComponent","hasEditComponent","schema","concat","computed","sortBy","name","params","cluster","$route","product","USER","methods","types","idx","indexOf","configType","push","query","_defineProperty","MODE","_EDIT","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAQF,EAAII,YAAYC,QAASH,EAAG,WAAWA,EAAG,MAAM,CAACA,EAAG,KAAK,CAACI,YAAY,OAAO,CAACN,EAAIO,GAAG,SAASP,EAAIQ,GAAGR,EAAIS,aAAa,UAAUT,EAAIO,GAAG,KAAOP,EAAIU,QAAQC,OAAqYX,EAAIY,KAAjYV,EAAG,SAAS,CAACW,MAAM,CAAC,MAAQb,EAAIc,EAAE,0BAA0B,MAAQ,SAAS,CAACZ,EAAG,MAAM,CAACF,EAAIO,GAAG,WAAWP,EAAIQ,GAAGR,EAAIc,EAAE,4BAA4B,YAAYZ,EAAG,cAAc,CAACW,MAAM,CAAC,GAAKb,EAAIe,kBAAkB,CAACf,EAAIO,GAAG,aAAaP,EAAIQ,GAAGR,EAAIc,EAAE,2BAA2B,cAAcd,EAAIO,GAAG,KAAKL,EAAG,MAAMF,EAAIO,GAAG,WAAWP,EAAIQ,GAAGR,EAAIc,EAAE,2BAA2B,WAAW,KAAcd,EAAIO,GAAG,KAAKL,EAAG,iBAAiB,CAACW,MAAM,CAAC,KAAOb,EAAIgB,KAAK,YAAYhB,EAAIiB,SAAS,aAAa,YAAYC,GAAG,CAAC,QAAU,SAACC,GAAG,OAAKnB,EAAIoB,KAAKD,EAAIE,SAAQ,IAE9vBC,EAAkB,G,iKCOP,GACfC,WAAA,CACAC,sBAAAC,cAAAC,gBAGAC,MAAA,eAAAC,EAAA,YAAAC,eAAAC,IAAAC,MAAA,SAAAC,IAAA,IAAAC,EAAA,OAAAH,IAAAI,MAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACAC,eAAAV,EAAAW,QAAA,UAAAN,EAAAE,EAAAK,MAEAP,EAAAQ,gBAAA,CAAAN,EAAAE,KAAA,eAAAF,EAAAO,OAAA,SACAd,EAAAe,QAAAC,QAAAX,EAAAQ,kBAAA,OAGAb,EAAAiB,KAAAjB,EAAA,UAAAK,EAAAvB,SACAkB,EAAAiB,KAAAjB,EAAA,WAAAK,EAAAa,UAAA,wBAAAX,EAAAY,UAAAf,MARAH,IAWAmB,KAAA,WACA,IAAAC,EAAAC,OAAAC,YACAC,EAAA,KAAAb,OAAAa,QACAC,EAAAD,EAAA,gBAAAH,GACAK,EAAAF,EAAA,0BAAAH,GACAM,EAAAH,EAAA,0BAAAH,GACAO,EAAAJ,EAAA,GAAAK,OAAAJ,EAAA,eAAAJ,GAEA,OACAA,WACAO,SACAF,mBACAC,mBAGA7C,SAAA,EACAoC,SAAA,OAIAY,SAAA,CACA1C,KAAA,WACA,OAAA2C,eAAA,KAAAb,SAAA,8BAGArC,YAAA,WACA,YAAA8B,OAAAa,QAAA,0BAAAI,OAAA,IAGAzC,gBAAA,WACA,OACA6C,KAAA,6BACAC,OAAA,CACAC,QAAA,KAAAC,OAAAF,OAAAC,QAAAE,QAAA,OAAAf,SAAAC,OAAAe,SAMAC,QAAA,CACAjD,SAAA,SAAAE,GACA,IAAAgD,EAAA,+BAEAC,EAAAD,EAAAE,QAAAlD,EAAAmD,YAEA,WAAAF,EACA,SAGA,QAAAX,OAAAW,EAAA,IAGAhD,KAAA,SAAAC,GACA,KAAAsB,QAAA4B,KAAA,CACAX,KAAA,2BACAC,OAAA,CAAAxC,MACAmD,MAAAC,eAAA,GAAAC,OAAAC,aCjF2X,I,YCOvXC,EAAY,eACd,EACA7E,EACAuB,GACA,EACA,KACA,KACA,MAIa,aAAAsD,E","file":"js/chunk-2d222918.6e6cc10f.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.$fetchState.pending)?_c('Loading'):_c('div',[_c('h1',{staticClass:\"m-0\"},[_vm._v(\"\\n    \"+_vm._s(_vm.displayName)+\"\\n  \")]),_vm._v(\" \"),(!_vm.enabled.length)?_c('Banner',{attrs:{\"label\":_vm.t('authConfig.noneEnabled'),\"color\":\"info\"}},[_c('div',[_vm._v(\"\\n      \"+_vm._s(_vm.t('authConfig.localEnabled'))+\"\\n      \"),_c('router-link',{attrs:{\"to\":_vm.localUsersRoute}},[_vm._v(\"\\n        \"+_vm._s(_vm.t('authConfig.manageLocal'))+\"\\n      \")]),_vm._v(\" \"),_c('br'),_vm._v(\"\\n      \"+_vm._s(_vm.t('authConfig.noneEnabled'))+\"\\n    \")],1)]):_vm._e(),_vm._v(\" \"),_c('SelectIconGrid',{attrs:{\"rows\":_vm.rows,\"color-for\":_vm.colorFor,\"name-field\":\"provider\"},on:{\"clicked\":(row) => _vm.goTo(row.id)}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { MANAGEMENT } from '@shell/config/types';\nimport SelectIconGrid from '@shell/components/SelectIconGrid';\nimport { sortBy } from '@shell/utils/sort';\nimport { MODE, _EDIT } from '@shell/config/query-params';\nimport { authProvidersInfo } from '@shell/utils/auth';\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\n\nexport default {\n  components: {\n    SelectIconGrid, Banner, Loading\n  },\n\n  async fetch() {\n    const authProvs = await authProvidersInfo(this.$store);\n\n    if (!!authProvs.enabledLocation) {\n      return this.$router.replace(authProvs.enabledLocation);\n    }\n\n    this.$set(this, 'enabled', authProvs.enabled);\n    this.$set(this, 'nonLocal', authProvs.nonLocal);\n  },\n\n  data() {\n    const resource = MANAGEMENT.AUTH_CONFIG;\n    const getters = this.$store.getters;\n    const inStore = getters['currentStore'](resource);\n    const hasListComponent = getters['type-map/hasCustomList'](resource);\n    const hasEditComponent = getters['type-map/hasCustomEdit'](resource);\n    const schema = getters[`${ inStore }/schemaFor`](resource);\n\n    return {\n      resource,\n      schema,\n      hasListComponent,\n      hasEditComponent,\n\n      // Provided by fetch later\n      enabled:  false,\n      nonLocal: null,\n    };\n  },\n\n  computed: {\n    rows() {\n      return sortBy(this.nonLocal, ['sideLabel', 'nameDisplay']);\n    },\n\n    displayName() {\n      return this.$store.getters['type-map/labelFor'](this.schema, 2);\n    },\n\n    localUsersRoute() {\n      return {\n        name:   'c-cluster-product-resource',\n        params: {\n          cluster: this.$route.params.cluster, product: 'auth', resource: MANAGEMENT.USER\n        }\n      };\n    },\n  },\n\n  methods: {\n    colorFor(row) {\n      const types = ['ldap', 'oauth', 'saml', 'oidc'];\n\n      const idx = types.indexOf(row.configType);\n\n      if ( idx === -1 ) {\n        return 'color8';\n      }\n\n      return `color${ idx + 1 }`;\n    },\n\n    goTo(id) {\n      this.$router.push({\n        name:   'c-cluster-auth-config-id',\n        params: { id },\n        query:  { [MODE]: _EDIT }\n      });\n    },\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <h1 class=\"m-0\">\n      {{ displayName }}\n    </h1>\n    <Banner\n      v-if=\"!enabled.length\"\n      :label=\"t('authConfig.noneEnabled')\"\n      color=\"info\"\n    >\n      <div>\n        {{ t('authConfig.localEnabled') }}\n        <router-link :to=\"localUsersRoute\">\n          {{ t('authConfig.manageLocal') }}\n        </router-link>\n        <br>\n        {{ t('authConfig.noneEnabled') }}\n      </div>\n    </Banner>\n    <SelectIconGrid\n      :rows=\"rows\"\n      :color-for=\"colorFor\"\n      name-field=\"provider\"\n      @clicked=\"(row) => goTo(row.id)\"\n    />\n  </div>\n</template>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=670c6952&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}