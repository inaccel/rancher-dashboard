{"version":3,"sources":["webpack:///./shell/mixins/chart.js","webpack:///./shell/utils/install-redirect.js","webpack:///./shell/pages/c/_cluster/gatekeeper/index.vue","webpack:///shell/pages/c/_cluster/gatekeeper/index.vue","webpack:///./shell/pages/c/_cluster/gatekeeper/index.vue?8535","webpack:///./shell/pages/c/_cluster/gatekeeper/index.vue?3b45","webpack:///./shell/components/ChartHeading.vue","webpack:///shell/components/ChartHeading.vue","webpack:///./shell/components/ChartHeading.vue?bc19","webpack:///./shell/components/ChartHeading.vue?751a"],"names":["data","version","versionInfo","versionInfoError","existing","ignoreWarning","chart","computed","_objectSpread","mapGetters","showPreRelease","mapPref","SHOW_PRE_RELEASE","repo","this","$store","getters","repoType","query","repoName","showReadme","_this$versionInfo","readme","hasReadme","_this$versionInfo2","_this$versionInfo3","appReadme","mappedVersions","_this$chart","_this$currentCluster","_this","versions","selectedVersion","targetVersion","OSs","currentCluster","workerOSs","out","forEach","_version$annotations","nue","label","originalVersion","shortLabel","length","concat","slice","id","created","disabled","keywords","permittedSystems","annotations","CATALOG_ANNOTATIONS","PERMITTED_OS","LINUX","split","difference","t","ver","isPrerelease","push","selectedMatch","find","v","unshift","currentVersion","filteredVersions","filter","isPre","$route","REPO_TYPE","REPO","chartName","CHART","versionName","VERSION","appNamespace","NAMESPACE","appName","NAME","description","DESCRIPTION_QUERY","hidden","HIDDEN","deprecated","DEPRECATED_QUERY","showDeprecated","_FLAGGED","showHidden","warnings","_this$chart2","_this$version","_this$version$annotat","_this$version2","_this$version2$annota","_this$currentCluster2","_this$currentCluster3","needCpu","parseSi","REQUESTS_CPU","needMemory","REQUESTS_MEMORY","availableCpu","availableMemory","need","Math","round","have","formatSi","increment","suffix","firstSuffix","OPA_GATE_KEEPER_ID","upgradeAvailable","name","requires","_this$version3","_this$version3$annota","required","REQUIRES_GVK","x","reverse","_step","_iterator","_createForOfIteratorHelper","s","n","done","gvr","value","provider","url","$router","resolve","chartLocation","href","err","e","f","_this$existing","spec","metadata","action","isChartTargeted","_this$chart3","_this$chart4","targetNamespace","targetName","hasQuestions","questions","methods","fetchStoreChart","includeHidden","fetchChart","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this2$chart","_this2$chart2","_this2$chart$versions","firstRelease","wrap","_context","prev","next","dispatch","type","CATALOG","APP","sent","mode","_EDIT","t0","_CREATE","t1","abrupt","console","error","warn","t2","stop","fetchAutoInstallInfo","_this3","_callee2","_this3$version","_this3$version$annota","auto","_iterator2","_step2","constraint","crdVersionInfo","existingCRDApp","_crdVersionInfo$chart","_crdVersionInfo$chart2","_crdVersionInfo$chart3","_crdVersionInfo$chart4","_existingCRDApp$spec","_existingCRDApp$spec2","_existingCRDApp$spec3","existingValues","defaultValues","_context2","AUTO_INSTALL","chartVersion","RELEASE_NAME","clone","values","allValues","merge","errors","finish","$set","selectVersion","_ref","applyQuery","_defineProperty","_query","install","arguments","undefined","prov","params","cluster","product","appLocation","_this$existing2","detailLocation","resource","clusterToolsLocation","EXPLORER","clustersLocation","MANAGER","CAPI","RANCHER_CLUSTER","defaultResourceOrRoute","_middleware","_store$getters$curren","redirect","store","_typeof","middleware","_x","apply","render","_vm","_c","_self","attrs","_v","directives","rawName","expression","staticClass","headers","violations","staticRenderFns","components","ChartHeading","SortableTable","Banner","InstallRedirect","CHART_NAME","fetch","constraints","GATEKEEPER","SPOOFED","CONSTRAINT","map","i","constraintLink","text","nameDisplay","to","templateLink","kind","toLowerCase","count","totalViolations","ctx","CONSTRAINT_VIOLATION_CONSTRAINT_LINK","CONSTRAINT_VIOLATION_TEMPLATE_LINK","CONSTRAINT_VIOLATION_COUNT","component","_s","props","String"],"mappings":"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","file":"js/chunk-4587a69a.d215c781.js","sourcesContent":["\nimport { mapGetters } from 'vuex';\n\nimport {\n  REPO_TYPE, REPO, CHART, VERSION, NAMESPACE, NAME, DESCRIPTION as DESCRIPTION_QUERY, DEPRECATED as DEPRECATED_QUERY, HIDDEN, _FLAGGED, _CREATE, _EDIT\n} from '@shell/config/query-params';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport { SHOW_PRE_RELEASE, mapPref } from '@shell/store/prefs';\nimport { NAME as EXPLORER } from '@shell/config/product/explorer';\nimport { NAME as MANAGER } from '@shell/config/product/manager';\nimport { OPA_GATE_KEEPER_ID } from '@shell/pages/c/_cluster/gatekeeper/index.vue';\n\nimport { formatSi, parseSi } from '@shell/utils/units';\nimport { CAPI, CATALOG } from '@shell/config/types';\nimport { isPrerelease } from '@shell/utils/version';\nimport difference from 'lodash/difference';\nimport { LINUX } from '@shell/store/catalog';\nimport { clone } from '@shell/utils/object';\nimport { merge } from 'lodash';\n\nexport default {\n  data() {\n    return {\n      version:          null,\n      versionInfo:      null,\n      versionInfoError: null,\n      existing:         null,\n\n      ignoreWarning: false,\n\n      chart: null,\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster', 'isRancher']),\n\n    showPreRelease: mapPref(SHOW_PRE_RELEASE),\n\n    repo() {\n      return this.$store.getters['catalog/repo']({\n        repoType: this.query.repoType,\n        repoName: this.query.repoName,\n      });\n    },\n\n    showReadme() {\n      return !!this.versionInfo?.readme;\n    },\n\n    hasReadme() {\n      return !!this.versionInfo?.appReadme || !!this.versionInfo?.readme;\n    },\n\n    mappedVersions() {\n      const versions = this.chart?.versions || [];\n      const selectedVersion = this.targetVersion;\n      const OSs = this.currentCluster?.workerOSs;\n      const out = [];\n\n      versions.forEach((version) => {\n        const nue = {\n          label:           version.version,\n          version:         version.version,\n          originalVersion: version.version,\n          shortLabel:      version.version.length > 16 ? `${ version.version.slice(0, 15) }...` : version.version,\n          id:              version.version,\n          created:         version.created,\n          disabled:        false,\n          keywords:        version.keywords\n        };\n\n        const permittedSystems = (version?.annotations?.[CATALOG_ANNOTATIONS.PERMITTED_OS] || LINUX).split(',');\n\n        if (permittedSystems.length > 0 && difference(OSs, permittedSystems).length > 0) {\n          nue.disabled = true;\n        }\n        // if only one OS is allowed, show '<OS>-only' on hover\n        if (permittedSystems.length === 1) {\n          nue.label = this.t(`catalog.install.versions.${ permittedSystems[0] }`, { ver: version.version });\n        }\n\n        if (!this.showPreRelease && isPrerelease(version.version)) {\n          return;\n        }\n\n        out.push(nue);\n      });\n\n      const selectedMatch = out.find((v) => v.id === selectedVersion);\n\n      if (!selectedMatch) {\n        out.unshift({\n          label:           selectedVersion,\n          originalVersion: selectedVersion,\n          shortLabel:      selectedVersion.length > 16 ? `${ selectedVersion.slice(0, 15) }...` : selectedVersion,\n          id:              selectedVersion,\n          created:         null,\n          disabled:        false,\n          keywords:        []\n        });\n      }\n\n      const currentVersion = out.find((v) => v.originalVersion === this.currentVersion);\n\n      if (currentVersion) {\n        currentVersion.label = this.t('catalog.install.versions.current', { ver: this.currentVersion });\n      }\n\n      return out;\n    },\n\n    // Conditionally filter out prerelease versions of the chart.\n    filteredVersions() {\n      return this.showPreRelease ? this.mappedVersions : this.mappedVersions.filter((v) => !v.isPre);\n    },\n\n    query() {\n      const query = this.$route.query;\n\n      return {\n        repoType:     query[REPO_TYPE],\n        repoName:     query[REPO],\n        chartName:    query[CHART],\n        versionName:  query[VERSION],\n        appNamespace: query[NAMESPACE] || '',\n        appName:      query[NAME] || '',\n        description:  query[DESCRIPTION_QUERY],\n        hidden:       query[HIDDEN],\n        deprecated:   query[DEPRECATED_QUERY]\n      };\n    },\n\n    showDeprecated() {\n      return this.query.deprecated === 'true' || this.query.deprecated === _FLAGGED;\n    },\n\n    showHidden() {\n      return this.query.hidden === _FLAGGED;\n    },\n\n    // If the user is installing the app for the first time,\n    // warn them about CPU and memory requirements.\n    warnings() {\n      const warnings = [];\n\n      if ( this.existing ) {\n        // Ignore the limits on upgrade (or if asked by query) and don't show any warnings\n      } else {\n        // The UI will show warnings about CPU and memory if\n        // these annotations are added to Helm chart:\n        // - catalog.cattle.io/requests-cpu\n        // - catalog.cattle.io/requests-memory\n        const needCpu = parseSi(this.version?.annotations?.[CATALOG_ANNOTATIONS.REQUESTS_CPU] || '0');\n        const needMemory = parseSi(this.version?.annotations?.[CATALOG_ANNOTATIONS.REQUESTS_MEMORY] || '0');\n\n        // Note: These are null if unknown\n        const availableCpu = this.currentCluster?.availableCpu;\n        const availableMemory = this.currentCluster?.availableMemory;\n\n        if ( availableCpu !== null && availableCpu < needCpu ) {\n          warnings.push(this.t('catalog.install.error.insufficientCpu', {\n            need: Math.round(needCpu * 100) / 100,\n            have: Math.round(availableCpu * 100) / 100,\n          }));\n        }\n\n        if ( availableMemory !== null && availableMemory < needMemory ) {\n          warnings.push(this.t('catalog.install.error.insufficientMemory', {\n            need: formatSi(needMemory, {\n              increment: 1024, suffix: 'iB', firstSuffix: 'B'\n            }),\n            have: formatSi(availableMemory, {\n              increment: 1024, suffix: 'iB', firstSuffix: 'B'\n            }),\n          }));\n        }\n      }\n\n      if (this.chart?.id === OPA_GATE_KEEPER_ID) {\n        warnings.unshift(this.t('gatekeeperIndex.deprecated', {}, true));\n      }\n\n      if (this.existing && this.existing.upgradeAvailable === false) {\n        warnings.unshift(this.t('catalog.install.warning.managed', {\n          name:    this.existing.name,\n          version: this.chart ? this.query.versionName : null\n        }, true));\n      }\n\n      return warnings;\n    },\n\n    requires() {\n      const requires = [];\n\n      const required = (this.version?.annotations?.[CATALOG_ANNOTATIONS.REQUIRES_GVK] || '').split(/\\s*,\\s*/).filter((x) => !!x).reverse();\n\n      if ( required.length ) {\n        for ( const gvr of required ) {\n          if ( this.$store.getters['catalog/isInstalled']({ gvr }) ) {\n            continue;\n          }\n\n          const provider = this.provider(gvr);\n\n          if ( provider ) {\n            const url = this.$router.resolve(this.chartLocation(true, provider)).href;\n\n            requires.push(this.t('catalog.install.error.requiresFound', {\n              url,\n              name: provider.name\n            }, true));\n          } else {\n            requires.push(this.t('catalog.install.error.requiresMissing', { name: gvr }));\n          }\n        }\n      }\n\n      return requires;\n    },\n\n    currentVersion() {\n      return this.existing?.spec.chart.metadata.version;\n    },\n\n    targetVersion() {\n      return this.version ? this.version.version : this.query.versionName;\n    },\n\n    action() {\n      if (this.existing) {\n        return this.currentVersion === this.targetVersion ? 'update' : 'upgrade';\n      }\n\n      return 'install';\n    },\n\n    isChartTargeted() {\n      return this.chart?.targetNamespace && this.chart?.targetName;\n    },\n\n    hasQuestions() {\n      return this.versionInfo && !!this.versionInfo.questions;\n    },\n  },\n\n  methods: {\n    /**\n     * Populate `this.chart`\n     *\n     * `chart` used to be a computed property pointing at getter catalog/chart\n     *\n     * this however stopped recalculating given changes to the store\n     *\n     * (the store would populate a charts collection, which the getter uses to find the chart,\n     * however this did not kick off the computed property, so this.charts was not populated)\n     *\n     * Now we find and cache the chart\n     */\n    fetchStoreChart() {\n      if (!this.chart && this.repo && this.query.chartName) {\n        this.chart = this.$store.getters['catalog/chart']({\n          repoType:       this.query.repoType,\n          repoName:       this.query.repoName,\n          chartName:      this.query.chartName,\n          includeHidden:  true,\n          showDeprecated: this.showDeprecated\n        });\n      }\n\n      return this.chart;\n    },\n\n    async fetchChart() {\n      this.versionInfoError = null;\n\n      await this.$store.dispatch('catalog/load'); // not the problem\n\n      this.fetchStoreChart();\n\n      if ( this.query.appNamespace && this.query.appName ) {\n        // First check the URL query for an app name and namespace.\n        // Use those values to check for a catalog app resource.\n        // If found, set the form to edit mode. If not, set the\n        // form to create mode.\n\n        try {\n          this.existing = await this.$store.dispatch('cluster/find', {\n            type: CATALOG.APP,\n            id:   `${ this.query.appNamespace }/${ this.query.appName }`,\n          });\n\n          this.mode = _EDIT;\n        } catch (e) {\n          this.mode = _CREATE;\n          this.existing = null;\n        }\n      } else if ( this.chart?.targetNamespace && this.chart?.targetName ) {\n        // If the app name and namespace values are not provided in the\n        // query, fall back on target values defined in the Helm chart itself.\n\n        // Ask to install a special chart with fixed namespace/name\n        // or edit it if there's an existing install.\n\n        try {\n          this.existing = await this.$store.dispatch('cluster/find', {\n            type: CATALOG.APP,\n            id:   `${ this.chart.targetNamespace }/${ this.chart.targetName }`,\n          });\n          this.mode = _EDIT;\n        } catch (e) {\n          this.mode = _CREATE;\n          this.existing = null;\n        }\n      } else {\n        // Regular create\n\n        this.mode = _CREATE;\n      }\n\n      if ( !this.chart ) {\n        return;\n      }\n\n      // If no version is given in the URL query,\n      // use the first version provided by the Helm chart\n      // as the default.\n      if ( !this.query.versionName && this.chart.versions?.length ) {\n        if (this.showPreRelease) {\n          this.query.versionName = this.chart.versions[0].version;\n        } else {\n          const firstRelease = this.chart.versions.find((v) => !isPrerelease(v.version));\n\n          this.query.versionName = firstRelease?.version || this.chart.versions[0].version;\n        }\n      }\n\n      if ( !this.query.versionName ) {\n        return;\n      }\n\n      try {\n        this.version = this.$store.getters['catalog/version']({\n          repoType:    this.query.repoType,\n          repoName:    this.query.repoName,\n          chartName:   this.query.chartName,\n          versionName: this.query.versionName\n        });\n      } catch (e) {\n        console.error('Unable to fetch Version: ', e); // eslint-disable-line no-console\n      }\n      if (!this.version) {\n        console.warn('No version found: ', this.query.repoType, this.query.repoName, this.query.chartName, this.query.versionName);// eslint-disable-line no-console\n      }\n\n      try {\n        this.versionInfo = await this.$store.dispatch('catalog/getVersionInfo', {\n          repoType:    this.query.repoType,\n          repoName:    this.query.repoName,\n          chartName:   this.query.chartName,\n          versionName: this.query.versionName\n        });\n        // Here we set us versionInfo. The returned\n        // object contains everything all info\n        // about a currently installed app, and it has the\n        // following keys:\n        //\n        // - appReadme: A short overview of what the app does. This\n        //   forms the first few paragraphs of the chart info when\n        //   you install a Helm chart app through Rancher.\n        // - chart: Metadata about the Helm chart, including the\n        //   name and version.\n        // - readme: This is more detailed information that appears\n        //   under the heading \"Chart Information (Helm README)\" when\n        //   you install or upgrade a Helm chart app through Rancher,\n        //   below the app README.\n        // - values: All Helm chart values for the currently installed\n        //   app.\n      } catch (e) {\n        this.versionInfoError = e;\n\n        console.error('Unable to fetch VersionInfo: ', e); // eslint-disable-line no-console\n      }\n    }, // End of fetchChart\n\n    // Charts have an annotation that specifies any additional charts that should be installed at the same time eg CRDs\n    async fetchAutoInstallInfo() {\n      const out = [];\n      /*\n        An example value for auto is [\"rancher-monitoring-crd=match\"].\n        It is an array of chart names that lets Rancher know of other\n        charts that should be auto-installed at the same time.\n      */\n      const auto = (this.version?.annotations?.[CATALOG_ANNOTATIONS.AUTO_INSTALL] || '').split(/\\s*,\\s*/).filter((x) => !!x).reverse();\n\n      for ( const constraint of auto ) {\n        const provider = this.$store.getters['catalog/versionSatisfying']({\n          constraint,\n          repoName:     this.chart.repoName,\n          repoType:     this.chart.repoType,\n          chartVersion: this.version.version,\n        });\n        /* An example return value for \"provider\":\n          [\n              {\n                  \"name\": \"rancher-monitoring-crd\",\n                  \"version\": \"100.1.3+up19.0.3\",\n                  \"description\": \"Installs the CRDs for rancher-monitoring.\",\n                  \"apiVersion\": \"v1\",\n                  \"annotations\": {\n                      \"catalog.cattle.io/certified\": \"rancher\",\n                      \"catalog.cattle.io/hidden\": \"true\",\n                      \"catalog.cattle.io/namespace\": \"cattle-monitoring-system\",\n                      \"catalog.cattle.io/release-name\": \"rancher-monitoring-crd\"\n                  },\n                  \"type\": \"application\",\n                  \"urls\": [\n                      \"https://192.168.0.18:8005/k8s/clusters/c-m-hhpg69fv/v1/catalog.cattle.io.clusterrepos/rancher-charts?chartName=rancher-monitoring-crd&link=chart&version=100.1.3%2Bup19.0.3\"\n                  ],\n                  \"created\": \"2022-04-27T10:04:18.343124-07:00\",\n                  \"digest\": \"ecf07ba23a9cdaa7ffbbb14345d94ea1240b7f3b8e0ce9be4640e3e585c484e2\",\n                  \"key\": \"cluster/rancher-charts/rancher-monitoring-crd/100.1.3+up19.0.3\",\n                  \"repoType\": \"cluster\",\n                  \"repoName\": \"rancher-charts\"\n              }\n          ]\n          */\n\n        if ( provider ) {\n          try {\n            const crdVersionInfo = await this.$store.dispatch('catalog/getVersionInfo', {\n              repoType:    provider.repoType,\n              repoName:    provider.repoName,\n              chartName:   provider.name,\n              versionName: provider.version\n            });\n            let existingCRDApp;\n\n            // search for an existing crd app to track any non-default values used on the previous install/upgrade\n            if (this.mode === _EDIT) {\n              const targetNamespace = crdVersionInfo?.chart?.annotations?.[CATALOG_ANNOTATIONS.NAMESPACE];\n              const targetName = crdVersionInfo?.chart?.annotations?.[CATALOG_ANNOTATIONS.RELEASE_NAME];\n\n              if (targetName && targetNamespace) {\n                existingCRDApp = await this.$store.dispatch('cluster/find', {\n                  type: CATALOG.APP,\n                  id:   `${ targetNamespace }/${ targetName }`,\n                });\n              }\n            }\n            if (existingCRDApp) {\n              // spec.values are any non-default values the user configured\n              // the installation form should show these, as well as any default values from the chart\n              const existingValues = clone(existingCRDApp.spec?.values || {});\n              const defaultValues = clone(existingCRDApp.spec?.chart?.values || {});\n\n              crdVersionInfo.existingValues = existingValues;\n              crdVersionInfo.allValues = merge(defaultValues, existingValues);\n            } else {\n              // allValues will potentially be updated in the UI - we want to track this separately from values to avoid mutating the chart object in the store\n              // this is similar to userValues for the main chart\n              crdVersionInfo.allValues = clone(crdVersionInfo.values);\n            }\n\n            out.push(crdVersionInfo);\n          } catch (e) {\n            console.error('Unable to fetch VersionInfo: ', e); // eslint-disable-line no-console\n          }\n        } else {\n          this.errors.push(`This chart requires ${ constraint } but no matching chart was found`);\n        }\n      }\n\n      this.$set(this, 'autoInstallInfo', out);\n    },\n\n    selectVersion({ id: version }) {\n      this.$router.applyQuery({ [VERSION]: version });\n    },\n\n    provider(gvr) {\n      return this.$store.getters['catalog/versionProviding']({\n        gvr,\n        repoName: this.chart.repoName,\n        repoType: this.chart.repoType\n      });\n    },\n\n    /**\n     * Location of chart install or details page for either the current chart or from gvr\n     */\n    chartLocation(install = false, prov) {\n      const provider = prov || {\n        repoType: this.chart.repoType,\n        repoName: this.chart.repoName,\n        name:     this.chart.chartName,\n        version:  this.query.versionName,\n      };\n\n      return {\n        name:   install ? 'c-cluster-apps-charts-install' : 'c-cluster-apps-charts-chart',\n        params: {\n          cluster: this.$route.params.cluster,\n          product: this.$store.getters['productId'],\n        },\n        query: {\n          [REPO_TYPE]: provider.repoType,\n          [REPO]:      provider.repoName,\n          [CHART]:     provider.name,\n          [VERSION]:   provider.version,\n        }\n      };\n    },\n\n    appLocation() {\n      return this.existing?.detailLocation || {\n        name:   `c-cluster-product-resource`,\n        params: {\n          product:  this.$store.getters['productId'],\n          cluster:  this.$store.getters['clusterId'],\n          resource: CATALOG.APP,\n        }\n      };\n    },\n\n    clusterToolsLocation() {\n      return {\n        name:   `c-cluster-explorer-tools`,\n        params: {\n          product:  EXPLORER,\n          cluster:  this.$store.getters['clusterId'],\n          resource: CATALOG.APP,\n        }\n      };\n    },\n\n    clustersLocation() {\n      return {\n        name:   'c-cluster-product-resource',\n        params: {\n          cluster:  this.$route.params.cluster,\n          product:  MANAGER,\n          resource: CAPI.RANCHER_CLUSTER,\n        },\n      };\n    }\n  },\n\n};\n","import { REPO_TYPE, REPO, CHART, VERSION } from '@shell/config/query-params';\n\nexport default function(product, chartName, defaultResourceOrRoute, install = true) {\n  return async function middleware({ redirect, store } ) {\n    const cluster = store.getters['currentCluster']?.id || 'local';\n\n    if ( store.getters['type-map/isProductActive'](product) ) {\n      // If the product is installed and there's a default resource, redirect there\n\n      if ( defaultResourceOrRoute ) {\n        if ( typeof defaultResourceOrRoute === 'object' ) {\n          return redirect(defaultResourceOrRoute);\n        }\n\n        return redirect({\n          name:   'c-cluster-product-resource',\n          params: {\n            cluster,\n            product,\n            resource: defaultResourceOrRoute\n          },\n        });\n      }\n\n      // Otherwise just let the middleware pass through\n    } else if (install) {\n      // The product is not installed, redirect to the details chart\n\n      await store.dispatch('catalog/load');\n\n      const chart = store.getters['catalog/chart']({ chartName });\n\n      if ( chart ) {\n        return redirect({\n          name:   'c-cluster-apps-charts-chart',\n          params: { cluster },\n          query:  {\n            [REPO_TYPE]: chart.repoType,\n            [REPO]:      chart.repoName,\n            [CHART]:     chart.chartName,\n            [VERSION]:   chart.versions[0].version\n          },\n        });\n      } else {\n        // The chart's not available\n        store.dispatch('loadingError', `Chart not found for ${ product }`);\n      }\n    } else {\n      return redirect({\n        name:   'c-cluster-explorer',\n        params: { cluster },\n      });\n    }\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('ChartHeading',{attrs:{\"label\":_vm.t('gatekeeperIndex.poweredBy'),\"url\":\"https://github.com/open-policy-agent/gatekeeper\"}}),_vm._v(\" \"),_c('Banner',{attrs:{\"color\":\"warning\"}},[_c('span',{directives:[{name:\"clean-html\",rawName:\"v-clean-html\",value:(_vm.t('gatekeeperIndex.deprecated', {}, true)),expression:\"t('gatekeeperIndex.deprecated', {}, true)\"}]})]),_vm._v(\" \"),_c('div',{staticClass:\"spacer\"}),_vm._v(\" \"),_c('div',{staticClass:\"mb-10\"},[_c('h2',[_c('t',{attrs:{\"k\":\"gatekeeperIndex.violations\"}})],1)]),_vm._v(\" \"),_c('div',[_c('SortableTable',{attrs:{\"headers\":_vm.headers,\"rows\":_vm.violations,\"search\":false,\"table-actions\":false,\"row-actions\":false,\"paging\":true,\"rows-per-page\":10,\"key-field\":\"id\",\"group-by\":\"templateLink.text\"}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { NAME, CHART_NAME } from '@shell/config/product/gatekeeper';\nimport InstallRedirect from '@shell/utils/install-redirect';\nimport ChartHeading from '@shell/components/ChartHeading';\nimport SortableTable from '@shell/components/SortableTable';\nimport { Banner } from '@components/Banner';\nimport { CONSTRAINT_VIOLATION_CONSTRAINT_LINK, CONSTRAINT_VIOLATION_COUNT, CONSTRAINT_VIOLATION_TEMPLATE_LINK } from '@shell/config/table-headers';\nimport { GATEKEEPER } from '@shell/config/types';\n\nexport const OPA_GATE_KEEPER_ID = 'cluster/rancher-charts/rancher-gatekeeper';\n\nexport default {\n  components: {\n    ChartHeading, SortableTable, Banner\n  },\n  middleware: InstallRedirect(NAME, CHART_NAME),\n  async fetch() {\n    const constraints = this.constraint ? [this.constraint] : await this.$store.dispatch('cluster/findAll', { type: GATEKEEPER.SPOOFED.CONSTRAINT });\n\n    this.violations = constraints\n      .map((constraint, i) => ({\n        id:             i,\n        constraintLink: {\n          text: constraint.nameDisplay,\n          to:   constraint.detailLocation\n        },\n        templateLink: {\n          text: constraint.kind,\n          to:   {\n            name:   'c-cluster-product-resource-id',\n            params: {\n              resource: 'templates.gatekeeper.sh.constrainttemplate', id: constraint.kind.toLowerCase(), product: 'gatekeeper'\n            }\n          }\n        },\n        count: constraint.totalViolations\n      }));\n  },\n  data(ctx) {\n    return {\n      headers: [\n        CONSTRAINT_VIOLATION_CONSTRAINT_LINK,\n        CONSTRAINT_VIOLATION_TEMPLATE_LINK,\n        CONSTRAINT_VIOLATION_COUNT\n      ],\n      violations: []\n    };\n  }\n};\n</script>\n\n<template>\n  <div>\n    <ChartHeading\n      :label=\"t('gatekeeperIndex.poweredBy')\"\n      url=\"https://github.com/open-policy-agent/gatekeeper\"\n    />\n    <Banner color=\"warning\">\n      <span v-clean-html=\"t('gatekeeperIndex.deprecated', {}, true)\" />\n    </Banner>\n    <div class=\"spacer\" />\n    <div class=\"mb-10\">\n      <h2><t k=\"gatekeeperIndex.violations\" /></h2>\n    </div>\n    <div>\n      <SortableTable\n        :headers=\"headers\"\n        :rows=\"violations\"\n        :search=\"false\"\n        :table-actions=\"false\"\n        :row-actions=\"false\"\n        :paging=\"true\"\n        :rows-per-page=\"10\"\n        key-field=\"id\"\n        group-by=\"templateLink.text\"\n      />\n    </div>\n  </div>\n</template>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3e43a7a2&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chart-heading\"},[_c('h1',[_vm._v(_vm._s(_vm.t('chartHeading.overview')))]),_vm._v(\"\\n  \"+_vm._s(_vm.t('chartHeading.poweredBy'))+\" \"),_c('a',{attrs:{\"href\":_vm.url,\"rel\":\"nofollow noopener noreferrer\",\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.label))])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  props: {\n    label: {\n      type:     String,\n      required: true\n    },\n    url: {\n      type:     String,\n      required: true\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"chart-heading\">\n    <h1>{{ t('chartHeading.overview') }}</h1>\n    {{ t('chartHeading.poweredBy') }} <a\n      :href=\"url\"\n      rel=\"nofollow noopener noreferrer\"\n      target=\"_blank\"\n    >{{ label }}</a>\n  </div>\n</template>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartHeading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartHeading.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartHeading.vue?vue&type=template&id=3fa1a3e2&\"\nimport script from \"./ChartHeading.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartHeading.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}