(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b51f6f4"],{"2c74":function(e,t,a){var s=a("cb6b");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var o=a("499e").default;o("45ab54c0",s,!0,{sourceMap:!1,shadowMode:!1})},"6c3b":function(e,t,a){var s=a("ae9a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var o=a("499e").default;o("c8835e10",s,!0,{sourceMap:!1,shadowMode:!1})},7326:function(e,t,a){"use strict";a("2c74")},"92da":function(e,t,a){var s=a("4bad");t=s(!1),t.push([e.i,".collapsible-card[data-v-1e5e5c84]{min-width:570px;border-radius:5px;border:1px solid var(--sortable-table-top-divider)}.collapsible-card.isCollapsed .collapsible-card-header[data-v-1e5e5c84]{border-bottom:none}.collapsible-card.isCollapsed .collapsible-card-body[data-v-1e5e5c84]{visibility:hidden;display:none}.collapsible-card-header[data-v-1e5e5c84]{background-color:var(--sortable-table-header-bg);border-bottom:1px solid var(--sortable-table-top-divider);border-top-left-radius:5px;border-top-right-radius:5px;padding:20px;justify-content:space-between;cursor:pointer}.collapsible-card-header[data-v-1e5e5c84],.collapsible-card-header h2[data-v-1e5e5c84]{display:flex;align-items:center}.collapsible-card-header h2 span.isTitleClickable[data-v-1e5e5c84]:hover{text-decoration:underline}.collapsible-card-header>div[data-v-1e5e5c84]{display:flex;justify-content:space-between;align-items:center}.collapsible-card-collapse-icon[data-v-1e5e5c84]{color:#b7b8bb}.collapsible-card-body[data-v-1e5e5c84]{padding:20px;transition:all .25s ease-in-out;visibility:visible;display:block}",""]),e.exports=t},9831:function(e,t,a){"use strict";a("6c3b")},ae9a:function(e,t,a){var s=a("4bad");t=s(!1),t.push([e.i,".fleet-dashboard[data-v-d3781216]{min-height:100vh}.fleet-empty-dashboard[data-v-d3781216]{flex:1;display:flex;align-items:center;justify-content:center;flex-direction:column;min-height:100%}.fleet-empty-dashboard .icon-fleet[data-v-d3781216]{font-size:100px;color:var(--disabled-text)}.fleet-empty-dashboard>p>span[data-v-d3781216]{color:var(--disabled-text)}.fleet-dashboard-data .title[data-v-d3781216]{justify-content:space-between;min-height:48px}.fleet-dashboard-data .title[data-v-d3781216],.fleet-dashboard-data .title>div[data-v-d3781216]{display:flex;align-items:center}.fleet-dashboard-data .title>div p[data-v-d3781216]{color:var(--primary)}.fleet-dashboard-data .title>div p[data-v-d3781216]:hover{text-decoration:underline;cursor:pointer}.fleet-dashboard-data .title-footnote[data-v-d3781216]{display:flex;align-items:center;color:var(--darker)}.fleet-dashboard-data .header-icons[data-v-d3781216]{display:flex;align-items:center}.fleet-dashboard-data .header-icons p[data-v-d3781216]{margin-right:30px;display:flex;align-items:center}.fleet-dashboard-data .header-icons p>span[data-v-d3781216]{color:var(--disabled-text)}.fleet-dashboard-data .header-icons p>span>span[data-v-d3781216]{color:var(--body-text)}.fleet-dashboard-data .header-icons p i[data-v-d3781216]{color:var(--disabled-text);font-size:20px;margin-right:10px}",""]),e.exports=t},c453:function(e,t,a){"use strict";a("e19f")},cb6b:function(e,t,a){var s=a("4bad");t=s(!1),t.push([e.i,".compound-cluster-badge[data-v-fa6a8f44]{padding:4px 12px;border-radius:16px;display:flex;align-items:center;width:-moz-fit-content;width:fit-content;cursor:default}.compound-cluster-badge i[data-v-fa6a8f44]{font-size:16px;margin-right:6px}",""]),e.exports=t},cc85:function(e,t,a){"use strict";a.r(t);a("99af");var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"fleet-dashboard"},[e.$fetchState.pending?t("Loading"):e.fleetWorkspacesData.length?e.gitRepos.length?t("div",{staticClass:"fleet-dashboard-data"},[t("div",{staticClass:"title"},[t("h1",[t("t",{attrs:{k:"fleet.dashboard.pageTitle"}})],1),e._v(" "),t("div",[e.areAllCardsExpanded?t("p",{on:{click:function(t){return e.toggleAll("collapse")}}},[e._v("\n          "+e._s(e.t("fleet.dashboard.collapseAll"))+"\n        ")]):t("p",{on:{click:function(t){return e.toggleAll("expand")}}},[e._v("\n          "+e._s(e.t("fleet.dashboard.expandAll"))+"\n        ")])])]),e._v(" "),e.emptyWorkspaces.length?t("div",{staticClass:"title-footnote"},[t("p",[e._v(e._s(e.t("fleet.dashboard.thereIsMore",{count:e.emptyWorkspaces.length}))+": ")]),e._v(" "),e._l(e.emptyWorkspaces,(function(a,s){return t("p",{key:s},[e._v("\n        "+e._s(a.nameDisplay)),s!=e.emptyWorkspaces.length-1?t("span",[e._v(", ")]):e._e()])}))],2):e._e(),e._v(" "),e._l(e.workspacesData,(function(a){return t("CollapsibleCard",{key:a.id,staticClass:"mt-20 mb-40",attrs:{title:"".concat(e.t("resourceDetail.masthead.workspace"),": ").concat(a.nameDisplay),"is-collapsed":e.isCollapsed[a.id],"is-title-clickable":!0,"data-testid":"collapsible-card-".concat(a.id)},on:{toggleCollapse:function(t){return e.toggleCollapse(t,a.id)},titleClick:function(t){return e.setWorkspaceFilterAndLinkToGitRepo(a.id)}},scopedSlots:e._u([{key:"header-right",fn:function(){return[t("div",{staticClass:"header-icons"},[t("p",[t("i",{staticClass:"icon icon-repository"}),e._v(" "),t("span",[e._v(e._s(e.t("tableHeaders.repositories"))+": "),t("span",[e._v(e._s(a.counts.gitRepos))])])]),e._v(" "),t("p",[t("i",{staticClass:"icon icon-storage"}),e._v(" "),t("span",[e._v(e._s(e.t("tableHeaders.clusters"))+": "),t("span",[e._v(e._s(a.counts.clusters))])])]),e._v(" "),t("p",[t("i",{staticClass:"icon icon-folder"}),e._v(" "),t("span",[e._v(e._s(e.t("tableHeaders.clusterGroups"))+": "),t("span",[e._v(e._s(a.counts.clusterGroups))])])])])]},proxy:!0},{key:"content",fn:function(){return[t("ResourceTable",e._g(e._b({attrs:{schema:e.schema,headers:e.headers,rows:a.repos,"key-field":"_key",search:!1,"table-actions":!1},scopedSlots:e._u([{key:"cell:clustersReady",fn:function(s){var o=s.row;return["namespace"===a.type?t("span",[e._v(" - ")]):t("CompoundStatusBadge",{attrs:{"data-testid":"clusters-ready","tooltip-text":e.getTooltipInfo("clusters",o),"badge-class":e.getStatusInfo("clusters",o).badgeClass,icon:e.getStatusInfo("clusters",o).icon,value:e.getBadgeValue("clusters",o)}})]}},{key:"cell:bundlesReady",fn:function(s){var o=s.row;return["namespace"===a.type?t("span",[e._v(" - ")]):t("CompoundStatusBadge",{attrs:{"data-testid":"bundles-ready","tooltip-text":e.getTooltipInfo("bundles",o),"badge-class":e.getStatusInfo("bundles",o).badgeClass,icon:e.getStatusInfo("bundles",o).icon,value:e.getBadgeValue("bundles",o)}})]}},{key:"cell:resourcesReady",fn:function(a){var s=a.row;return[t("CompoundStatusBadge",{attrs:{"data-testid":"resources-ready","tooltip-text":e.getTooltipInfo("resources",s),"badge-class":e.getStatusInfo("resources",s).badgeClass,icon:e.getStatusInfo("resources",s).icon,value:e.getBadgeValue("resources",s)}})]}},{key:"cell:target",fn:function(t){var a=t.row;return[e._v("\n            "+e._s(a.targetInfo.modeDisplay)+"\n          ")]}}],null,!0)},"ResourceTable",e.$attrs,!1),e.$listeners))]},proxy:!0}],null,!0)})}))],2):t("div",{staticClass:"fleet-empty-dashboard"},[t("i",{staticClass:"icon-fleet mb-30"}),e._v(" "),t("h1",[e._v(e._s(e.t("fleet.dashboard.welcome")))]),e._v(" "),t("p",{staticClass:"mb-30"},[t("span",[e._v(e._s(e.t("fleet.dashboard.gitOpsScale")))]),e._v(" "),t("a",{attrs:{href:e.t("fleet.dashboard.learnMoreLink"),target:"_blank",rel:"noopener noreferrer nofollow"}},[e._v("\n        "+e._s(e.t("fleet.dashboard.learnMore"))+" "),t("i",{staticClass:"icon icon-external-link"})])]),e._v(" "),e.permissions.gitRepos?[t("h3",{staticClass:"mb-30"},[e._v("\n        "+e._s(e.t("fleet.dashboard.noRepo",null,!0))+"\n      ")]),e._v(" "),t("router-link",{staticClass:"btn role-secondary",attrs:{to:e.getStartedLink}},[e._v("\n        "+e._s(e.t("fleet.dashboard.getStarted"))+"\n      ")])]:e._e()],2):t("FleetNoWorkspaces",{attrs:{"can-view":e.permissions.workspaces}})],1)},o=[],r=(a("a4d3"),a("e439"),a("dbb4"),a("ade3")),l=a("1da1"),n=a("a34a"),c=a.n(n),i=(a("96cf"),a("caad"),a("2532"),a("d81d"),a("4de4"),a("d3b7"),a("b64b"),a("159b"),a("2f62")),d=a("a788"),u=a("e528"),p=a("15cb"),b=a("c778"),f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"collapsible-card",class:{isCollapsed:e.isCollapsed}},[t("div",{staticClass:"collapsible-card-header",on:{click:e.toggleCollapse}},[t("h2",{staticClass:"mb-0"},[t("span",{class:{isTitleClickable:e.isTitleClickable},on:{click:e.titleClick}},[e._v(e._s(e.title))])]),e._v(" "),t("div",[e._t("header-right"),e._v(" "),t("i",{staticClass:"collapsible-card-collapse-icon",class:{"icon-chevron-up":!e.isCollapsed,"icon-chevron-down":e.isCollapsed}})],2)]),e._v(" "),t("div",{staticClass:"collapsible-card-body"},[e._t("content")],2)])},v=[],g={name:"CollapsibleCard",props:{isCollapsed:{type:Boolean,default:!1},title:{type:String,default:""},isTitleClickable:{type:Boolean,default:!1}},methods:{toggleCollapse:function(){this.$emit("toggleCollapse",!this.isCollapsed)},titleClick:function(e){this.isTitleClickable&&(e.stopPropagation(),this.$emit("titleClick"))}}},h=g,m=(a("c453"),a("0c7c")),y=Object(m["a"])(h,f,v,!1,null,"1e5e5c84",null),C=y.exports,_=a("b178"),k=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip.bottom",value:e.tooltipText,expression:"tooltipText",modifiers:{bottom:!0}}],staticClass:"compound-cluster-badge",class:"bg-".concat(e.badgeClass)},[e.icon?t("i",{class:"icon-".concat(e.icon)}):e._e(),e._v(" "),t("span",[e._v(e._s(e.value))])])},x=[],R={name:"CompoundStatusBadge",props:{tooltipText:{type:String,default:""},badgeClass:{type:String,default:""},icon:{type:String,default:""},value:{type:String,default:""}}},O=R,T=(a("7326"),Object(m["a"])(O,k,x,!1,null,"fa6a8f44",null)),E=T.exports,w=a("c47f"),A=a("7388"),I=a("f303"),S=a("32cb"),N=a("ee21");function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P={name:"FleetDashboard",components:{Loading:b["a"],ResourceTable:_["a"],CollapsibleCard:C,CompoundStatusBadge:E,FleetNoWorkspaces:S["a"]},fetch:function(){var e=this;return Object(l["a"])(c.a.mark((function t(){var a,s;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["d"])({fleetWorkspaces:{inStoreType:"management",type:d["r"].WORKSPACE,schemaValidator:function(e){var t;return!(null===e||void 0===e||null===(t=e.links)||void 0===t||!t.collection)}},clusterGroups:{inStoreType:"management",type:d["r"].CLUSTER_GROUP},allBundles:{inStoreType:"management",type:d["r"].BUNDLE},gitRepos:{inStoreType:"management",type:d["r"].GIT_REPO},fleetClusters:{inStoreType:"management",type:d["r"].CLUSTER}},e.$store);case 2:return a=t.sent,e.gitRepos=a.gitRepos,e.fleetWorkspacesData=a.fleetWorkspaces||[],t.prev=5,t.next=8,Object(w["c"])({workspaces:{type:d["r"].WORKSPACE},gitRepos:{type:d["r"].GIT_REPO,schemaValidator:function(e){return e.resourceMethods.includes("PUT")}}},e.$store.getters);case 8:s=t.sent,e.permissions=s,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](5),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[5,12]])})))()},data:function(){return{admissableAreas:["clusters","bundles","resources"],headers:[{name:"name",labelKey:"tableHeaders.repoName",value:"nameDisplay",sort:["nameSort"],formatter:"LinkDetail",canBeVariable:!0},{name:"clustersReady",labelKey:"tableHeaders.clustersReady",value:"status.readyClusters",sort:"status.readyClusters",search:!1},{name:"bundlesReady",labelKey:"tableHeaders.bundlesReady",value:"status.readyClusters",sort:"status.readyClusters",search:!1},{name:"resourcesReady",labelKey:"tableHeaders.resourcesReady",value:"status.resourceCounts.ready",sort:"status.resourceCounts.ready"}],schema:{},allBundles:[],gitRepos:[],fleetWorkspacesData:[],isCollapsed:{},permissions:{},getStartedLink:{name:"c-cluster-product-resource-create",params:{product:N["NAME"],resource:d["r"].GIT_REPO}}}},computed:W(W({},Object(i["d"])(["workspace","allNamespaces"])),{},{fleetWorkspaces:function(){var e,t=this;return null!==(e=this.fleetWorkspacesData)&&void 0!==e&&e.length?this.fleetWorkspacesData:this.allNamespaces.filter((function(e){return e.metadata.annotations[A["K"]]===u["WORKSPACE"]})).map((function(e){var a=Object(I["d"])(t.gitRepos,"metadata.namespace",e.id);return W(W({},e),{},{counts:{clusters:"-",clusterGroups:"-",gitRepos:a.length},repos:a,nameDisplay:e.id})}))},workspacesData:function(){return this.fleetWorkspaces.filter((function(e){return e.repos&&e.repos.length}))},emptyWorkspaces:function(){return this.fleetWorkspaces.filter((function(e){return!e.repos||!e.repos.length}))},areAllCardsExpanded:function(){var e=this;return Object.keys(this.isCollapsed).every((function(t){return!e.isCollapsed[t]}))}}),methods:{setWorkspaceFilterAndLinkToGitRepo:function(e){this.$store.commit("updateWorkspace",{value:e,getters:this.$store.getters}),this.$store.dispatch("prefs/set",{key:u["WORKSPACE"],value:e}),this.$router.push({name:"c-cluster-product-resource",params:{product:N["NAME"],resource:d["r"].GIT_REPO}})},getStatusInfo:function(e,t){var a={badgeClass:"".concat(p["b"][p["c"].NOT_READY].color," badge-class-default"),icon:p["b"][p["c"].NOT_READY].compoundIcon};return this.getBadgeClassAndIcon(e,t)||a},getBadgeClassAndIcon:function(e,t){var a,s,o,r,l,n,c,i,d,u,b,f,v;if(!this.admissableAreas.includes(e))return!1;if("clusters"===e)c=t.targetClusters;else if("bundles"===e)c=t.bundles;else if("resources"===e){var g;c=null===(g=t.status)||void 0===g?void 0:g.resources}if(null!==(a=c)&&void 0!==a&&a.length&&null!==(s=c)&&void 0!==s&&s.every((function(e){var t;return(null===(t=e.state)||void 0===t?void 0:t.toLowerCase())===p["c"].ACTIVE})))return{badgeClass:p["b"][p["c"].ACTIVE].color?p["b"][p["c"].ACTIVE].color:"".concat(p["b"][p["c"].UNKNOWN].color," bg-unmapped-state"),icon:p["b"][p["c"].ACTIVE].compoundIcon?p["b"][p["c"].ACTIVE].compoundIcon:"".concat(p["b"][p["c"].UNKNOWN].compoundIcon," unmapped-icon")};if(null!==(o=c)&&void 0!==o&&o.length&&null!==(r=c)&&void 0!==r&&r.some((function(e){var t;return(null===(t=e.state)||void 0===t?void 0:t.toLowerCase())===p["c"].ERR_APPLIED})))return{badgeClass:p["b"][p["c"].ERR_APPLIED].color?p["b"][p["c"].ERR_APPLIED].color:"".concat(p["b"][p["c"].UNKNOWN].color," bg-unmapped-state"),icon:p["b"][p["c"].ERR_APPLIED].compoundIcon?p["b"][p["c"].ERR_APPLIED].compoundIcon:"".concat(p["b"][p["c"].UNKNOWN].compoundIcon," unmapped-icon")};if(null!==(l=c)&&void 0!==l&&l.length&&null!==(n=c)&&void 0!==n&&n.some((function(e){var t;return(null===(t=e.state)||void 0===t?void 0:t.toLowerCase())===p["c"].NOT_READY})))return{badgeClass:p["b"][p["c"].NOT_READY].color?p["b"][p["c"].NOT_READY].color:"".concat(p["b"][p["c"].UNKNOWN].color," bg-unmapped-state"),icon:p["b"][p["c"].NOT_READY].compoundIcon?p["b"][p["c"].NOT_READY].compoundIcon:"".concat(p["b"][p["c"].UNKNOWN].compoundIcon," unmapped-icon")};if("resources"===e&&((null===(i=t.status)||void 0===i||null===(d=i.resourceCounts)||void 0===d?void 0:d.desiredReady)===(null===(u=t.status)||void 0===u||null===(b=u.resourceCounts)||void 0===b?void 0:b.ready)&&null!==(f=t.status)&&void 0!==f&&null!==(v=f.resourceCounts)&&void 0!==v&&v.desiredReady))return{badgeClass:p["b"][p["c"].ACTIVE].color,icon:p["b"][p["c"].ACTIVE].compoundIcon};return{badgeClass:"".concat(p["b"][p["c"].NOT_READY].color," badge-class-area-").concat(e),icon:p["b"][p["c"].NOT_READY].compoundIcon}},getTooltipInfo:function(e,t){var a,s;if(!this.admissableAreas.includes(e))return{};if("clusters"===e)s=t.targetClusters;else if("bundles"===e)s=t.bundles;else if("resources"===e){var o;s=null===(o=t.status)||void 0===o?void 0:o.resources}return null!==(a=s)&&void 0!==a&&a.length?this.generateTooltipData(s):""},generateTooltipData:function(e){var t={},a="";return e.forEach((function(e){t[e.state]||(t[e.state]=0),t[e.state]++})),Object.keys(t).forEach((function(e){a+="".concat(Object(p["f"])(e),": ").concat(t[e],"<br>")})),a},getBadgeValue:function(e,t){var a,s,o;if(!this.admissableAreas.includes(e))return"N/A";if("clusters"===e)a="".concat((null===(s=t.targetClustersReady)||void 0===s?void 0:s.length)||"0","/").concat((null===(o=t.targetClusters)||void 0===o?void 0:o.length)||"?");else if("bundles"===e){var r,l;a="".concat((null===(r=t.bundlesReady)||void 0===r?void 0:r.length)||"0","/").concat((null===(l=t.bundles)||void 0===l?void 0:l.length)||"?")}else if("resources"===e){var n,c,i,d;a="".concat((null===(n=t.status)||void 0===n||null===(c=n.resourceCounts)||void 0===c?void 0:c.ready)||"0","/").concat((null===(i=t.status)||void 0===i||null===(d=i.resourceCounts)||void 0===d?void 0:d.desiredReady)||"?")}return a},toggleCollapse:function(e,t){this.$set(this.isCollapsed,t,e)},toggleAll:function(e){var t=this,a="expand"!==e;Object.keys(this.isCollapsed).forEach((function(e){t.$set(t.isCollapsed,e,a)}))}},watch:{fleetWorkspaces:function(e){var t=this;null===e||void 0===e||e.filter((function(e){var t;return null===(t=e.repos)||void 0===t?void 0:t.length})).forEach((function(e){t.$set(t.isCollapsed,e.id,!1)}))}}},j=P,L=(a("9831"),Object(m["a"])(j,s,o,!1,null,"d3781216",null));t["default"]=L.exports},e19f:function(e,t,a){var s=a("92da");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var o=a("499e").default;o("3b0505ae",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-4b51f6f4.611f5abd.js.map