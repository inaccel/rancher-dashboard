(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-557e2c16"],{afd4:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t("div",[t(r.UserRetentionHeader),e._v(" "),r.loading?e._e():t("div",{staticClass:"form-user-retention"},[r.error?t(r.Banner,{attrs:{color:"error"}},[e._v("\n      "+e._s(r.error)+"\n    ")]):e._e(),e._v(" "),t("div",{staticClass:"input-fieldset"},[t(r.Checkbox,{attrs:{"data-testid":"disableAfterPeriod",label:r.t("user.retention.edit.form.disableAfter.checkbox")},model:{value:r.disableAfterPeriod,callback:function(e){r.disableAfterPeriod=e},expression:"disableAfterPeriod"}}),e._v(" "),t(r.LabeledInput,{staticClass:"input-field",attrs:{"data-testid":"disableAfterPeriodInput",tooltip:r.t("user.retention.edit.form.disableAfter.input.tooltip"),label:r.t("user.retention.edit.form.disableAfter.input.label"),disabled:!r.disableAfterPeriod},model:{value:r.userRetentionSettings[r.SETTING.DISABLE_INACTIVE_USER_AFTER],callback:function(t){e.$set(r.userRetentionSettings,r.SETTING.DISABLE_INACTIVE_USER_AFTER,t)},expression:"userRetentionSettings[SETTING.DISABLE_INACTIVE_USER_AFTER]"}})],1),e._v(" "),t("div",{staticClass:"input-fieldset"},[t(r.Checkbox,{attrs:{"data-testid":"deleteAfterPeriod",label:r.t("user.retention.edit.form.deleteAfter.checkbox")},model:{value:r.deleteAfterPeriod,callback:function(e){r.deleteAfterPeriod=e},expression:"deleteAfterPeriod"}}),e._v(" "),t(r.LabeledInput,{staticClass:"input-field",attrs:{"data-testid":"deleteAfterPeriodInput",tooltip:r.t("user.retention.edit.form.deleteAfter.input.tooltip"),label:r.t("user.retention.edit.form.deleteAfter.input.label"),"sub-label":r.t("user.retention.edit.form.deleteAfter.input.subLabel"),disabled:!r.deleteAfterPeriod},model:{value:r.userRetentionSettings[r.SETTING.DELETE_INACTIVE_USER_AFTER],callback:function(t){e.$set(r.userRetentionSettings,r.SETTING.DELETE_INACTIVE_USER_AFTER,t)},expression:"userRetentionSettings[SETTING.DELETE_INACTIVE_USER_AFTER]"}})],1),e._v(" "),r.disableAfterPeriod||r.deleteAfterPeriod?[t("div",{staticClass:"input-fieldset pt-12"},[t(r.LabeledInput,{staticClass:"input-field",attrs:{"data-testid":"userRetentionCron",required:"",type:"cron",tooltip:r.t("user.retention.edit.form.cron.subLabel"),rules:[r.validateUserRetentionCron],label:r.t("user.retention.edit.form.cron.label")},on:{input:r.validateUserRetentionCron},model:{value:r.userRetentionSettings[r.SETTING.USER_RETENTION_CRON],callback:function(t){e.$set(r.userRetentionSettings,r.SETTING.USER_RETENTION_CRON,t)},expression:"userRetentionSettings[SETTING.USER_RETENTION_CRON]"}})],1),e._v(" "),t("div",{staticClass:"input-fieldset condensed pt-12"},[t(r.ToggleSwitch,{attrs:{"data-testid":"userRetentionDryRun",onValue:"true",offValue:"false","on-label":r.t("user.retention.edit.form.dryRun.label")},model:{value:r.userRetentionSettings[r.SETTING.USER_RETENTION_DRY_RUN],callback:function(t){e.$set(r.userRetentionSettings,r.SETTING.USER_RETENTION_DRY_RUN,t)},expression:"userRetentionSettings[SETTING.USER_RETENTION_DRY_RUN]"}}),e._v(" "),t("span",{staticClass:"input-detail"},[e._v(e._s(r.t("user.retention.edit.form.dryRun.subLabel")))])],1),e._v(" "),t("div",{staticClass:"input-fieldset condensed"},[t(r.LabeledInput,{staticClass:"input-field",attrs:{"data-testid":"userLastLoginDefault",label:r.t("user.retention.edit.form.defaultLastLogin.label"),"sub-label":r.t("user.retention.edit.form.defaultLastLogin.subLabel"),placeholder:r.t("user.retention.edit.form.defaultLastLogin.placeholder")},model:{value:r.userRetentionSettings[r.SETTING.USER_LAST_LOGIN_DEFAULT],callback:function(t){e.$set(r.userRetentionSettings,r.SETTING.USER_LAST_LOGIN_DEFAULT,t)},expression:"userRetentionSettings[SETTING.USER_LAST_LOGIN_DEFAULT]"}})],1)]:e._e()],2),e._v(" "),t(r.Footer,{staticClass:"footer-user-retention",attrs:{mode:"edit","disable-save":!r.isFormValid},on:{save:r.save,done:r.routeBack}})],1)},a=[],i=(r("a4d3"),r("e439"),r("dbb4"),r("1da1")),o=r("3835"),s=r("ade3"),l=r("a34a"),u=r.n(l),c=(r("96cf"),r("d3b7"),r("159b"),r("4de4"),r("caad"),r("2532"),r("25f0"),r("b64b"),r("d81d"),r("e260"),r("e6cf"),r("3ca3"),r("ddb0"),r("a9e3"),r("ac1f"),r("5319"),r("f6b5"));function d(){return Object(c["getCurrentInstance"])().proxy.$root.$router}function f(e){return p(e,b)}function b(e,t,r){var n=e.matched,a=t.matched;return n.length>=r&&n.slice(0,r+1).every((function(e,t){return e===a[t]}))}var E=function(){};function p(e,t){var r=Object(c["getCurrentInstance"])(),n=d(),a=r.proxy;while(a&&a.$vnode&&a.$vnode.data&&null==a.$vnode.data.routerViewDepth)a=a.$parent;var i=a&&a.$vnode&&a.$vnode.data?a.$vnode.data.routerViewDepth:null;if(null!=i){var o=n.beforeEach((function(r,n,a){return t(r,n,i)?e(r,n,a):a()}));return Object(c["onUnmounted"])(o),o}return E}var _=function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t("div",[t("header",[t("div",{staticClass:"title"},[t("h1",{staticClass:"m-0",attrs:{"data-testid":"charts-header-title"}},[t(r.TabTitle,{attrs:{"show-child":!1}},[e._v("\n          "+e._s(e.t("user.retention.edit.title.header"))+"\n        ")]),e._v(" "),t("router-link",{attrs:{to:{name:"c-cluster-product-resource",params:{cluster:"_",product:"auth",resource:"management.cattle.io.user"}}}},[e._v("\n          "+e._s(e.t("user.retention.edit.title.pre"))+"\n        ")]),e._v("\n        "+e._s(e.t("user.retention.edit.title.post"))+"\n      ")],1)])]),e._v(" "),t("h2",[e._v(e._s(e.t("user.retention.edit.title.subTitle")))])])},v=[],T=r("ead0"),R=Object(c["defineComponent"])({__name:"user-retention-header",setup:function(e){return{__sfc:!0,TabTitle:T["a"]}}}),S=R,I=r("0c7c"),m=Object(I["a"])(S,_,v,!1,null,null,null),A=m.exports,O=r("43ef"),g=r("b66b"),N=r("7578"),h=null,L=function(e){if(h=e,!h)throw new Error("usI18n() must be called from setup()");return{t:U}},U=function(e,t,r){return Object(N["b"])(h,e,t,r)},C=r("a788"),j=r("c5b9"),x=r("9bc6"),w=r("01ba"),D=r("bd30"),y=r("3017"),P=r("0bf6"),k=r("01a8"),F=r("5a0c"),G=r.n(F);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=Object(c["defineComponent"])({__name:"index",setup:function(e){var t,r=Object(g["a"])(),n=Object(c["reactive"])((t={},Object(s["a"])(t,j["c"].DISABLE_INACTIVE_USER_AFTER,null),Object(s["a"])(t,j["c"].DELETE_INACTIVE_USER_AFTER,null),Object(s["a"])(t,j["c"].USER_RETENTION_CRON,null),Object(s["a"])(t,j["c"].USER_RETENTION_DRY_RUN,null),Object(s["a"])(t,j["c"].USER_LAST_LOGIN_DEFAULT,null),t)),a=Object(c["ref"])(!1),l=Object(c["ref"])(!1),b=Object(c["ref"])(!0),E={};Object(c["watch"])(a,(function(e){n[j["c"].DISABLE_INACTIVE_USER_AFTER]=e?E[j["c"].DISABLE_INACTIVE_USER_AFTER].value:null})),Object(c["watch"])(l,(function(e){n[j["c"].DELETE_INACTIVE_USER_AFTER]=e?E[j["c"].DELETE_INACTIVE_USER_AFTER].value:null})),Object(c["watch"])([a,l],(function(e){var t=Object(o["a"])(e,2),r=t[0],a=t[1];if(!r&&!a)return v.forEach((function(e){n[e]=null})),void m();v.filter((function(e){return![j["c"].DISABLE_INACTIVE_USER_AFTER,j["c"].DELETE_INACTIVE_USER_AFTER].includes(e)})).forEach(p),m()}));var p=function(e){if(E[e].id===j["c"].USER_LAST_LOGIN_DEFAULT&&E[e].value&&"string"===typeof E[e].value){var t=E[e].value;n[e]=G()(t).valueOf().toString()}else n[e]=E[e].value},_=function(){var e=Object(i["a"])(u.a.mark((function e(t){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.dispatch("management/find",{type:C["F"].SETTING,id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=Object.keys(n),T=v.map((function(e){return _(e)}));Object(c["onMounted"])(Object(i["a"])(u.a.mark((function e(){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(T).then((function(e){return e.reduce((function(e,t){return $(Object(s["a"])({},t.id,t),e)}),{})}));case 2:E=e.sent,v.forEach(p),a.value=!!n[j["c"].DISABLE_INACTIVE_USER_AFTER],l.value=!!n[j["c"].DELETE_INACTIVE_USER_AFTER],b.value=!1,m();case 8:case"end":return e.stop()}}),e)}))));var R=Object(c["ref"])(!1),S=L(r),I=S.t,m=function(){var e=n[j["c"].USER_RETENTION_CRON];if(a.value||l.value){if(e)return"string"!==typeof e||Object(k["isValidCron"])(e)?void(R.value=!0):(R.value=!1,I("user.retention.edit.form.cron.errorMessage"));R.value=!1}else R.value=!0},N=Object(c["ref"])(null),h=function(){var e=Object(i["a"])(u.a.mark((function e(t){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,N.value=null,v.forEach((function(e){E[e].value=n[e],e===j["c"].USER_LAST_LOGIN_DEFAULT&&n[e]&&(E[e].value=G()(Number(n[e])).format())})),e.next=5,Promise.all(v.map((function(e){return E[e].save()})));case 5:t(!0),r.dispatch("growl/success",{title:I("user.retention.growl.title"),message:I("user.retention.growl.message")},{root:!0}),F(),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),N.value=e.t0.message,t(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),U=d(),F=function(){U.back()};return f((function(e,t){Object(x["isAdminUser"])(r.getters)||U.replace({name:"home"})})),{__sfc:!0,store:r,userRetentionSettings:n,disableAfterPeriod:a,deleteAfterPeriod:l,loading:b,settings:E,assignSettings:p,fetchSetting:_,ids:v,settingPromises:T,isFormValid:R,t:I,validateUserRetentionCron:m,error:N,save:h,router:U,routeBack:F,UserRetentionHeader:A,Footer:O["a"],SETTING:j["c"],Banner:w["a"],Checkbox:D["a"],LabeledInput:y["a"],ToggleSwitch:P["a"]}}}),M=B,Y=(r("b18a"),Object(I["a"])(M,n,a,!1,null,"396f7efb",null));t["default"]=Y.exports},b18a:function(e,t,r){"use strict";r("b8dd")},b373:function(e,t,r){var n=r("4bad");t=n(!1),t.push([e.i,".form-user-retention[data-v-396f7efb]{display:flex;flex:1;flex-direction:column;gap:1.5rem}.footer-user-retention[data-v-396f7efb]{border-top:var(--header-border-size) solid var(--header-border);right:0;position:sticky;bottom:0;background-color:var(--header-bg);margin-left:-20px;margin-right:-20px;margin-bottom:-20px;margin-top:20px;padding:10px 20px}.footer-user-retention[data-v-396f7efb] .spacer-small{padding:0}.input-fieldset[data-v-396f7efb]{display:flex;flex-direction:column;gap:.75rem}.input-fieldset.condensed[data-v-396f7efb]{gap:.25rem}.input-fieldset.pt-12[data-v-396f7efb]{padding-top:3rem}.input-field[data-v-396f7efb]{max-width:24rem}.input-detail[data-v-396f7efb]{color:var(--input-label);padding-left:61px}",""]),e.exports=t},b8dd:function(e,t,r){var n=r("b373");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=r("499e").default;a("71b54dca",n,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-557e2c16.b40f2441.js.map