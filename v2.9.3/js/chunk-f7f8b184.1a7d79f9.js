(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f7f8b184"],{"3ece":function(e,t,o){"use strict";o("8817")},"83f6":function(e,t,o){var a=o("4bad");t=a(!1),t.push([e.i,".login[data-v-2dedc5ac]{overflow:hidden}.login .row[data-v-2dedc5ac]{align-items:center}.login .landscape[data-v-2dedc5ac]{height:100vh;margin:0;-o-object-fit:cover;object-fit:cover}.login .login-welcome[data-v-2dedc5ac]{margin:0}.login .login-messages[data-v-2dedc5ac]{display:flex;justify-content:center;align-items:center}.login .login-messages .banner[data-v-2dedc5ac]{margin:5px}.login .login-messages h4[data-v-2dedc5ac]{margin:0}.login .login-messages--hasContent[data-v-2dedc5ac]{min-height:70px}.login .login-messages .banner[data-v-2dedc5ac],.login .login-messages .text-error[data-v-2dedc5ac]{max-width:80%}.login .first-login-message .banner[data-v-2dedc5ac]{margin-bottom:0;border-left:0}.login .first-login-message .banner[data-v-2dedc5ac] code{font-size:12px;padding:0}.gutless[data-v-2dedc5ac]{height:100vh}.gutless>.span-6[data-v-2dedc5ac]{overflow-y:auto;display:flex;flex-direction:column;height:100%;place-content:center}.locale-selector[data-v-2dedc5ac]{position:absolute;bottom:30px}",""]),e.exports=t},8450:function(e,t,o){"use strict";o.d(t,"b",(function(){return g})),o.d(t,"c",(function(){return p})),o.d(t,"a",(function(){return h}));var a,r=o("ade3"),n=(o("d3b7"),o("159b"),o("b64b"),o("7db0"),o("a788")),s=o("c5b9"),i="bannerHeader",c="bannerFooter",l="bannerConsent",d={"ui-banner-header":i,"ui-banner-footer":c,"ui-banner-login-consent":l},u=(a={},Object(r["a"])(a,i,"showHeader"),Object(r["a"])(a,c,"showFooter"),Object(r["a"])(a,l,"showConsent"),a);function g(e){var t={},o=e.getters["management/all"](n["F"].SETTING);return o.forEach((function(e){if(e.value&&d[e.id]){var o=d[e.id];t[o]=e}})),t}function p(e,t){Object.keys(t).forEach((function(o){try{var a=JSON.parse(t[o].value),r=u[o];e[o]=a,e[r]="true"}catch(n){}}))}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14,o=2*parseInt(e),a=o/t;return"".concat(a,"em")}function h(e){var t=e.getters["management/all"](n["F"].SETTING),o=null===t||void 0===t?void 0:t.find((function(e){return e.id===s["c"].BANNERS})),a=g(e);if(o){var r=JSON.parse(o.value);p(r,a);var i=r.showFooter,c=r.showHeader,l=r.bannerFooter,d=r.bannerHeader,u=r.banner,h=(null===d||void 0===d?void 0:d.fontSize)||(null===u||void 0===u?void 0:u.fontSize)||"14px",f=(null===l||void 0===l?void 0:l.fontSize)||(null===u||void 0===u?void 0:u.fontSize)||"14px";return{headerFont:"true"===c?v(h):"0px",footerFont:"true"===i?v(f):"0px"}}}},8817:function(e,t,o){var a=o("83f6");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=o("499e").default;r("29a21d0e",a,!0,{sourceMap:!1,shadowMode:!1})},9232:function(e,t,o){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",["login"===e.mode?t("div",[e.showLocale?t("div",[t("v-popover",{attrs:{"popover-class":"localeSelector",placement:"top",trigger:"click"}},[t("a",{staticClass:"locale-chooser",attrs:{"data-testid":"locale-selector"}},[e._v("\n          "+e._s(e.selectedLocaleLabel)+"\n          "),t("i",{staticClass:"icon icon-fw icon-sort-down"})]),e._v(" "),t("template",{slot:"popover"},[t("ul",{staticClass:"list-unstyled dropdown",staticStyle:{margin:"-1px"}},[e.showNone?t("li",{directives:[{name:"t",rawName:"v-t",value:"locale.none",expression:"'locale.none'"}],staticClass:"hand",on:{click:function(t){return e.switchLocale("none")}}}):e._e(),e._v(" "),e._l(e.availableLocales,(function(o,a){return t("li",{key:a,staticClass:"hand",on:{click:function(t){return e.switchLocale(a)}}},[e._v("\n              "+e._s(o)+"\n            ")])}))],2)])],2)],1):e._e()]):t("div",[t("Select",{attrs:{value:e.selectedOption,options:e.localesOptions},on:{input:function(t){return e.switchLocale(t)}}})],1)])},r=[],n=(o("a4d3"),o("4de4"),o("d3b7"),o("e439"),o("159b"),o("dbb4"),o("ade3")),s=(o("d81d"),o("b64b"),o("07ac"),o("2f62")),i=o("c989");function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){Object(n["a"])(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var d={name:"LocalSelector",components:{Select:i["a"]},props:{mode:{type:String,default:""}},computed:l(l({},Object(s["c"])("i18n",["selectedLocaleLabel","availableLocales"])),{},{localesOptions:function(){var e=this;return Object.keys(this.availableLocales).map((function(t){return{label:e.t("locale.".concat(t)),value:t}}))},selectedOption:function(){return Object.keys(this.availableLocales)[Object.values(this.availableLocales).indexOf(this.selectedLocaleLabel)]},showLocale:function(){return this.availableLocales&&Object.keys(this.availableLocales).length>1||this.dev},showNone:function(){return!1}}),methods:{switchLocale:function(e){this.$store.dispatch("i18n/switchTo",e)}}},u=d,g=(o("9c8a"),o("0c7c")),p=Object(g["a"])(u,a,r,!1,null,"1d201bdb",null);t["a"]=p.exports},"9c8a":function(e,t,o){"use strict";o("a478")},a478:function(e,t,o){var a=o("df13");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=o("499e").default;r("723a9a8e",a,!0,{sourceMap:!1,shadowMode:!1})},d8eb:function(e,t,o){"use strict";o.r(t);o("498a");var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading",{attrs:{mode:"relative"}}):t("main",{staticClass:"main-layout login"},[t("div",{staticClass:"row gutless mb-20"},[t("div",{staticClass:"col span-6 p-20"},[t("p",{staticClass:"text-center"},[e._v("\n        "+e._s(e.t("login.howdy"))+"\n      ")]),e._v(" "),t("h1",{staticClass:"text-center login-welcome"},[e._v("\n        "+e._s(e.t("login.welcome",{vendor:e.vendor}))+"\n      ")]),e._v(" "),t("div",{staticClass:"login-messages",class:{"login-messages--hasContent":e.hasLoginMessage},attrs:{"data-testid":"login__messages"}},[e.errorToDisplay?t("Banner",{attrs:{label:e.errorToDisplay,color:"error"}}):e.loggedOut?t("h4",{staticClass:"text-success text-center"},[e._v("\n          "+e._s(e.isSsoLogout?e.t("login.loggedOutFromSso"):e.t("login.loggedOut"))+"\n        ")]):e.timedOut?t("h4",{staticClass:"text-error text-center"},[e._v("\n          "+e._s(e.t("login.loginAgain"))+"\n        ")]):e._e()],1),e._v(" "),e.firstLogin?t("div",{staticClass:"first-login-message pl-10 pr-10",class:{"mt-30":!e.hasLoginMessage},attrs:{"data-testid":"first-login-message"}},[t("t",{attrs:{k:"setup.defaultPassword.intro",raw:!0}}),e._v(" "),t("div",[t("t",{attrs:{k:"setup.defaultPassword.dockerPrefix",raw:!0}})],1),e._v(" "),t("ul",[t("li",[t("t",{attrs:{k:"setup.defaultPassword.dockerPs",raw:!0}})],1),e._v(" "),t("li",[t("CopyCode",[e._v("\n              docker logs "),t("u",[e._v("container-id")]),e._v(' 2>&1 | grep "Bootstrap Password:"\n            ')])],1)]),e._v(" "),t("div",[t("t",{attrs:{k:"setup.defaultPassword.dockerSuffix",raw:!0}})],1),e._v(" "),t("br"),e._v(" "),t("div",[t("t",{attrs:{k:"setup.defaultPassword.helmPrefix",raw:!0}})],1),e._v(" "),t("br"),e._v(" "),t("CopyCode",[e._v("\n          "+e._s(e.kubectlCmd)+"\n        ")]),e._v(" "),t("br"),e._v(" "),t("div",[t("t",{attrs:{k:"setup.defaultPassword.helmSuffix",raw:!0}})],1)],1):e._e(),e._v(" "),(!e.hasLocal||e.hasLocal&&!e.showLocal)&&e.providers.length?t("div",{class:{"mt-30":!e.hasLoginMessage}},e._l(e.providers,(function(o,a){return t(e.providerComponents[a],{key:o,tag:"component",staticClass:"mb-10",attrs:{"focus-on-mount":0===a&&!e.showLocal,name:o,open:!e.showLocal},on:{showInputs:function(t){e.showLocal=!1},error:e.handleProviderError}})})),1):e._e(),e._v(" "),e.hasLocal?[e.showLocal?t("form",{class:{"mt-30":!e.hasLoginMessage}},[t("div",{staticClass:"span-6 offset-3"},[t("div",{staticClass:"mb-20"},[e.firstLogin?e._e():t("LabeledInput",{ref:"username",attrs:{id:"username","data-testid":"local-login-username",label:e.t("login.username"),autocomplete:"username"},model:{value:e.username,callback:function(t){e.username="string"===typeof t?t.trim():t},expression:"username"}})],1),e._v(" "),t("div",{},[t("Password",{ref:"password",attrs:{id:"password","data-testid":"local-login-password",label:e.t("login.password"),autocomplete:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]),e._v(" "),t("div",{staticClass:"mt-20"},[t("div",{staticClass:"col span-12 text-center"},[t("AsyncButton",{attrs:{id:"submit","data-testid":"login-submit",type:"submit","action-label":e.t("login.loginWithLocal"),"waiting-label":e.t("login.loggingIn"),"success-label":e.t("login.loggedIn"),"error-label":e.t("asyncButton.default.error")},on:{click:e.loginLocal}}),e._v(" "),e.firstLogin?e._e():t("div",{staticClass:"mt-20"},[t("Checkbox",{attrs:{label:e.t("login.remember.label"),type:"checkbox"},model:{value:e.remember,callback:function(t){e.remember=t},expression:"remember"}})],1)],1)])]):e._e(),e._v(" "),e.hasLocal&&!e.showLocal?t("div",{staticClass:"mt-20 text-center"},[t("a",{attrs:{id:"login-useLocal","data-testid":"login-useLocal",role:"button"},on:{click:e.toggleLocal}},[e._v("\n            "+e._s(e.t("login.useLocal"))+"\n          ")])]):e._e(),e._v(" "),e.hasLocal&&e.showLocal&&e.providers.length?t("div",{staticClass:"mt-20 text-center"},[t("a",{attrs:{role:"button"},on:{click:e.toggleLocal}},[e._v("\n            "+e._s(e.nonLocalPrompt)+"\n          ")])]):e._e()]:e._e(),e._v(" "),e.showLocaleSelector?t("div",{staticClass:"locale-selector"},[t("LocaleSelector",{style:e.localeSelectorStyle,attrs:{mode:"login"}})],1):e._e()],2),e._v(" "),t("BrandImage",{staticClass:"col span-6 landscape",attrs:{"data-testid":"login-landscape__img","file-name":"login-landscape.svg"}})],1)])},r=[],n=(o("b64b"),o("a4d3"),o("4de4"),o("e439"),o("159b"),o("dbb4"),o("1da1")),s=o("ade3"),i=o("a34a"),c=o.n(i),l=(o("96cf"),o("99af"),o("d81d"),o("caad"),o("2532"),o("7db0"),o("d3b7"),o("ac1f"),o("5319"),o("f303")),d=o("a20e"),u=o("84d3"),g=o("67c9"),p=o("9232"),v=o("a4ed"),h=o("08ed"),f=o("18fe"),b=o("bec1"),m=o("fa3b"),w=o("4de2"),L=o("f441"),O=o("b25d"),_=o("bb49"),y=o("2f62"),x=o("c3e3"),S=o("a788"),j=o("c5b9"),k=o("3589"),P=o("58ec"),C=o("6fc2"),E=o("c778"),I=o("8450");function $(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function N(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?$(Object(o),!0).forEach((function(t){Object(s["a"])(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):$(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var T={name:"Login",components:{LabeledInput:u["a"],AsyncButton:g["b"],Checkbox:w["a"],BrandImage:v["a"],Banner:b["a"],InfoBox:h["a"],CopyCode:f["a"],Password:L["a"],LocaleSelector:p["a"],Loading:E["a"]},data:function(){var e=this.$cookies.get(d["c"],{parseJSON:!1})||"";return{username:e,remember:!!e,password:"",timedOut:this.$route.query[m["H"]]===m["P"],loggedOut:this.$route.query[m["t"]]===m["P"],isSsoLogout:this.$route.query[m["r"]]===m["P"],err:this.$route.query.err,showLocaleSelector:!0,hasLocal:!1,showLocal:!1,providers:[],providerComponents:[],customLoginError:{},firstLogin:!1,vendor:Object(P["d"])()}},computed:N(N({},Object(y["c"])({t:"i18n/t"})),{},{singleProvider:function(){return 1===this.providers.length?this.providers[0]:void 0},nonLocalPrompt:function(){if(this.singleProvider){var e=this.displayName(this.singleProvider);return this.t("login.useProvider",{provider:e})}return this.t("login.useNonLocal")},errorMessage:function(){var e;return this.err===k["LOGIN_ERRORS"].CLIENT_UNAUTHORIZED?this.t("login.clientError"):this.err===k["LOGIN_ERRORS"].CLIENT||this.err===k["LOGIN_ERRORS"].SERVER?this.t("login.error"):null!==(e=this.err)&&void 0!==e&&e.length?this.t("login.specificError",{msg:this.err}):""},errorToDisplay:function(){var e,t;return"true"===(null===(e=this.customLoginError)||void 0===e?void 0:e.showMessage)&&null!==(t=this.customLoginError)&&void 0!==t&&t.message&&this.errorMessage?"".concat(this.customLoginError.message," \n ").concat(this.errorMessage):this.errorMessage?this.errorMessage:""},kubectlCmd:function(){return"kubectl get secret --namespace cattle-system bootstrap-secret -o go-template='{{.data.bootstrapPassword|base64decode}}{{\"\\n\"}}'"},hasLoginMessage:function(){return this.errorToDisplay||this.loggedOut||this.timedOut},localeSelectorStyle:function(){var e=Object(I["a"])(this.$store);return{marginBottom:null===e||void 0===e?void 0:e.footerFont}}}),fetch:function(){var e=this;return Object(n["a"])(c.a.mark((function t(){var o,a,r,n,s,i,d,u;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadInitialSettings();case 2:return o=t.sent,a=o.firstLoginSetting,t.next=6,e.$store.dispatch("management/find",{type:S["F"].SETTING,id:j["c"].BANNERS});case 6:return r=t.sent,n=r.value,t.next=10,e.$store.dispatch("auth/getAuthProviders");case 10:s=t.sent,i=Object(O["b"])(s.map((function(e){return e.id})),["id"]),d=i.includes("local"),u=d&&!!i.find((function(e){return"local"!==e})),d&&Object(l["j"])(i,"local"),e.vendor=Object(P["d"])(),e.providers=i,e.hasLocal=d,e.showLocal=!u||e.$route.query[m["s"]]===m["P"],e.customLoginError=JSON.parse(n).loginError,e.firstLogin="true"===(null===a||void 0===a?void 0:a.value),e.username=e.firstLogin?"admin":e.username,e.providerComponents=e.providers.map((function(t){return e.$store.getters["type-map/importLogin"](_["configType"][t]||t)})),e.$nextTick((function(){e.focusSomething()}));case 24:case"end":return t.stop()}}),t)})))()},methods:{loadInitialSettings:function(){var e=this;return Object(n["a"])(c.a.mark((function t(){var o,a,r,n,s,i;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,n=e.$store.getters["management/byId"](S["F"].SETTING,j["c"].FIRST_LOGIN),s=e.$store.getters["management/byId"](S["F"].SETTING,j["c"].PL),i=e.$store.getters["management/byId"](S["F"].SETTING,j["c"].BRAND),t.next=17;break;case 6:return t.prev=6,t.t0=t["catch"](0),t.next=10,e.$store.dispatch("rancher/find",{type:S["L"].SETTING,id:j["c"].FIRST_LOGIN,opt:{url:"/v3/settings/".concat(j["c"].FIRST_LOGIN)}});case 10:return n=t.sent,t.next=13,e.$store.dispatch("rancher/find",{type:S["L"].SETTING,id:j["c"].PL,opt:{url:"/v3/settings/".concat(j["c"].PL)}});case 13:return s=t.sent,t.next=16,e.$store.dispatch("rancher/find",{type:S["L"].SETTING,id:j["c"].BRAND,opt:{url:"/v3/settings/".concat(j["c"].BRAND)}});case 16:i=t.sent;case 17:return null!==(o=s.value)&&void 0!==o&&o.length&&s.value!==Object(P["d"])()&&Object(P["g"])(s.value),null!==(a=i)&&void 0!==a&&null!==(r=a.value)&&void 0!==r&&r.length&&i.value!==Object(P["b"])()&&Object(P["e"])(i.value),t.abrupt("return",{firstLoginSetting:n,plSetting:s,brand:i});case 20:case"end":return t.stop()}}),t,null,[[0,6]])})))()},displayName:function(e){return this.t("model.authConfig.provider.".concat(e))},toggleLocal:function(){var e=this;this.showLocal=!this.showLocal,this.$router.applyQuery(Object(s["a"])({},m["s"],m["P"])),this.$nextTick((function(){e.focusSomething()}))},focusSomething:function(){var e,t;this.showLocal&&(t=this.username?this.$refs.password:this.$refs.username,null!==(e=t)&&void 0!==e&&e.focus&&(t.focus(),t.select&&t.select()))},handleProviderError:function(e){this.err=e},loginLocal:function(e){var t=this;return Object(n["a"])(c.a.mark((function o(){var a,r;return c.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,t.$store.dispatch("auth/login",{provider:"local",body:{username:t.username,password:t.password}});case 3:return o.next=5,t.$store.dispatch("rancher/findAll",{type:S["L"].USER,opt:{url:"/v3/users?me=true",load:x["a"]}});case 5:return r=o.sent,null!==r&&void 0!==r&&r[0]&&t.$store.dispatch("auth/gotUser",r[0]),t.remember?t.$cookies.set(d["c"],t.username,{encode:function(e){return e},maxAge:31536e3,path:"/",sameSite:!0,secure:!0}):t.$cookies.remove(d["c"]),o.next=10,Object(C["a"])({app:t.$store.app,store:t.$store,$plugin:t.$store.$plugin});case 10:t.firstLogin||null!==(a=r[0])&&void 0!==a&&a.mustChangePassword?(t.$store.dispatch("auth/setInitialPass",t.password),t.$router.push({name:"auth-setup"})):t.$router.replace("/"),o.next=19;break;case 13:o.prev=13,o.t0=o["catch"](0),t.err=o.t0,t.timedOut=null,t.loggedOut=null,e(!1);case 19:case"end":return o.stop()}}),o,null,[[0,13]])})))()}}},R=T,F=(o("3ece"),o("0c7c")),M=Object(F["a"])(R,a,r,!1,null,"2dedc5ac",null);t["default"]=M.exports},df13:function(e,t,o){var a=o("4bad");t=a(!1),t.push([e.i,".advanced[data-v-1d201bdb]{-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:0 5px;line-height:40px;font-size:15px;font-weight:500}.content[data-v-1d201bdb]{background:var(--nav-active);padding:10px;margin-top:6px;border-radius:4px}.locale-chooser[data-v-1d201bdb]{cursor:pointer}.locale-chooser[data-v-1d201bdb]:hover{text-decoration:none}",""]),e.exports=t}}]);
//# sourceMappingURL=chunk-f7f8b184.1a7d79f9.js.map