(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dialog39","dialog24"],{"208c":function(e,t,n){var a=n("6b2d");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=n("499e").default;r("bd5cfb0c",a,!0,{sourceMap:!1,shadowMode:!1})},6038:function(e,t,n){"use strict";n("8fb0")},"6b2d":function(e,t,n){var a=n("4bad");t=a(!1),t.push([e.i,".body div[data-v-fc61c5b6]:not(:last-of-type){padding-bottom:15px}.body .retained-machine[data-v-fc61c5b6]{display:flex;flex-direction:column}",""]),e.exports=t},7796:function(e,t,n){var a=n("4bad");t=a(!1),t.push([e.i,".prompt-restore[data-v-376502e7]{margin:0}.bottom[data-v-376502e7]{display:flex;flex-direction:column;flex:1}.bottom .banner[data-v-376502e7]{margin-top:0}.bottom .buttons[data-v-376502e7]{display:flex;justify-content:flex-end;width:100%}",""]),e.exports=t},"8fb0":function(e,t,n){var a=n("7796");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=n("499e").default;r("72e3d4d9",a,!0,{sourceMap:!1,shadowMode:!1})},a119:function(e,t,n){"use strict";n("208c")},a90a:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("GenericPrompt",e._b({on:{close:function(t){return e.$emit("close")}}},"GenericPrompt",e.config,!1),[t("template",{slot:"body"},[t("div",{staticClass:"pl-10 pr-10 mt-20 mb-20 body"},[1===e.allToDelete.length?t("div",[e._v("\n        "+e._s(e.t("promptRemove.attemptingToRemove",{type:e.type}))+" "),t("b",[e._v(e._s(e.safeMachinesToDelete[0].nameDisplay))])]):t("div",[e._v("\n        "+e._s(e.t("promptScaleMachineDown.attemptingToRemove",{type:e.type,count:e.allToDelete.length},!0))+"\n      ")]),e._v(" "),e.ignored.length?t("div",{staticClass:"retained-machine"},[t("span",{staticClass:"mb-20"},[e._v(e._s(e.t("promptScaleMachineDown.retainedMachine1")))]),e._v(" "),e._l(e.ignored,(function(n){return t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("promptScaleMachineDown.retainedMachine2",{name:n.nameDisplay},!0),expression:"t('promptScaleMachineDown.retainedMachine2', { name: i.nameDisplay }, true)"}],key:n.nameDisplay})}))],2):e._e()])])],2)},r=[],o=n("2909"),s=n("3835"),c=n("1da1"),i=n("a34a"),l=n.n(i),d=(n("96cf"),n("e260"),n("d3b7"),n("e6cf"),n("3ca3"),n("ddb0"),n("4de4"),n("99af"),n("d81d"),n("4ec9"),n("c206"),n("477f"),n("97fb"),n("d2af"),n("9f9a"),n("43b3"),n("567a"),n("9c87"),n("094c"),n("a9cd"),n("54ec"),n("4e16"),n("f43e"),n("a630"),n("7388")),u=n("a788"),p=n("d1d6"),f={components:{GenericPrompt:p["default"]},props:{resources:{type:Array,required:!0}},fetch:function(){var e=this;return Object(c["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isRke2){t.next=5;break}return t.next=3,Promise.all([e.$store.dispatch("management/findAll",{type:u["e"].MACHINE_DEPLOYMENT}),e.$store.dispatch("management/findAll",{type:u["e"].MACHINE})]);case 3:t.next=7;break;case 5:return t.next=7,Promise.all([e.$store.dispatch("management/findAll",{type:u["F"].NODE_POOL}),e.$store.dispatch("management/findAll",{type:u["F"].NODE})]);case 7:case"end":return t.stop()}}),t)})))()},data:function(){var e,t=null===(e=this.resources[0].cluster)||void 0===e?void 0:e.isRke2,n=t?this.resources[0].cluster:this.resources[0].provisioningCluster,a=this.deleteType("isControlPlane",this.resources,n,t),r=Object(s["a"])(a,2),o=r[0],c=r[1],i=this.deleteType("isEtcd",c,n,t),l=Object(s["a"])(i,2),d=l[0],u=l[1],p=[o,d].filter((function(e){return!!e}));return{cluster:n,isRke2:t,allToDelete:this.resources,safeMachinesToDelete:u,ignored:p,type:this.$store.getters["type-map/labelFor"](this.resources[0].schema,this.resources.length),config:{title:this.t("promptRemove.title"),applyMode:"delete",applyAction:this.remove}}},methods:{deleteType:function(e,t,n,a){var r=t.reduce((function(t,n){return n[e]?t.typed.push(n):t.others.push(n),t}),{typed:[],others:[]}),s=a?n.machines:n.nodes,c=s.filter((function(t){return t[e]})).length,i=r.typed.length,l=c-i===0?r.typed.pop():void 0,d=[].concat(Object(o["a"])(r.typed),Object(o["a"])(r.others));return[l,d]},remove:function(){var e=this;return Object(c["a"])(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isRke2){t.next=4;break}return t.next=3,Promise.all(e.safeMachinesToDelete.map((function(e){var t;return null===(t=e.norman)||void 0===t?void 0:t.doAction("scaledown")})));case 3:return t.abrupt("return");case 4:return n=e.safeMachinesToDelete.reduce((function(e,t){return e.set(t.pool,e.get(t.pool)||[]),e.get(t.pool).push(t),e}),new Map),a=Array.from(n.entries()),t.next=8,Promise.all(a.map((function(e){var t=Object(s["a"])(e,2),n=t[0],a=t[1];return Promise.all(a.map((function(e){return e.setAnnotation(d["d"].DELETE_MACHINE,"true"),e.save()}))).then((function(){return n.scalePool(-a.length,!1)}))})));case 8:return t.next=10,e.cluster.save();case 10:case"end":return t.stop()}}),t)})))()}}},m=f,h=(n("a119"),n("0c7c")),v=Object(h["a"])(m,a,r,!1,null,"fc61c5b6",null);t["default"]=v.exports},d1d6:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("Card",{staticClass:"prompt-restore",attrs:{"show-highlight-border":!1}},[t("template",{slot:"title"},[e._t("title",(function(){return[t("h4",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.title,expression:"title"}],staticClass:"text-default-text",attrs:{slot:"title"},slot:"title"})]}))],2),e._v(" "),t("template",{slot:"body"},[e._t("body",(function(){return[t("div",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.decodeHtml(e.body),expression:"decodeHtml(body)"}],staticClass:"pl-10 pr-10",staticStyle:{"min-height":"50px",display:"flex"}})]}))],2),e._v(" "),t("div",{staticClass:"bottom",attrs:{slot:"actions"},slot:"actions"},[e._l(e.errors,(function(e,n){return t("Banner",{key:n,attrs:{color:"error",label:e}})})),e._v(" "),t("div",{staticClass:"buttons"},[t("button",{staticClass:"btn role-secondary mr-10",on:{click:e.close}},[e._v("\n        "+e._s(e.t("generic.cancel"))+"\n      ")]),e._v(" "),t("AsyncButton",{attrs:{mode:e.applyMode},on:{click:e.apply}})],1)],2)],2)},r=[],o=n("1da1"),s=n("a34a"),c=n.n(s),i=(n("96cf"),n("67c9")),l=n("d4bf"),d=n("bec1"),u=n("4579"),p=n("2c94"),f={components:{Card:l["a"],AsyncButton:i["b"],Banner:d["a"]},props:{applyAction:{type:Function,default:function(){}},applyMode:{type:String,default:"create"},title:{type:String,default:""},body:{type:String,default:""},confirm:{type:Function,default:function(){}}},data:function(){return{errors:[]}},methods:{decodeHtml:p["f"],close:function(){this.confirm(!1),this.$emit("close",!1)},apply:function(e){var t=this;return Object(o["a"])(c.a.mark((function n(){return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.applyAction(e);case 3:t.confirm(!0),t.$emit("close",!0),n.next=12;break;case 7:n.prev=7,n.t0=n["catch"](0),console.error(n.t0),t.errors=Object(u["d"])(n.t0),e(!1);case 12:case"end":return n.stop()}}),n,null,[[0,7]])})))()}}},m=f,h=(n("6038"),n("0c7c")),v=Object(h["a"])(m,a,r,!1,null,"376502e7",null);t["default"]=v.exports}}]);
//# sourceMappingURL=dialog39.7b038b10.js.map